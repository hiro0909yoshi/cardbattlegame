# ST → AP 修正影響クリーチャー・アイテムテストリスト

**最終更新**: 2025年11月13日

---

## 📋 影響範囲クリーチャー・アイテム一覧

### 🎯 優先テスト対象

#### 1. 無効化[ST40以下]
**クリーチャー**: ID 122 シーホース（water_1.json）
- **能力**: 感応[風・HP+30]；無効化[ST40以下]
- **修正内容**: `"nullify_type": "st_below"` → `"ap_below"`
- **テスト項目**:
  - AP40以下のクリーチャーが攻撃時に無効化されるか
  - AP41以上では無効化されないか

---

#### 2. 無効化[ST50以上]
**クリーチャー**: ID 144 ラハブ（water_2.json）
- **能力**: 無効化[ST50以上]；応援[水風・HP+10]
- **修正内容**: `"nullify_type": "st_above"` → `"ap_above"`
- **テスト項目**:
  - AP50以上のクリーチャーが攻撃時に無効化されるか
  - AP49以下では無効化されないか

---

#### 3. 即死[ST40以上・70%]
**クリーチャー**: ID 415 ワイバーン（neutral_1.json）
- **能力**: 即死[ST40以上・70%]
- **修正内容**: condition_checker.gd の `defender_st_check` → `defender_ap_check`
- **テスト項目**:
  - AP40以上の防御側を70%確率で即死させるか
  - AP39以下では即死しないか

---

#### 4. 即死[ST50以上・60%]
**クリーチャー**: ID 16 シグルド（fire_1.json）
- **能力**: 即死[ST50以上・60%]；無効化[MHP50以上]
- **修正内容**: `"condition_type": "defender_st_check"` → `defender_ap_check`
- **テスト項目**:
  - AP50以上の防御側を60%確率で即死させるか
  - AP49以下では即死しないか
  - 無効化[MHP50以上]も同時に動作するか

---

### 📦 影響範囲アイテム

#### 1. アイテム ID 1051: ラグドール
**ファイル**: data/item.json
- **能力**: 無効化[巻物]；無効化[自分よりAPの大きなクリーチャー]
- **修正内容**: 
  - `"nullify_type": "attacker_st_above"` → `"attacker_ap_above"`
  - `"use_base_st": true` → `"use_base_ap": true`
- **テスト項目**:
  - 自分より基礎APが大きいクリーチャーの攻撃を無効化するか
  - 自分と同じ/小さいAPでは無効化されないか

#### 2. アイテム ID 1052（推定）
**ファイル**: data/item.json（L1201付近）
- **修正内容**: `"nullify_type": "st_below"` → `"ap_below"`
- **テスト項目**: AP30以下の攻撃を無効化するか

---

## 🧪 テストシナリオ

### テスト1: シーホース（ID 122）
```
前提条件:
- シーホース（AP 40, HP 30）を配置
- 敵攻撃側クリーチャーを用意（複数AP値で）

テストケース:
1. 敵AP 39以下で攻撃 → 無効化される ✓
2. 敵AP 40で攻撃 → 無効化される ✓
3. 敵AP 41以上で攻撃 → 無効化されない ✓
```

### テスト2: ラハブ（ID 144）
```
前提条件:
- ラハブ（AP 60, HP 60）を配置
- 敵攻撃側クリーチャーを用意（複数AP値で）

テストケース:
1. 敵AP 49以下で攻撃 → 無効化されない ✓
2. 敵AP 50で攻撃 → 無効化される ✓
3. 敵AP 60以上で攻撃 → 無効化される ✓
4. 応援効果は正常に機能するか（水/風属性） ✓
```

### テスト3: ワイバーン（ID 415）
```
前提条件:
- ワイバーン（AP 50, HP 30）が攻撃
- 防御側クリーチャーを用意（複数AP値で）

テストケース:
1. 防御側AP 39以下 → 即死しない（通常ダメージ） ✓
2. 防御側AP 40以上 → 即死判定が発動（70%確率） ✓
3. 複数回実行で70%付近の成功率か確認 ✓
```

### テスト4: シグルド（ID 16）
```
前提条件:
- シグルド（AP 40, HP 40）が攻撃
- 防御側クリーチャーを用意（複数AP値で）

テストケース:
1. 防御側AP 49以下 → 即死しない ✓
2. 防御側AP 50以上 → 即死判定が発動（60%確率） ✓
3. 無効化[MHP50以上]が同時に機能するか ✓
```

### テスト5: ラグドール（ID 1071）
```
前提条件:
- ラグドール装備したクリーチャー（AP 30）
- 敵攻撃側クリーチャーを用意（複数AP値で）

テストケース:
1. 敵AP 29以下で攻撃 → 無効化されない ✓
2. 敵AP 30で攻撃 → 無効化されない ✓
3. 敵AP 31以上で攻撃 → 無効化される ✓
4. 巻物攻撃無効化も同時に機能するか ✓
```

---

## 🔍 検索キーワード

修正後、以下のクリーチャーが重点テスト対象：

| ID | 名前 | 能力 | ファイル |
|-----|------|------|---------|
| 16 | シグルド | 即死[ST50以上]；無効化[MHP50以上] | fire_1.json |
| 122 | シーホース | 感応[風]；無効化[ST40以下] | water_1.json |
| 144 | ラハブ | 無効化[ST50以上]；応援[水風] | water_2.json |
| 415 | ワイバーン | 即死[ST40以上] | neutral_1.json |
| - | ラグドール（アイテム1071） | 無効化[巻物]；無効化[攻撃者AP > 装備者AP] | item.json |

---

## ✅ テスト完了チェックリスト

- [ ] シーホース（ID 122）- 無効化[AP40以下]
- [ ] ラハブ（ID 144）- 無効化[AP50以上]
- [ ] ワイバーン（ID 415）- 即死[AP40以上]
- [ ] シグルド（ID 16）- 即死[AP50以上]
- [ ] ラグドール（ID 1071）- 無効化[攻撃者AP > 装備者AP]
- [ ] 全クリーチャーのコンパイルエラーなし
- [ ] バトルテストツールで動作確認

---

## 📌 注意点

1. **条件チェック値の変更**
   - ST40以下 → AP40以下（値そのものは変わらない）
   - ただし、基礎AP取得ロジックは既に修正済み

2. **他の属性STは影響なし**
   - current_ap （戦闘中の計算AP）は変わらない
   - 修正は「基礎値の判定」部分のみ

3. **テスト時の注意**
   - 複数回実行で確率判定を確認（即死スキル）
   - 複合効果（無効化+応援など）も確認
   - バトルテストツールで大規模テスト推奨

