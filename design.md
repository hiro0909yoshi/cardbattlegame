# ğŸ® ã‚«ãƒ«ãƒ‰ã‚»ãƒ—ãƒˆé¢¨ã‚«ãƒ¼ãƒ‰ãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ  - è¨­è¨ˆæ›¸

## ğŸ“‹ ç›®æ¬¡
1. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
2. [ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ](#ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ)
3. [ãƒ‡ãƒ¼ã‚¿æ§‹é€ ](#ãƒ‡ãƒ¼ã‚¿æ§‹é€ )
4. [ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼](#ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼)
5. [UI/UXè¨­è¨ˆ](#uiuxè¨­è¨ˆ)
6. [æŠ€è¡“ä»•æ§˜](#æŠ€è¡“ä»•æ§˜)
7. [ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½](#ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½)
8. [ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–](#ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–)

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚         Godot Engine 4.4.1              â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Main.tscn (3Dã‚²ãƒ¼ãƒ ã‚·ãƒ¼ãƒ³)              â”‚
â”‚  â”œâ”€â”€ BoardSystem3D                      â”‚
â”‚  â”‚   â”œâ”€â”€ TileNeighborSystem (NEW)      â”‚
â”‚  â”‚   â”œâ”€â”€ MovementController3D          â”‚
â”‚  â”‚   â”œâ”€â”€ TileDataManager                â”‚
â”‚  â”‚   â””â”€â”€ SpecialTileSystem              â”‚
â”‚  â”œâ”€â”€ CardSystem                         â”‚
â”‚  â”œâ”€â”€ BattleSystem                       â”‚
â”‚  â”œâ”€â”€ PlayerSystem                       â”‚
â”‚  â”œâ”€â”€ SkillSystem                        â”‚
â”‚  â”œâ”€â”€ GameFlowManager                    â”‚
â”‚  â””â”€â”€ UIManager                          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Autoload Singletons                    â”‚
â”‚  â”œâ”€â”€ CardLoader                         â”‚
â”‚  â””â”€â”€ GameData                           â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  Data Layer (JSON)                      â”‚
â”‚  â”œâ”€â”€ card_definitions.json              â”‚
â”‚  â”œâ”€â”€ fire/water/wind/earth.json         â”‚
â”‚  â””â”€â”€ spell_*.json                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ä¸»è¦ã‚¯ãƒ©ã‚¹é–¢ä¿‚å›³
```
GameFlowManager
	â”œâ”€â”€ BoardSystem3D
	â”‚   â”œâ”€â”€ TileNeighborSystem (NEW)
	â”‚   â”œâ”€â”€ MovementController3D
	â”‚   â”œâ”€â”€ TileDataManager
	â”‚   â””â”€â”€ SpecialTileSystem
	â”œâ”€â”€ CardSystem
	â”‚   â””â”€â”€ CardLoader (Autoload)
	â”œâ”€â”€ BattleSystem
	â”‚   â”œâ”€â”€ EffectCombat
	â”‚   â””â”€â”€ ConditionChecker
	â”œâ”€â”€ PlayerSystem
	â””â”€â”€ UIManager
		â”œâ”€â”€ PlayerInfoPanel
		â”œâ”€â”€ CardSelectionUI
		â”œâ”€â”€ LevelUpUI
		â””â”€â”€ DebugPanel
```

---

## ã‚³ã‚¢ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆ

### 1. ãƒœãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ  (BoardSystem3D)

#### è²¬å‹™
- 3Dãƒãƒƒãƒ—ã®ç”Ÿæˆã¨ç®¡ç†
- ã‚¿ã‚¤ãƒ«ã®æ‰€æœ‰æ¨©ç®¡ç†
- ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é…ç½®ç®¡ç†ï¼ˆ3Dç©ºé–“ï¼‰
- å±æ€§é€£é–ã®è¨ˆç®—
- é€šè¡Œæ–™ã®è¨ˆç®—
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ç§»å‹•åˆ¶å¾¡
- **ã‚¿ã‚¤ãƒ«éš£æ¥é–¢ä¿‚ã®ç®¡ç†** (NEW)

#### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
```gdscript
# ã‚¿ã‚¤ãƒ«ç®¡ç†
func get_tile_info(tile_index: int) -> Dictionary
func set_tile_owner(tile_index: int, player_id: int)
func place_creature(tile_index: int, creature: Dictionary)

# é€£é–ãƒ»ãƒœãƒ¼ãƒŠã‚¹è¨ˆç®—
func get_element_chain_count(tile_index: int, player_id: int) -> int
func calculate_toll(tile_index: int) -> int
func get_player_lands_by_element(player_id: int) -> Dictionary

# éš£æ¥åˆ¤å®š (NEW)
func get_spatial_neighbors(tile_index: int) -> Array
func has_adjacent_ally_land(tile_index: int, player_id: int) -> bool

# ãƒãƒƒãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
func create_tiles_diamond_layout() -> Array
```

#### ãƒãƒƒãƒ—ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆä»•æ§˜
- **ç¾è¡Œ**: 1è¾º5ãƒã‚¹ã®è±å½¢ï¼ˆå¤–å‘¨20ãƒã‚¹ï¼‰
- **å°†æ¥è¨ˆç”»**: è‡ªç”±ãªåˆ†å²ãƒãƒƒãƒ—è¨­è¨ˆ
  - åå­—è·¯ãƒ»Tå­—è·¯å¯¾å¿œ
  - éãƒ«ãƒ¼ãƒ—æ§‹é€ ã®ãƒãƒƒãƒ—
  - ã‚«ã‚¹ã‚¿ãƒ ãƒãƒƒãƒ—ã‚¨ãƒ‡ã‚£ã‚¿ãƒ¼äºˆå®š
- **ç‰¹æ®Šãƒã‚¹**:
  - ã‚¹ã‚¿ãƒ¼ãƒˆåœ°ç‚¹
  - ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ
  - ãƒ¯ãƒ¼ãƒ—ã‚²ãƒ¼ãƒˆ
  - ã‚«ãƒ¼ãƒ‰ãƒã‚¹
  - ã‚¤ãƒ™ãƒ³ãƒˆãƒã‚¹ï¼ˆæ‹¡å¼µäºˆå®šï¼‰

#### å±æ€§é€£é–ã‚·ã‚¹ãƒ†ãƒ 
```
é€£é–æ•°    é€šè¡Œæ–™å€ç‡    HPãƒœãƒ¼ãƒŠã‚¹
  1å€‹        1.0å€        +10
  2å€‹        1.5å€        +20
  3å€‹        2.5å€        +30
  4å€‹ä»¥ä¸Š    4.0å€        +40 (ä¸Šé™)
```

#### ğŸ†• åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‚·ã‚¹ãƒ†ãƒ 

**æ¦‚è¦**: ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã¨åœŸåœ°ã®å±æ€§ãŒä¸€è‡´ã™ã‚‹ã¨ã€åœŸåœ°ãƒ¬ãƒ™ãƒ«ã«å¿œã˜ãŸHPãƒœãƒ¼ãƒŠã‚¹ãŒå¾—ã‚‰ã‚Œã‚‹ã€‚

**è¨ˆç®—å¼**:
```
åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹HP = åœŸåœ°ãƒ¬ãƒ™ãƒ« Ã— 10

ä¾‹:
- ãƒ¬ãƒ™ãƒ«1ã®ç«å±æ€§åœŸåœ° + ç«å±æ€§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ â†’ +10HP
- ãƒ¬ãƒ™ãƒ«3ã®æ°´å±æ€§åœŸåœ° + æ°´å±æ€§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ â†’ +30HP
- ãƒ¬ãƒ™ãƒ«5ã®é¢¨å±æ€§åœŸåœ° + é¢¨å±æ€§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ â†’ +50HP (æœ€å¤§)
```

**å®Ÿè£…å ´æ‰€**:
- å¬å–šæ™‚: `BaseTile.place_creature()` â†’ `_apply_land_bonus()`
- ãƒãƒˆãƒ«æ™‚: `BattleSystem._apply_attacker_land_bonus()`

**ãƒ‡ãƒ¼ã‚¿æ§‹é€ **:
```gdscript
creature_data = {
	"name": "ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹",
	"element": "ç«",
	"hp": 30,              # åŸºæœ¬HP
	"land_bonus_hp": 20,   # åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ï¼ˆåˆ¥ç®¡ç†ï¼‰
	# è¡¨ç¤ºHP = 30 + 20 = 50
}
```

**ç‰¹å¾´**:
- `hp`ã¨ã¯åˆ¥ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã§ç®¡ç†
- ã€Œè²«é€šã€ã€Œå·»ç‰©ã€ã‚¹ã‚­ãƒ«ã§ç„¡è¦–ã•ã‚Œã‚‹ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
- å¸¸æ™‚é©ç”¨ï¼ˆå¬å–šæ™‚ãƒ»ãƒãƒˆãƒ«æ™‚ï¼‰

#### ğŸ†• éš£æ¥åœŸåœ°åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ 

**æ¦‚è¦**: ã‚¿ã‚¤ãƒ«ã®ç‰©ç†çš„ãªéš£æ¥é–¢ä¿‚ã‚’åº§æ¨™ãƒ™ãƒ¼ã‚¹ã§åˆ¤å®šã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã€‚

**åˆ¤å®šæ–¹æ³•**:
```gdscript
# XZå¹³é¢ã§ã®è·é›¢è¨ˆç®—
const TILE_SIZE = 4.0
const NEIGHBOR_THRESHOLD = 4.5  # ã‚¿ã‚¤ãƒ«ã‚µã‚¤ã‚ºã‚ˆã‚Š10%å¤§ãã„

var dx = abs(my_pos.x - other_pos.x)
var dz = abs(my_pos.z - other_pos.z)
var distance_xz = sqrt(dx * dx + dz * dz)

if distance_xz < NEIGHBOR_THRESHOLD:
	# éš£æ¥ã¨åˆ¤å®š
```

**ä½¿ç”¨ä¾‹**:
```gdscript
# ã‚¹ã‚­ãƒ«æ¡ä»¶: ã€Œéš£æ¥ã—ãŸè‡ªé ˜åœ°ãªã‚‰å¼·æ‰“ã€
var neighbors = board_system.tile_neighbor_system.get_spatial_neighbors(tile_index)
# â†’ [5, 7]  # ã‚¿ã‚¤ãƒ«6ã®éš£æ¥ã‚¿ã‚¤ãƒ«

var has_ally = board_system.tile_neighbor_system.has_adjacent_ally_land(
	tile_index, player_id, board_system
)
# â†’ true/false
```

**ã‚­ãƒ£ãƒƒã‚·ãƒ¥æ©Ÿæ§‹**:
- åˆå›èµ·å‹•æ™‚ã«å…¨ã‚¿ã‚¤ãƒ«ã®éš£æ¥é–¢ä¿‚ã‚’è¨ˆç®—
- çµæœã‚’ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã—ã¦é«˜é€ŸåŒ–ï¼ˆO(1)ã§å–å¾—ï¼‰
- ãƒãƒƒãƒ—å¤‰æ›´æ™‚ã¯å†è¨ˆç®—å¯èƒ½

**æ‹¡å¼µæ€§**:
- åå­—è·¯ãƒ»Tå­—è·¯: 4æ–¹å‘ä»¥ä¸Šã®éš£æ¥ã«ã‚‚å¯¾å¿œ
- ç«‹ä½“äº¤å·®: Yè»¸ã‚‚è€ƒæ…®å¯èƒ½ï¼ˆå°†æ¥ï¼‰

### 1.1 TileNeighborSystem (NEW)

**è²¬å‹™**: ã‚¿ã‚¤ãƒ«ã®ç‰©ç†çš„ãªéš£æ¥é–¢ä¿‚ã‚’ç®¡ç†

**ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰**:
```gdscript
# åˆæœŸåŒ–
func setup(tiles: Dictionary)

# éš£æ¥å–å¾—
func get_spatial_neighbors(tile_index: int) -> Array
func get_sequential_neighbors(tile_index: int) -> Array

# æ¡ä»¶åˆ¤å®š
func has_adjacent_ally_land(tile_index: int, player_id: int, board_system) -> bool
```

**ã‚¢ãƒ«ã‚´ãƒªã‚ºãƒ **:
1. å…¨ã‚¿ã‚¤ãƒ«ãƒšã‚¢ã®è·é›¢ã‚’è¨ˆç®—ï¼ˆXZå¹³é¢ï¼‰
2. é–¾å€¤4.5ä»¥å†…ã‚’éš£æ¥ã¨åˆ¤å®š
3. çµæœã‚’`spatial_neighbors_cache`ã«ã‚­ãƒ£ãƒƒã‚·ãƒ¥

**ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹**:
- åˆå›æ§‹ç¯‰: O(NÂ²) - 20ã‚¿ã‚¤ãƒ«ã§400å›è¨ˆç®—ã€<10ms
- å®Ÿè¡Œæ™‚å–å¾—: O(1) - ã‚­ãƒ£ãƒƒã‚·ãƒ¥ã‹ã‚‰å³åº§ã«å–å¾—

### 2. ã‚«ãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ  (CardSystem)

#### è²¬å‹™
- ãƒ‡ãƒƒã‚­ç®¡ç†ï¼ˆæœ€å¤§50æšï¼‰
- æ‰‹æœ­ç®¡ç†ï¼ˆæœ€å¤§6æšï¼‰
- ã‚«ãƒ¼ãƒ‰ãƒ‰ãƒ­ãƒ¼å‡¦ç†
- æ¨ã¦æœ­ç®¡ç†ã¨ã‚·ãƒ£ãƒƒãƒ•ãƒ«

#### ã‚«ãƒ¼ãƒ‰ãƒ©ã‚¤ãƒ•ã‚µã‚¤ã‚¯ãƒ«
```
ãƒ‡ãƒƒã‚­ â†’ æ‰‹æœ­ â†’ ä½¿ç”¨ â†’ æ¨ã¦æœ­
		 â†‘              â†“
		 â””â”€â”€ ã‚·ãƒ£ãƒƒãƒ•ãƒ« â†â”˜
```

#### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰
```gdscript
# åˆæœŸåŒ–
func _initialize_deck()  # GameDataã‹ã‚‰é¸æŠãƒ‡ãƒƒã‚­èª­ã¿è¾¼ã¿
func deal_initial_hands_all_players(player_count: int)

# ãƒ‰ãƒ­ãƒ¼å‡¦ç†
func draw_card_for_player(player_id: int) -> Dictionary
func draw_cards_for_player(player_id: int, count: int) -> Array

# ã‚«ãƒ¼ãƒ‰ä½¿ç”¨
func use_card_for_player(player_id: int, card_index: int) -> Dictionary

# æ¤œç´¢
func find_cards_by_element_for_player(player_id: int, element: String) -> Array
func find_affordable_cards_for_player(player_id: int, magic: int) -> Array
```

### 3. ãƒãƒˆãƒ«ã‚·ã‚¹ãƒ†ãƒ  (BattleSystem)

#### è²¬å‹™
- æˆ¦é—˜åˆ¤å®šï¼ˆå…ˆåˆ¶æ”»æ’ƒå¯¾å¿œï¼‰
- åœ°å½¢ãƒ»é€£é–ãƒœãƒ¼ãƒŠã‚¹é©ç”¨
- **åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã®é©ç”¨** (NEW)
- ã‚¹ã‚­ãƒ«åŠ¹æœã®é©ç”¨
- ãƒãƒˆãƒ«çµæœã®æ¼”å‡ºåˆ¶å¾¡

**æ³¨æ„**: å±æ€§ç›¸æ€§ã‚·ã‚¹ãƒ†ãƒ ã¯å°†æ¥çš„ã«å‰Šé™¤äºˆå®š

#### ãƒãƒˆãƒ«ãƒ•ãƒ­ãƒ¼
```
1. æ”»æ’ƒå´ã®åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹é©ç”¨ (NEW)
   â””â”€ ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼å±æ€§ = ã‚¿ã‚¤ãƒ«å±æ€§?
	  â””â”€ HP + (ãƒ¬ãƒ™ãƒ« Ã— 10)

2. æ”»æ’ƒå´ã®å…ˆåˆ¶æ”»æ’ƒ
   â”œâ”€ AP â‰¥ é˜²å¾¡å´HP? â†’ æ”»æ’ƒå´å‹åˆ©
   â””â”€ é˜²å¾¡å´ç”Ÿå­˜ â†’ æ¬¡ã¸

3. é˜²å¾¡å´ã®åæ’ƒ
   â”œâ”€ ST â‰¥ æ”»æ’ƒå´HP? â†’ é˜²å¾¡å´å‹åˆ©
   â”œâ”€ æ”»æ’ƒå´ç”Ÿå­˜ â†’ æ”»æ’ƒå´å‹åˆ©
   â””â”€ ä¸¡è€…AP=0 â†’ å¼•ãåˆ†ã‘ï¼ˆè† ç€ï¼‰
```

#### ãƒœãƒ¼ãƒŠã‚¹è¨ˆç®—
```gdscript
# å±æ€§ç›¸æ€§ï¼ˆå‰Šé™¤äºˆå®šï¼‰
# ç¾åœ¨å®Ÿè£…ã•ã‚Œã¦ã„ã‚‹ãŒã€å°†æ¥çš„ã«å‰Šé™¤ã•ã‚Œã‚‹
# ç« â†’ é¢¨ â†’ åœŸ â†’ æ°´ â†’ ç«
# ç›¸æ€§æœ‰åˆ©: ST+20

# ğŸ†• åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ï¼ˆHPï¼‰- ãƒ¡ã‚¤ãƒ³ã‚·ã‚¹ãƒ†ãƒ 
ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼å±æ€§ = ã‚¿ã‚¤ãƒ«å±æ€§
â†’ HP + (ãƒ¬ãƒ™ãƒ« Ã— 10)
â†’ land_bonus_hpãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«æ ¼ç´

ä¾‹:
- åŸºæœ¬HP: 30
- ãƒ¬ãƒ™ãƒ«3ã®ç«åœŸåœ° + ç«ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼
- land_bonus_hp: 30
- åˆè¨ˆHP: 60
```

#### ã‚¹ã‚­ãƒ«ã‚·ã‚¹ãƒ†ãƒ çµ±åˆ

**è©³ç´°ã¯ [skills_design.md](skills_design.md) ã‚’å‚ç…§**

```gdscript
# ã‚¹ã‚­ãƒ«é©ç”¨ãƒ•ãƒ­ãƒ¼
1. ability_parsed ã‚’è§£æ
2. ConditionChecker ã§æ¡ä»¶åˆ¤å®š
3. EffectCombat ã§åŠ¹æœé©ç”¨
4. ä¿®æ­£å¾Œã® AP/HP ã§ãƒãƒˆãƒ«å®Ÿè¡Œ
```

**å®Ÿè£…æ¸ˆã¿ä¸»è¦ã‚¹ã‚­ãƒ«**:
- æ„Ÿå¿œ: ç‰¹å®šå±æ€§ã®åœŸåœ°æ‰€æœ‰ã§AP/HPä¸Šæ˜‡
- è²«é€š: é˜²å¾¡å´ã®åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ç„¡åŠ¹åŒ–
- å¼·æ‰“: æ¡ä»¶ä¸‹ã§APå¢—å¹…
- å…ˆåˆ¶: å…ˆæ”»æ¨©ç²å¾—

**ã‚¹ã‚­ãƒ«é©ç”¨é †åº**: æ„Ÿå¿œ â†’ å¼·æ‰“ â†’ ãã®ä»–

è©³ç´°ãªä»•æ§˜ã€å®Ÿè£…ä¾‹ã€ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã«ã¤ã„ã¦ã¯ `skills_design.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

### 4. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚·ã‚¹ãƒ†ãƒ  (PlayerSystem)

#### è²¬å‹™
- ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±ç®¡ç†ï¼ˆé­”åŠ›ã€åœŸåœ°æ•°ã€ä½ç½®ï¼‰
- ã‚¿ãƒ¼ãƒ³ç®¡ç†
- é­”åŠ›ã®å¢—æ¸›å‡¦ç†
- å‹åˆ©æ¡ä»¶åˆ¤å®š

#### ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ãƒ‡ãƒ¼ã‚¿æ§‹é€ 
```gdscript
{
  "id": int,
  "name": String,
  "magic_power": int,      # åˆæœŸ3000G
  "position": int,         # ãƒœãƒ¼ãƒ‰ä¸Šã®ä½ç½®
  "owned_lands": Array,    # æ‰€æœ‰åœŸåœ°ã®ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  "is_cpu": bool,
  "color": Color
}
```

### 5. ã‚¹ã‚­ãƒ«ã‚·ã‚¹ãƒ†ãƒ  (SkillSystem)

**è©³ç´°ã¯ [skills_design.md](skills_design.md) ã‚’å‚ç…§**

#### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£
```
SkillSystem (ãƒãƒãƒ¼ã‚¸ãƒ£ãƒ¼)
  â”œâ”€â”€ ConditionChecker (æ¡ä»¶åˆ¤å®š)
  â””â”€â”€ EffectCombat (åŠ¹æœé©ç”¨)
```

#### å®Ÿè£…æ¸ˆã¿ã‚¹ã‚­ãƒ«ä¸€è¦§
- **æ„Ÿå¿œ**: ç‰¹å®šå±æ€§ã®åœŸåœ°æ‰€æœ‰ã§AP/HPä¸Šæ˜‡ï¼ˆ9ä½“å®Ÿè£…ï¼‰
- **è²«é€š**: é˜²å¾¡å´ã®åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ç„¡åŠ¹åŒ–
- **å¼·æ‰“**: æ¡ä»¶ä¸‹ã§APå¢—å¹…
- **å…ˆåˆ¶**: å…ˆæ”»æ¨©ç²å¾—
- **é˜²é­”**: ã‚¹ãƒšãƒ«ç„¡åŠ¹åŒ–ï¼ˆéƒ¨åˆ†å®Ÿè£…ï¼‰

#### ã‚¹ã‚­ãƒ«é©ç”¨é †åº
1. æ„Ÿå¿œã‚¹ã‚­ãƒ« â†’ 2. å¼·æ‰“ã‚¹ã‚­ãƒ« â†’ 3. ãã®ä»–ã‚¹ã‚­ãƒ«

ã‚¹ã‚­ãƒ«ã®è©³ç´°ä»•æ§˜ã€æ¡ä»¶ã‚·ã‚¹ãƒ†ãƒ ã€BattleParticipantã¨HPç®¡ç†ã€å°†æ¥å®Ÿè£…äºˆå®šã®ã‚¹ã‚­ãƒ«ã«ã¤ã„ã¦ã¯ `skills_design.md` ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ 

### ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿
```json
{
  "id": 1,
  "name": "ã‚¢ãƒ¼ãƒ ãƒ‰ãƒ‘ãƒ©ãƒ‡ã‚£ãƒ³",
  "rarity": "E",
  "type": "creature",
  "element": "ç«",
  "cost": {
	"mp": 200,
	"lands_required": ["ç«", "ç«"]
  },
  "ap": 0,
  "hp": 50,
  "ability": "STå¤‰å‹•",
  "ability_detail": "ST=ç«é…ç½®æ•°Ã—10ï¼›ç„¡åŠ¹åŒ–[å·»ç‰©]",
  "ability_parsed": {
	"effects": [...]
  }
}
```

### ã‚¿ã‚¤ãƒ«ãƒ‡ãƒ¼ã‚¿
```gdscript
{
  "index": int,           # ã‚¿ã‚¤ãƒ«ã‚¤ãƒ³ãƒ‡ãƒƒã‚¯ã‚¹
  "element": String,      # "ç«", "æ°´", "é¢¨", "åœŸ", ""
  "owner": int,           # -1=ç©ºãåœ°, 0-3=ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ID
  "level": int,           # 1-5
  "creature": Dictionary, # é…ç½®ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼
  "position": Vector3,    # 3Dåº§æ¨™
  "tile_type": String,    # "START", "CHECKPOINT", "WARP", etc.
  "connections": Array    # æ¥ç¶šã‚¿ã‚¤ãƒ«ï¼ˆåˆ†å²è·¯ç”¨ï¼‰
}
```

### ğŸ†• ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãƒ‡ãƒ¼ã‚¿ï¼ˆé…ç½®å¾Œï¼‰
```gdscript
{
  "id": 49,
  "name": "ãƒ­ãƒ¼ãƒ³ãƒ“ãƒ¼ã‚¹ãƒˆ",
  "element": "ç«",
  "ap": 20,
  "hp": 40,               # åŸºæœ¬HP
  "land_bonus_hp": 30,    # ğŸ†• åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ï¼ˆãƒ¬ãƒ™ãƒ«3Ã—10ï¼‰
  "ability_parsed": {...}
}
```

**è¡¨ç¤ºHPè¨ˆç®—**:
```gdscript
var total_hp = creature.hp + creature.get("land_bonus_hp", 0)
# åŸºæœ¬HP(40) + åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹(30) = 70
```

### ãƒ‡ãƒƒã‚­ãƒ‡ãƒ¼ã‚¿ (GameData)

**æ³¨æ„**: ç¾åœ¨ãƒ‡ãƒƒã‚­ã‚·ã‚¹ãƒ†ãƒ ã¯åˆ¥ã®æ–¹å¼ã§ç®¡ç†ã•ã‚Œã¦ã„ã¾ã™ã€‚
card_definitions.jsonã‹ã‚‰ç›´æ¥ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’èª­ã¿è¾¼ã‚€å®Ÿè£…ã«å¤‰æ›´äºˆå®šã€‚

ä»¥ä¸‹ã¯æ—§ãƒ‡ãƒ¼ã‚¿æ§‹é€ ï¼ˆä½¿ç”¨ã—ã¦ã„ã¾ã›ã‚“ï¼‰ï¼š
```gdscript
# å‰Šé™¤äºˆå®šã®å¤ã„æ§‹é€ 
{
  "book_1": {
	"name": "ç‚ã®æ›¸",
	"cards": {
	  1: 3,  # card_id: count
	  2: 2
	}
  }
}
```

ç¾è¡Œã®å®Ÿè£…ã§ã¯ã€CardLoaderãŒfire.json/water.jsonç­‰ã‹ã‚‰
ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã‚’ç›´æ¥ãƒ­ãƒ¼ãƒ‰ã—ã¦ã„ã¾ã™ã€‚

---

## ã‚²ãƒ¼ãƒ ãƒ•ãƒ­ãƒ¼

### ãƒ¡ã‚¤ãƒ³ã‚²ãƒ¼ãƒ ãƒ«ãƒ¼ãƒ—
```
ã‚²ãƒ¼ãƒ é–‹å§‹
  â†“
ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åˆæœŸåŒ–ï¼ˆé­”åŠ›3000Gï¼‰
  â†“
åˆæœŸæ‰‹æœ­é…å¸ƒï¼ˆ5æšï¼‰
  â†“
â”Œâ”€ ã‚¿ãƒ¼ãƒ³é–‹å§‹ â†â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  â†“                      â”‚
â”‚ ã‚µã‚¤ã‚³ãƒ­æŒ¯ã‚‹ï¼ˆ1-6ï¼‰     â”‚
â”‚  â†“                      â”‚
â”‚ ç§»å‹•                    â”‚
â”‚  â†“                      â”‚
â”‚ ãƒã‚¹ã‚¤ãƒ™ãƒ³ãƒˆåˆ¤å®š        â”‚
â”‚  â”œâ”€ ç©ºãåœ°             â”‚
â”‚  â”‚   â””â”€ ã‚«ãƒ¼ãƒ‰å¬å–šå¯èƒ½  â”‚
â”‚  â”‚      â””â”€ ğŸ†• åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹é©ç”¨ â”‚
â”‚  â”œâ”€ æ•µã®åœŸåœ°           â”‚
â”‚  â”‚   â”œâ”€ é€šè¡Œæ–™æ”¯æ‰•ã„    â”‚
â”‚  â”‚   â””â”€ ãƒãƒˆãƒ«é¸æŠå¯èƒ½  â”‚
â”‚  â”‚      â””â”€ ğŸ†• éš£æ¥è‡ªé ˜åœ°åˆ¤å®š â”‚
â”‚  â”œâ”€ ã‚¹ã‚¿ãƒ¼ãƒˆé€šé       â”‚
â”‚  â”‚   â””â”€ 200Gç²å¾—       â”‚
â”‚  â””â”€ ã‚«ãƒ¼ãƒ‰ãƒã‚¹         â”‚
â”‚      â””â”€ ã‚«ãƒ¼ãƒ‰å…¥æ‰‹      â”‚
â”‚  â†“                      â”‚
â”‚ åœŸåœ°ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—        â”‚
â”‚  â†“                      â”‚
â”‚ ã‚«ãƒ¼ãƒ‰ãƒ‰ãƒ­ãƒ¼ï¼ˆ1æšï¼‰      â”‚
â”‚  â†“                      â”‚
â”‚ å‹åˆ©æ¡ä»¶åˆ¤å®š            â”‚
â”‚  â”œâ”€ Yes â†’ ã‚²ãƒ¼ãƒ çµ‚äº†   â”‚
â”‚  â””â”€ No â†’ æ¬¡ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼â”€â”˜
```

### ãƒãƒˆãƒ«ãƒ•ãƒ­ãƒ¼è©³ç´°
```
ãƒãƒˆãƒ«é–‹å§‹
  â†“
ã‚«ãƒ¼ãƒ‰é¸æŠï¼ˆæ‰‹æœ­ã‹ã‚‰ï¼‰
  â†“
ã‚³ã‚¹ãƒˆæ”¯æ‰•ã„ï¼ˆmp Ã— 10Gï¼‰
  â†“
ğŸ†• æ”»æ’ƒå´ã‚«ãƒ¼ãƒ‰ã«åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹é©ç”¨
  â”œâ”€ ã‚«ãƒ¼ãƒ‰å±æ€§ = ã‚¿ã‚¤ãƒ«å±æ€§?
  â””â”€ Yes â†’ HP + (ãƒ¬ãƒ™ãƒ« Ã— 10)
  â†“
ğŸ†• éš£æ¥è‡ªé ˜åœ°åˆ¤å®š
  â”œâ”€ TileNeighborSystemã§éš£æ¥ã‚¿ã‚¤ãƒ«å–å¾—
  â”œâ”€ éš£æ¥ã«è‡ªé ˜åœ°ã‚ã‚Š?
  â””â”€ Yes â†’ å¼·æ‰“æ¡ä»¶æº€ãŸã™
  â†“
ã‚¹ã‚­ãƒ«æ¡ä»¶åˆ¤å®š
  â”œâ”€ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼åœŸåœ°å–å¾—
  â”œâ”€ ãƒãƒˆãƒ«ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆæ§‹ç¯‰
  â”‚   â”œâ”€ battle_tile_index
  â”‚   â”œâ”€ player_id
  â”‚   â””â”€ board_system
  â””â”€ å¼·æ‰“ç­‰ã®åŠ¹æœåˆ¤å®š
  â†“
ãƒœãƒ¼ãƒŠã‚¹è¨ˆç®—
  â”œâ”€ å±æ€§ç›¸æ€§ï¼ˆSTï¼‰- å‰Šé™¤äºˆå®š
  â””â”€ åœ°å½¢ãƒ»é€£é–ï¼ˆHPï¼‰
  â†“
å…ˆåˆ¶æ”»æ’ƒåˆ¤å®š
  â”œâ”€ æ”»æ’ƒå´ AP vs é˜²å¾¡å´ HP
  â”‚   â””â”€ é˜²å¾¡å´HP = åŸºæœ¬HP + land_bonus_hp
  â””â”€ é˜²å¾¡å´å€’ã‚Œã‚‹? â†’ å‹åˆ©
  â†“
åæ’ƒåˆ¤å®šï¼ˆé˜²å¾¡å´ç”Ÿå­˜æ™‚ï¼‰
  â”œâ”€ é˜²å¾¡å´ ST vs æ”»æ’ƒå´ HP
  â””â”€ çµæœç¢ºå®š
  â†“
åœŸåœ°æ‰€æœ‰æ¨©å¤‰æ›´
  â†“
UIæ›´æ–°
```

---

## UI/UXè¨­è¨ˆ

### ç”»é¢ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ [é­”åŠ›: 3450G] [åœŸåœ°: 5/20] [P1ã‚¿ãƒ¼ãƒ³]      â”‚ â† PlayerInfoPanel
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                             â”‚
â”‚          [ãƒœãƒ¼ãƒ‰ãƒ“ãƒ¥ãƒ¼]                      â”‚
â”‚         â—‡ â—‡ â—‡ â—‡ â—‡                          â”‚
â”‚        â—‡       â—‡                           â”‚
â”‚       â—‡         â—‡                          â”‚
â”‚        â—‡       â—‡                           â”‚
â”‚         â—‡ â—‡ â—‡ â—‡ â—‡                          â”‚
â”‚                                             â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ [ã‚«ãƒ¼ãƒ‰1] [ã‚«ãƒ¼ãƒ‰2] [ã‚«ãƒ¼ãƒ‰3] [ã‚«ãƒ¼ãƒ‰4]     â”‚ â† Hand (æ‰‹æœ­)
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ

#### 1. PlayerInfoPanel
- **ä½ç½®**: ç”»é¢ä¸Šéƒ¨
- **è¡¨ç¤ºå†…å®¹**:
  - ç¾åœ¨ã®ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼å
  - é­”åŠ›ï¼ˆGoldï¼‰
  - æ‰€æœ‰åœŸåœ°æ•°
  - ãƒ‡ãƒƒã‚­/æ¨ã¦æœ­æšæ•°
- **ã‚µã‚¤ã‚º**: èª¿æ•´å¯èƒ½ï¼ˆ71è¡Œç›®ã§è¨­å®šï¼‰

#### 2. CardSelectionUI
- **ç”¨é€”**: ã‚«ãƒ¼ãƒ‰é¸æŠãƒ»ãƒãƒˆãƒ«æ±ºå®š
- **è¡¨ç¤ºè¦ç´ **:
  - ã‚«ãƒ¼ãƒ‰ä¸€è¦§ï¼ˆã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«å¯èƒ½ï¼‰
  - ã‚«ãƒ¼ãƒ‰ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
  - æ±ºå®š/ã‚­ãƒ£ãƒ³ã‚»ãƒ«ãƒœã‚¿ãƒ³
- **ãƒ¢ãƒ¼ãƒ€ãƒ«**: é¸æŠä¸­ã¯ä»–æ“ä½œç„¡åŠ¹

#### 3. LevelUpUI
- **ç”¨é€”**: åœŸåœ°ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—
- **è¡¨ç¤ºè¦ç´ **:
  - ç¾åœ¨ãƒ¬ãƒ™ãƒ« / æ¬¡ãƒ¬ãƒ™ãƒ«
  - å¿…è¦ã‚³ã‚¹ãƒˆ
  - å®Ÿè¡Œ/ã‚¹ã‚­ãƒƒãƒ—ãƒœã‚¿ãƒ³

#### 4. DebugPanel
- **ä½ç½®**: ç”»é¢å³ä¸‹
- **æ©Ÿèƒ½**:
  - ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æƒ…å ±è¡¨ç¤º
  - ãƒ‡ãƒãƒƒã‚°ã‚³ãƒãƒ³ãƒ‰
  - CPUæ‰‹æœ­è¡¨ç¤º

### ã‚«ãƒ¼ãƒ‰è¡¨ç¤ºä»•æ§˜
```
ã‚µã‚¤ã‚º: 240x350px
é–“éš”: 20px
é…ç½®: ç”»é¢ä¸‹éƒ¨ä¸­å¤®æƒãˆ

ã‚«ãƒ¼ãƒ‰æ§‹æˆ:
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  [ã‚³ã‚¹ãƒˆ]     â”‚ â† å³ä¸Š
â”‚              â”‚
â”‚  [åå‰]      â”‚ â† ä¸­å¤®
â”‚  [å±æ€§]      â”‚
â”‚              â”‚
â”‚  AP: 40      â”‚ â† ä¸‹éƒ¨
â”‚  HP: 30 (+20)â”‚ â† ğŸ†• åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹è¡¨ç¤º
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

---

## æŠ€è¡“ä»•æ§˜

### é–‹ç™ºç’°å¢ƒ
- **ã‚¨ãƒ³ã‚¸ãƒ³**: Godot Engine 4.4.1
- **è¨€èª**: GDScript
- **ãƒ¬ãƒ³ãƒ€ãƒªãƒ³ã‚°**: 3Då°‚ç”¨ï¼ˆForward+ï¼‰
- **å¯¾è±¡OS**: macOS (M4 MacBook Air)
- **è§£åƒåº¦**: 3704x1712pxï¼ˆã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ãƒ¢ãƒ¼ãƒ‰ï¼‰
- **ã‚«ãƒ¡ãƒ©**: 3Dãƒ‘ãƒ¼ã‚¹ãƒšã‚¯ãƒ†ã‚£ãƒ–ã‚«ãƒ¡ãƒ©

### ãƒ•ã‚¡ã‚¤ãƒ«æ§‹æˆ
```
cardbattlegame/
â”œâ”€â”€ scenes/
â”‚   â”œâ”€â”€ game.tscn          # ã€å‰Šé™¤äºˆå®šã€‘2Dç‰ˆï¼ˆä½¿ç”¨ã—ã¦ã„ãªã„ï¼‰
â”‚   â”œâ”€â”€ Main.tscn          # ãƒ¡ã‚¤ãƒ³ã®3Dã‚²ãƒ¼ãƒ ã‚·ãƒ¼ãƒ³
â”‚   â”œâ”€â”€ MainMenu.tscn      # ãƒ¡ã‚¤ãƒ³ãƒ¡ãƒ‹ãƒ¥ãƒ¼
â”‚   â”œâ”€â”€ DeckEditor.tscn    # ãƒ‡ãƒƒã‚­ç·¨é›†
â”‚   â”œâ”€â”€ Card.tscn          # ã‚«ãƒ¼ãƒ‰ã‚·ãƒ¼ãƒ³
â”‚   â”œâ”€â”€ Tiles/             # ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒ³
â”‚   â””â”€â”€ Characters/        # ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼
â”‚
â”œâ”€â”€ scripts/
â”‚   â”œâ”€â”€ game_constants.gd  # å®šæ•°å®šç¾©
â”‚   â”œâ”€â”€ card_system.gd
â”‚   â”œâ”€â”€ battle_system.gd
â”‚   â”œâ”€â”€ player_system.gd
â”‚   â”œâ”€â”€ board_system_3d.gd  # ãƒ¡ã‚¤ãƒ³ï¼ˆ3Då°‚ç”¨ï¼‰
â”‚   â”œâ”€â”€ tile_neighbor_system.gd  # ğŸ†• éš£æ¥åˆ¤å®š
â”‚   â”œâ”€â”€ movement_controller.gd
â”‚   â”œâ”€â”€ game_flow_manager.gd
â”‚   â”œâ”€â”€ skill_system.gd
â”‚   â”œâ”€â”€ ui_components/
â”‚   â”œâ”€â”€ flow_handlers/
â”‚   â”œâ”€â”€ tiles/
â”‚   â””â”€â”€ skills/
â”‚
â”œâ”€â”€ data/
â”‚   â”œâ”€â”€ card_definitions.json
â”‚   â”œâ”€â”€ fire.json
â”‚   â”œâ”€â”€ water.json
â”‚   â”œâ”€â”€ wind.json
â”‚   â”œâ”€â”€ earth.json
â”‚   â””â”€â”€ spell_*.json
â”‚
â”œâ”€â”€ assets/
â”‚   â””â”€â”€ images/
â”‚       â”œâ”€â”€ tiles/         # 64x64px PNG
â”‚       â””â”€â”€ map/
â”‚
â””â”€â”€ models/                # 3Dãƒ¢ãƒ‡ãƒ« (GLB)
```

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è€ƒæ…®äº‹é …
- **z-index**: å¥¥è¡Œãè¡¨ç¾ï¼ˆé‡ãªã‚Šé †åˆ¶å¾¡ï¼‰
- **ãƒ†ã‚¯ã‚¹ãƒãƒ£ã‚µã‚¤ã‚º**: 128x128pxæ¨å¥¨ï¼ˆè¡¨ç¤º50x50ï¼‰
- **ãƒãƒ¼ãƒ‰æ•°**: æœ€å°é™ã«æŠ‘ãˆã‚‹
- **ã‚·ã‚°ãƒŠãƒ«**: ç–çµåˆã®ãŸã‚ã‚·ã‚°ãƒŠãƒ«æ´»ç”¨
- **ğŸ†• éš£æ¥åˆ¤å®šã‚­ãƒ£ãƒƒã‚·ãƒ¥**: O(NÂ²)è¨ˆç®—ã‚’åˆå›ã®ã¿å®Ÿè¡Œã€ä»¥é™O(1)

### åˆ¶ç´„äº‹é …
1. **äºˆç´„èªå›é¿**:
   - `owner` â†’ `tile_owner`
   - `is_processing()` â†’ `is_battle_active()`
2. **TextureRectåˆ¶ç´„**:
   - `color`ãƒ—ãƒ­ãƒ‘ãƒ†ã‚£ä½¿ç”¨ä¸å¯
   - `modulate`ã§è‰²èª¿æ•´
3. **ç”»åƒå½¢å¼**:
   - é€é: PNGå¿…é ˆ
   - JPEG: é€éä¸å¯

### âš ï¸ é‡è¦: ã‚¿ãƒ¼ãƒ³çµ‚äº†å‡¦ç†ã®ç®¡ç†

**è²¬ä»»ã‚¯ãƒ©ã‚¹**: `GameFlowManager` (scripts/game_flow_manager.gd)

#### end_turn()ã®å‘¼ã³å‡ºã—çµŒè·¯ï¼ˆå®Œå…¨ç‰ˆï¼‰

```
ã€æ­£å¸¸ãªå‘¼ã³å‡ºã—ãƒã‚§ãƒ¼ãƒ³ã€‘
1. TileActionProcessor (_complete_action)
   â””â”€ emit_signal("action_completed")
	  â”‚
	  â†“
2. BoardSystem3D (_on_action_completed)
   â””â”€ emit_signal("tile_action_completed")
	  â”‚
	  â†“
3. GameFlowManager (_on_tile_action_completed_3d)
   â””â”€ end_turn()
	  â””â”€ emit_signal("turn_ended")
```

#### tile_action_completedç™ºç«ç®‡æ‰€ï¼ˆå…¨ãƒªã‚¹ãƒˆï¼‰

**A. BoardSystem3DçµŒç”±ï¼ˆæ­£å¸¸ç³»ï¼‰**:
```gdscript
# board_system_3d.gd Line 221
func _on_action_completed():
	if not is_waiting_for_action:
		return
	is_waiting_for_action = false
	emit_signal("tile_action_completed")
```

**B. GameFlowManagerå†…ã§ã®ç›´æ¥ç™ºç«ï¼ˆå•é¡Œç³»ï¼‰**:
```gdscript
# game_flow_manager.gd
Line 151: _on_cpu_summon_decided() å†…
Line 188: _on_cpu_level_up_decided() å†…
Line 210, 219: on_level_up_selected() å†…

# âš ï¸ ã“ã‚Œã‚‰ã¯å‰Šé™¤äºˆå®šï¼ˆ2Dç‰ˆã®æ®‹å­˜ã‚³ãƒ¼ãƒ‰ï¼‰
```

**C. TileActionProcessorçµŒç”±ï¼ˆæ­£å¸¸ç³»ï¼‰**:
```gdscript
# tile_action_processor.gd
- execute_summon() â†’ _complete_action()
- on_action_pass() â†’ _complete_action()
- on_card_selected() â†’ _complete_action()
- on_level_up_selected() â†’ _complete_action()
```

#### é‡è¤‡å®Ÿè¡Œé˜²æ­¢æ©Ÿæ§‹ï¼ˆ3æ®µéšï¼‰

```gdscript
# ã€ç¬¬1æ®µéšã€‘BoardSystem3D (board_system_3d.gd Line 219-223)
func _on_action_completed():
	if not is_waiting_for_action:  # é‡è¤‡ãƒã‚§ãƒƒã‚¯
		return
	is_waiting_for_action = false
	emit_signal("tile_action_completed")

# ã€ç¬¬2æ®µéšã€‘GameFlowManager (game_flow_manager.gd Line 134-138)
func _on_tile_action_completed_3d():
	if current_phase == GamePhase.END_TURN or current_phase == GamePhase.SETUP:
		print("Warning: tile_action_completed ignored (phase:", current_phase, ")")
		return
	end_turn()

# ã€ç¬¬3æ®µéšã€‘GameFlowManager (game_flow_manager.gd Line 230-233)
func end_turn():
	if current_phase == GamePhase.END_TURN:
		print("Warning: Already ending turn")
		return
	# ... å‡¦ç† ...
```

#### æ—¢çŸ¥ã®å•é¡Œï¼ˆBUG-000ï¼‰

**ç—‡çŠ¶**:
- ã‚¿ãƒ¼ãƒ³ãŒé£›ã°ã•ã‚Œã‚‹ï¼ˆãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼1â†’ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼3ï¼‰
- `end_turn()`ã®è¤‡æ•°å›å‘¼ã³å‡ºã—
- ãƒ•ã‚§ãƒ¼ã‚ºãƒã‚§ãƒƒã‚¯ãŒéåŒæœŸå‡¦ç†ã«å¯¾å¿œã§ããªã„

**æ ¹æœ¬åŸå› **:
1. **ã‚·ã‚°ãƒŠãƒ«çµŒè·¯ã®äºŒé‡åŒ–**: GameFlowManagerãŒç›´æ¥emit_signalã—ã¦ã„ã‚‹
2. **éåŒæœŸç«¶åˆ**: awaitã‚¿ã‚¤ãƒŸãƒ³ã‚°ã§ãƒ•ã‚§ãƒ¼ã‚ºãƒã‚§ãƒƒã‚¯ãŒç„¡åŠ¹åŒ–
3. **2Dç‰ˆæ®‹å­˜**: å‰Šé™¤äºˆå®šã®CPUãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰ãŒæ··åœ¨

**å½±éŸ¿ç®‡æ‰€**:
```
scripts/game_flow_manager.gd
  - Line 151: _on_cpu_summon_decided()
  - Line 188: _on_cpu_level_up_decided()
  - Line 210-219: on_level_up_selected()
```

**ä¿®æ­£è¨ˆç”»**: 
- issues.md BUG-000 å‚ç…§
- TECH-001ï¼ˆå¤ã„2Dã‚³ãƒ¼ãƒ‰å‰Šé™¤ï¼‰ã¨é€£å‹•
- ã‚·ã‚°ãƒŠãƒ«çµŒè·¯ã‚’å®Œå…¨ä¸€æœ¬åŒ–ï¼ˆæ¨å¥¨ï¼‰

---

## 3Då®Ÿè£…ã®ç‰¹å¾´

### ç¾è¡Œã®3Dã‚·ã‚¹ãƒ†ãƒ 
- **BoardSystem3D**: 3Dç©ºé–“ã§ã®ã‚¿ã‚¤ãƒ«é…ç½®
- **TileNeighborSystem**: ğŸ†• ç‰©ç†åº§æ¨™ãƒ™ãƒ¼ã‚¹ã®éš£æ¥åˆ¤å®š
- **MovementController3D**: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®3Dç§»å‹•åˆ¶å¾¡
- **ã‚«ãƒ¡ãƒ©ã‚·ã‚¹ãƒ†ãƒ **: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼è¿½å¾“ãƒ»ãƒ•ã‚©ãƒ¼ã‚«ã‚¹æ©Ÿèƒ½
- **3Dãƒ¢ãƒ‡ãƒ«**: GLBå½¢å¼ã®ã‚¿ã‚¤ãƒ«ãƒ»ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼

### ãƒãƒƒãƒ—è¨­è¨ˆã®é€²åŒ–
```
ç¾åœ¨ï¼ˆè±å½¢1å‘¨ï¼‰        å°†æ¥ï¼ˆè‡ªç”±åˆ†å²ï¼‰
	 â—‡                      â—‡
	â—‡ â—‡                    â•± â•²
   â—‡   â—‡                  â—‡   â—‡
  â—‡     â—‡      â†’         â”‚   â”‚
   â—‡   â—‡                  â—‡â•â•â•â—‡
	â—‡ â—‡                    â•² â•±
	 â—‡                      â—‡
```

### åˆ†å²è·¯ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ¡ˆ
```gdscript
# ã‚¿ã‚¤ãƒ«ã®æ¥ç¶šæƒ…å ±
{
  "index": 5,
  "connections": [4, 6, 12],  # 3æ–¹å‘ã«åˆ†å²
  "junction_type": "T-junction"  # åå­—è·¯ãƒ»Tå­—è·¯
}
```

---

## æ‹¡å¼µæ€§è€ƒæ…®

### ä»Šå¾Œè¿½åŠ äºˆå®šã®æ©Ÿèƒ½
1. **ã‚¹ãƒšãƒ«ã‚«ãƒ¼ãƒ‰**
   - åŠ¹æœ: å…¨ä½“/å˜ä½“
   - ã‚¿ã‚¤ãƒŸãƒ³ã‚°: å³æ™‚/æ°¸ç¶š
2. **ã‚¢ã‚¤ãƒ†ãƒ ã‚·ã‚¹ãƒ†ãƒ **
   - è£…å‚™åŠ¹æœ
   - ä½¿ã„æ¨ã¦ã‚¢ã‚¤ãƒ†ãƒ 
3. **ãƒãƒ«ãƒãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼**
   - ã‚ªãƒ³ãƒ©ã‚¤ãƒ³å¯¾æˆ¦
   - ãƒ­ãƒ“ãƒ¼ã‚·ã‚¹ãƒ†ãƒ 
4. **ã‚­ãƒ£ãƒ³ãƒšãƒ¼ãƒ³ãƒ¢ãƒ¼ãƒ‰**
   - ã‚¹ãƒˆãƒ¼ãƒªãƒ¼é€²è¡Œ
   - ãƒœã‚¹æˆ¦
5. **ğŸ†• åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹æ‹¡å¼µ**
   - ã€Œè²«é€šã€ã€Œå·»ç‰©ã€ã‚¹ã‚­ãƒ«ã§ç„¡è¦–
   - å±æ€§é€£é–ã¨ã®ã‚·ãƒŠã‚¸ãƒ¼å¼·åŒ–

### ãƒ—ãƒ©ã‚°ã‚¤ãƒ³è¨­è¨ˆ
```gdscript
# æ‹¡å¼µå¯èƒ½ãªã‚¤ãƒ™ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ 
signal tile_event_triggered(tile_index: int, event_type: String)

func register_tile_event(tile_index: int, event: Callable):
	# ã‚¤ãƒ™ãƒ³ãƒˆãƒãƒ³ãƒ‰ãƒ©ãƒ¼ç™»éŒ²
```

---

## å‰Šé™¤äºˆå®šãƒ»å¤‰æ›´äºˆå®šé …ç›®

### ğŸ—‘ï¸ å‰Šé™¤äºˆå®š
1. **game.tscn** - 2Dç‰ˆã‚·ãƒ¼ãƒ³ï¼ˆä½¿ç”¨ã—ã¦ã„ãªã„ï¼‰
2. **board_system.gd** - 2Dç‰ˆãƒœãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ ï¼ˆå­˜åœ¨ã™ã‚‹å ´åˆï¼‰
3. **å±æ€§ç›¸æ€§ã‚·ã‚¹ãƒ†ãƒ ** - ãƒãƒˆãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‹ã‚‰å‰Šé™¤äºˆå®š

### ğŸ”„ å¤‰æ›´äºˆå®š
1. **ãƒãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ ** - è±å½¢ã‹ã‚‰åˆ†å²è·¯å¯¾å¿œã¸
2. **ãƒ‡ãƒƒã‚­ç®¡ç†** - æ–°ã—ã„ãƒ‡ãƒ¼ã‚¿æ§‹é€ ã¸ç§»è¡Œ
3. **ã‚¿ã‚¤ãƒ«æ¥ç¶š** - connectionsé…åˆ—è¿½åŠ 

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|-----------|---------|
| 2025/01/10 | 1.0 | åˆç‰ˆä½œæˆ |
| 2025/01/10 | 1.1 | 3Då°‚ç”¨è¨­è¨ˆã«ä¿®æ­£ã€åˆ†å²è·¯è¨ˆç”»è¿½åŠ  |
| 2025/01/11 | 1.2 | çµ±ä¸€æ¨ã¦æœ­ã‚·ã‚¹ãƒ†ãƒ è¿½åŠ ã€2Dç‰ˆå‰Šé™¤å®Œäº†ã€ã‚¿ãƒ¼ãƒ³çµ‚äº†å‡¦ç†è§£æ±º |
| 2025/01/11 | 1.3 | ğŸ†• åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‚·ã‚¹ãƒ†ãƒ è¿½åŠ ã€éš£æ¥åœŸåœ°åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ è¿½åŠ  |

---

## ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½

### debug_manual_control_all ãƒ•ãƒ©ã‚°

#### æ¦‚è¦
å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ï¼ˆCPUã‚’å«ã‚€ï¼‰ã‚’æ‰‹å‹•æ“ä½œå¯èƒ½ã«ã™ã‚‹ãƒ‡ãƒãƒƒã‚°ç”¨ãƒ•ãƒ©ã‚°

#### ä»•æ§˜
```gdscript
@export var debug_manual_control_all: bool = false
```

**å‹•ä½œ**:
- `true`: å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’æ‰‹å‹•æ“ä½œï¼ˆCPUã‚‚å«ã‚€ï¼‰
- `false`: `player_is_cpu`é…åˆ—ã«å¾“ã£ã¦å‹•ä½œ

**ç”¨é€”**:
- ãƒ‡ãƒãƒƒã‚°ãƒ»ãƒ†ã‚¹ãƒˆæ™‚ã«å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã‚’æ“ä½œã—ãŸã„å ´åˆ
- ã‚¹ã‚­ãƒ«å‹•ä½œã®æ¤œè¨¼
- ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ã®ãŸã‚ã®å®Ÿæˆ¦ãƒ†ã‚¹ãƒˆ

#### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
GameFlowManager.debug_manual_control_all (ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆå¤‰æ•°)
  â†“ setup_3d_mode()ã§è»¢é€
BoardSystem3D.debug_manual_control_all
  â†“ process_tile_landing()ã§æ¸¡ã™
TileActionProcessor.process_tile_landing(debug_manual_control_all)
  â†“ CPUåˆ¤å®š
is_cpu_turn = player_is_cpu[current_player_index] and not debug_manual_control_all
```

#### å½±éŸ¿ç¯„å›²
| ã‚·ã‚¹ãƒ†ãƒ  | å‹•ä½œ |
|---------|------|
| TileActionProcessor | CPUåˆ¤å®šã«ä½¿ç”¨ |
| CardSelectionUI | ã‚«ãƒ¼ãƒ‰é¸æŠå¯å¦ã®åˆ¤å®š |
| UIManager | æ‰‹æœ­è¡¨ç¤ºåˆ¶å¾¡ï¼ˆç¾åœ¨ã¯å…¨å“¡è¡¨ç¤ºï¼‰ |

---

## ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–

### åˆæœŸåŒ–é †åºã®é‡è¦æ€§

**game_3d.gdã®_ready()å‡¦ç†é †åº**ï¼ˆé‡è¦åº¦ï¼šé«˜ï¼‰

æ­£ã—ã„é †åºã§åˆæœŸåŒ–ã—ãªã„ã¨ã€å‚ç…§ãŒæœªè¨­å®šã®ã¾ã¾ã«ãªã‚Šä¸å…·åˆãŒç™ºç”Ÿã—ã¾ã™ã€‚

#### æ­£ã—ã„åˆæœŸåŒ–é †åº

```gdscript
func _ready():
	# 1. ã‚·ã‚¹ãƒ†ãƒ ä½œæˆï¼ˆçœç•¥ï¼‰
	
	# 2. UIManagerè¨­å®š
	ui_manager.board_system_ref = board_system_3d
	ui_manager.player_system_ref = player_system
	ui_manager.card_system_ref = card_system
	ui_manager.create_ui(self)  # â† CardSelectionUIç­‰ã‚’åˆæœŸåŒ–
	
	# 3. æ‰‹æœ­UIåˆæœŸåŒ–
	var ui_layer = get_node_or_null("UILayer")
	if ui_layer:
		ui_manager.initialize_hand_container(ui_layer)
		ui_manager.connect_card_system_signals()
	
	# 4. ãƒ‡ãƒãƒƒã‚°ãƒ•ãƒ©ã‚°è¨­å®šï¼ˆé‡è¦ï¼setup_systemsã‚ˆã‚Šå‰ï¼‰
	game_flow_manager.debug_manual_control_all = debug_manual_control_all
	
	# 5. GameFlowManagerè¨­å®š
	game_flow_manager.setup_systems(player_system, card_system, board_system_3d, 
									skill_system, ui_manager, battle_system, special_tile_system)
	game_flow_manager.setup_3d_mode(board_system_3d, player_is_cpu)
	
	# 6. CardSelectionUIã¸ã®å‚ç…§å†è¨­å®šï¼ˆé‡è¦ï¼ï¼‰
	if ui_manager.card_selection_ui:
		ui_manager.card_selection_ui.game_flow_manager_ref = game_flow_manager
```

#### ãªãœå‚ç…§å†è¨­å®šãŒå¿…è¦ã‹

**å•é¡Œã®ã‚¿ã‚¤ãƒŸãƒ³ã‚°å›³**:
```
æ™‚åˆ»  ã‚¤ãƒ™ãƒ³ãƒˆ
T1    ui_manager.create_ui()
	  â””â”€ card_selection_ui.initialize()
		 â””â”€ card_selection_ui.game_flow_manager_ref = game_flow_manager_ref
			(ã“ã®æ™‚ç‚¹ã§ui_manager.game_flow_manager_refã¯null)

T2    game_flow_manager.setup_systems(ui_manager)
	  â””â”€ ui_manager.game_flow_manager_ref = self
		 (ã“ã“ã§åˆã‚ã¦ui_managerã«å‚ç…§ãŒè¨­å®šã•ã‚Œã‚‹)

T3    card_selection_uiä½¿ç”¨æ™‚
	  â””â”€ game_flow_manager_ref.debug_manual_control_all
		 (nullã®ã¾ã¾ãªã®ã§ã‚¨ãƒ©ãƒ¼)
```

**è§£æ±ºæ–¹æ³•**:
- setup_systems()ã®å¾Œã«æ˜ç¤ºçš„ã«å†è¨­å®š
- ã¾ãŸã¯ã€debug_manual_control_allã‚’å…ˆã«è¨­å®šã—ã¦ã‹ã‚‰setup_systems()ã‚’å‘¼ã¶

---

## æ‰‹æœ­è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ 

### è¨­è¨ˆæ–¹é‡

#### åŸºæœ¬ä»•æ§˜
- **å¸¸ã«ç¾åœ¨ã®ã‚¿ãƒ¼ãƒ³ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ‰‹æœ­ã®ã¿ã‚’è¡¨ç¤º**
- ã‚¿ãƒ¼ãƒ³åˆ‡ã‚Šæ›¿ãˆæ™‚ã«å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ‰‹æœ­UIã‚’å‰Šé™¤ã—ã¦ã‹ã‚‰å†ç”Ÿæˆ
- å°†æ¥çš„ã«PVPå¯¾å¿œæ™‚ã‚‚åŒã˜ãƒ­ã‚¸ãƒƒã‚¯ã§å‹•ä½œå¯èƒ½

#### æ‰‹æœ­æ›´æ–°ãƒ•ãƒ­ãƒ¼

```gdscript
// CardSystem
emit_signal("hand_updated")  // ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æŒ‡å®šãªã—
  â†“
// UIManager
func _on_hand_updated():
	var current_player = player_system_ref.get_current_player()
	update_hand_display(current_player.id)  // ç¾åœ¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®IDã§æ›´æ–°
  â†“
func update_hand_display(player_id: int):
	// 1. å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ‰‹æœ­ã‚’å‰Šé™¤ï¼ˆé‡è¦ï¼ï¼‰
	for pid in player_card_nodes.keys():
		for card_node in player_card_nodes[pid]:
			card_node.queue_free()
		player_card_nodes[pid].clear()
	
	// 2. ç¾åœ¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®æ‰‹æœ­ã‚’ç”Ÿæˆ
	var hand_data = card_system_ref.get_all_cards_for_player(player_id)
	for card_data in hand_data:
		var card_node = create_card_node(card_data)
		player_card_nodes[player_id].append(card_node)
	
	// 3. æ‰‹æœ­ã‚’é…ç½®
	rearrange_hand(player_id)
```

#### ã‚«ãƒ¼ãƒ‰æ“ä½œã®ä»•æ§˜

| çŠ¶æ…‹ | is_selectable | mouse_filter | ãƒ‰ãƒ©ãƒƒã‚° | é¸æŠ |
|------|---------------|--------------|---------|------|
| é€šå¸¸è¡¨ç¤º | false | STOP | ç„¡åŠ¹ | ç„¡åŠ¹ |
| é¸æŠãƒ¢ãƒ¼ãƒ‰ | true | STOP | ç„¡åŠ¹ | æœ‰åŠ¹ |

**å®Ÿè£…**:
```gdscript
// ui_manager.gd - create_card_node()
card.is_selectable = false  // åˆæœŸçŠ¶æ…‹ã¯é¸æŠä¸å¯

// card_selection_ui.gd - enable_card_selection()
card_node.set_selectable(true, i)  // é¸æŠãƒ¢ãƒ¼ãƒ‰æ™‚ã«æœ‰åŠ¹åŒ–
```

**ãƒ‰ãƒ©ãƒƒã‚°æ©Ÿèƒ½**:
- ç¾åœ¨ã¯å®Œå…¨ã«ç„¡åŠ¹åŒ–ï¼ˆã‚³ãƒ¡ãƒ³ãƒˆã‚¢ã‚¦ãƒˆï¼‰
- å°†æ¥çš„ã«å¿…è¦ãªã‚‰å†å®Ÿè£…

### CardSelectionUIã®ä»•æ§˜

#### player_idå¯¾å¿œ

```gdscript
// ä¿®æ­£å‰ï¼ˆå¸¸ã«player 0å›ºå®šï¼‰
var hand_nodes = ui_manager_ref.player_card_nodes.get(0, [])

// ä¿®æ­£å¾Œï¼ˆcurrent_player.idã‚’ä½¿ç”¨ï¼‰
func enable_card_selection(hand_data: Array, available_magic: int, player_id: int = 0):
	var hand_nodes = ui_manager_ref.player_card_nodes.get(player_id, [])
```

#### ãƒ‡ãƒãƒƒã‚°ãƒ¢ãƒ¼ãƒ‰å¯¾å¿œ

```gdscript
// show_selection()
var allow_manual = (current_player.id == 0) or 
				   (game_flow_manager_ref and game_flow_manager_ref.debug_manual_control_all)

if allow_manual:
	enable_card_selection(hand_data, current_player.magic_power, current_player.id)
	create_pass_button(hand_data.size())
```

---

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|-----------|---------|
| 2025/01/10 | 1.0 | åˆç‰ˆä½œæˆ |
| 2025/01/10 | 1.1 | 3Då°‚ç”¨è¨­è¨ˆã«ä¿®æ­£ã€åˆ†å²è·¯è¨ˆç”»è¿½åŠ  |
| 2025/01/11 | 1.2 | çµ±ä¸€æ¨ã¦æœ­ã‚·ã‚¹ãƒ†ãƒ è¿½åŠ ã€2Dç‰ˆå‰Šé™¤å®Œäº†ã€ã‚¿ãƒ¼ãƒ³çµ‚äº†å‡¦ç†è§£æ±º |
| 2025/01/11 | 1.3 | ğŸ†• åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‚·ã‚¹ãƒ†ãƒ è¿½åŠ ã€éš£æ¥åœŸåœ°åˆ¤å®šã‚·ã‚¹ãƒ†ãƒ è¿½åŠ  |
| 2025/01/12 | 1.4 | ğŸ†• ãƒ‡ãƒãƒƒã‚°æ©Ÿèƒ½è¿½åŠ ã€ã‚·ã‚¹ãƒ†ãƒ åˆæœŸåŒ–é †åºæ˜è¨˜ã€æ‰‹æœ­è¡¨ç¤ºã‚·ã‚¹ãƒ†ãƒ ä»•æ§˜è¿½åŠ  |
| 2025/01/12 | 1.5 | ğŸ†• è²«é€šã‚¹ã‚­ãƒ«å®Ÿè£…ã€åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹è¨ˆç®—ã®ä»•æ§˜æ˜è¨˜ |
| 2025/01/12 | 1.6 | ğŸ†• æ„Ÿå¿œã‚¹ã‚­ãƒ«è¿½åŠ ã€BattleParticipantã‚¯ãƒ©ã‚¹èª¬æ˜è¿½åŠ ã€ã‚¹ã‚­ãƒ«é©ç”¨é †åºæ˜è¨˜ |
| 2025/01/12 | 1.7 | ğŸ“„ ã‚¹ã‚­ãƒ«é–¢é€£ã‚’ skills_design.md ã«åˆ†é›¢ã€design.md ã‚’ç°¡ç•¥åŒ– |

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´1æœˆ12æ—¥ï¼ˆv1.7ï¼‰  
**é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ**: [skills_design.md](skills_design.md) - ã‚¹ã‚­ãƒ«ã‚·ã‚¹ãƒ†ãƒ è©³ç´°ä»•æ§˜
