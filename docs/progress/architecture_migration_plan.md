# ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ç§»è¡Œè¨ˆç”»

**æœ€çµ‚æ›´æ–°**: 2026-02-14
**ç›®çš„**: ç†æƒ³çš„ãªãƒ„ãƒªãƒ¼æ§‹é€ ã¸ã®æ®µéšçš„ç§»è¡Œã‚’è¨ˆç”»ã—ã€ãƒªã‚¹ã‚¯ã‚’æœ€å°åŒ–ã—ãªãŒã‚‰å®Ÿè£…ã™ã‚‹

---

## ğŸ“‹ å…¨ä½“ã‚¹ã‚±ã‚¸ãƒ¥ãƒ¼ãƒ«

```
Phase 0: ãƒ„ãƒªãƒ¼æ§‹é€ å®šç¾© â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ 1æ—¥ [é€²è¡Œä¸­]
Phase 1: SpellSystemManager å°å…¥ â”€â”€â”€ 2æ—¥ [æœªç€æ‰‹]
Phase 2: ã‚·ã‚°ãƒŠãƒ«ãƒªãƒ¬ãƒ¼æ•´å‚™ â”€â”€â”€â”€â”€â”€ 3æ—¥ [æœªç€æ‰‹]
Phase 3: UIManager è²¬å‹™åˆ†é›¢ â”€â”€â”€â”€ 4-5æ—¥ [æœªç€æ‰‹]
Phase 4: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ â”€â”€â”€â”€ 2æ—¥ [æœªç€æ‰‹]

åˆè¨ˆ: 12-13æ—¥
```

---

## Phase 0: ãƒ„ãƒªãƒ¼æ§‹é€ å®šç¾©ï¼ˆ1æ—¥ï¼‰ğŸ”µ é€²è¡Œä¸­

**é–‹å§‹æ—¥**: 2026-02-14
**çµ‚äº†äºˆå®š**: 2026-02-14

### ç›®çš„

- ç†æƒ³çš„ãªãƒ„ãƒªãƒ¼æ§‹é€ ã‚’å®šç¾©
- ç¾åœ¨ã®ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜é–¢ä¿‚ã‚’ãƒãƒƒãƒ—åŒ–
- æ®µéšçš„ç§»è¡Œè¨ˆç”»ã®åŸºç›¤ã‚’ç¢ºç«‹

### ä½œæ¥­å†…å®¹

#### ã‚¿ã‚¹ã‚¯0-1: TREE_STRUCTURE.md ä½œæˆï¼ˆ2-3æ™‚é–“ï¼‰âœ… å®Œäº†

- [x] ç†æƒ³çš„ãªãƒ„ãƒªãƒ¼æ§‹é€ ã®å›³ç¤º
- [x] å„ã‚·ã‚¹ãƒ†ãƒ ã®è²¬å‹™å®šç¾©
- [x] ã‚·ã‚°ãƒŠãƒ«ãƒ•ãƒ­ãƒ¼ã®è¨­è¨ˆåŸå‰‡

**æˆæœç‰©**: `docs/design/TREE_STRUCTURE.md`

---

#### ã‚¿ã‚¹ã‚¯0-2: dependency_map.md ä½œæˆï¼ˆ2-3æ™‚é–“ï¼‰âœ… å®Œäº†

- [x] ç¾åœ¨ã®ä¾å­˜é–¢ä¿‚ã‚’å¯è¦–åŒ–
- [x] å•é¡Œã®ã‚ã‚‹ä¾å­˜ï¼ˆå¾ªç’°ã€æ¨ªæ–­ï¼‰ã‚’ç‰¹å®š
- [x] æ”¹å–„ãƒã‚¤ãƒ³ãƒˆã®ãƒªã‚¹ãƒˆåŒ–

**æˆæœç‰©**: `docs/design/dependency_map.md`

---

#### ã‚¿ã‚¹ã‚¯0-3: architecture_migration_plan.md ä½œæˆï¼ˆ1-2æ™‚é–“ï¼‰ğŸ”µ é€²è¡Œä¸­

- [x] Phase 1-4 ã®è©³ç´°ã‚¿ã‚¹ã‚¯å®šç¾©
- [ ] å„ãƒ•ã‚§ãƒ¼ã‚ºã®æˆåŠŸæŒ‡æ¨™
- [ ] ãƒªã‚¹ã‚¯è©•ä¾¡

**æˆæœç‰©**: `docs/progress/architecture_migration_plan.md`ï¼ˆæœ¬ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼‰

---

### æˆåŠŸæŒ‡æ¨™

- [ ] 3ã¤ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå®Œæˆ
- [ ] ãƒ„ãƒªãƒ¼æ§‹é€ ãŒè¦–è¦šçš„ã«ç†è§£ã§ãã‚‹
- [ ] å•é¡Œã®ã‚ã‚‹ä¾å­˜ãŒ12ç®‡æ‰€ç‰¹å®šã•ã‚Œã¦ã„ã‚‹
- [ ] Phase 1-4 ã®ä½œæ¥­å†…å®¹ãŒæ˜ç¢º

### ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | æ·±åˆ»åº¦ | ç™ºç”Ÿç¢ºç‡ | ç·©å’Œç­– |
|--------|--------|---------|--------|
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãŒå®Ÿè£…ã¨ä¹–é›¢ | ğŸŸ¡ ä¸­ | ä¸­ | å®Ÿè£…æ™‚ã«éšæ™‚æ›´æ–° |
| å•é¡Œã®è¦‹è½ã¨ã— | ğŸŸ¢ ä½ | ä½ | Phase 1 é–‹å§‹å‰ã«å†ç¢ºèª |

---

## Phase 1: SpellSystemManager å°å…¥ï¼ˆ2æ—¥ï¼‰âšª æœªç€æ‰‹

**é–‹å§‹äºˆå®š**: 2026-02-15
**çµ‚äº†äºˆå®š**: 2026-02-17

### ç›®çš„

- ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®éšå±¤åŒ–
- GameFlowManager ã®è²¬å‹™æ˜ç¢ºåŒ–
- 10+å€‹ã®ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®çµ±ä¸€çš„ç®¡ç†

### èƒŒæ™¯

**ç¾çŠ¶ã®å•é¡Œ**:
```gdscript
GameFlowManager
â””â”€â”€ spell_container: SpellSystemContainer (ç›´æ¥ä¿æŒ)
    â”œâ”€â”€ spell_draw
    â”œâ”€â”€ spell_magic
    â”œâ”€â”€ spell_land
    ... (10+å€‹)
```

- SpellContainer ãŒ GameFlowManager ã«ç›´æ¥ã¶ã‚‰ä¸‹ãŒã£ã¦ã„ã‚‹
- éšå±¤ãŒæµ…ãã€è²¬å‹™ãŒä¸æ˜ç¢º
- æ–°ã—ã„ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ è¿½åŠ æ™‚ã« GameFlowManager ã‚’ä¿®æ­£

**ç†æƒ³å½¢**:
```gdscript
GameFlowManager
â””â”€â”€ SpellSystemManager (æ–°è¦)
    â””â”€â”€ SpellSystemContainer
        â”œâ”€â”€ spell_draw
        â”œâ”€â”€ spell_magic
        ... (10+å€‹)
```

---

### ä½œæ¥­å†…å®¹

#### ã‚¿ã‚¹ã‚¯1-1: SpellSystemManager ã‚¯ãƒ©ã‚¹ä½œæˆï¼ˆ4-5æ™‚é–“ï¼‰

**æ–°è¦ãƒ•ã‚¡ã‚¤ãƒ«**: `scripts/game_flow/spell_system_manager.gd`

```gdscript
extends Node
class_name SpellSystemManager

## ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ çµ±æ‹¬ç®¡ç†è€…
## GameFlowManager ã®å­ã¨ã—ã¦é…ç½®ã•ã‚Œã€å…¨ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’ç®¡ç†

# ã‚³ã‚¢ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚³ãƒ³ãƒ†ãƒŠ
var spell_container: SpellSystemContainer = null

# å€‹åˆ¥ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ï¼ˆNodeå‹ï¼‰
var spell_curse_toll: SpellCurseToll = null
var spell_borrow: SpellBorrow = null
var spell_transform: SpellTransform = null
var spell_purify: SpellPurify = null
var spell_synthesis: SpellSynthesis = null

func _ready():
	print("[SpellSystemManager] åˆæœŸåŒ–å®Œäº†")

## ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
func setup(container: SpellSystemContainer) -> void:
	if not container:
		push_error("[SpellSystemManager] SpellSystemContainer ãŒ null ã§ã™")
		return

	spell_container = container

	# Nodeå‹ã®ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚’åˆæœŸåŒ–
	_setup_node_spells()

	print("[SpellSystemManager] setup å®Œäº†")

## Nodeå‹ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–
func _setup_node_spells() -> void:
	# spell_curse_toll ã®åˆæœŸåŒ–ä¾‹ï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ã‹ã‚‰ç§»è¡Œï¼‰
	# spell_curse_toll = SpellCurseToll.new()
	# add_child(spell_curse_toll)
	# spell_curse_toll.name = "SpellCurseToll"
	pass

## ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ã‚¢ã‚¯ã‚»ã‚µï¼ˆå¾Œæ–¹äº’æ›æ€§ï¼‰
func get_spell_draw():
	return spell_container.spell_draw if spell_container else null

func get_spell_magic():
	return spell_container.spell_magic if spell_container else null

# ... ä»–ã®ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã‚‚åŒæ§˜
```

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
- [ ] SpellSystemManager ã‚¯ãƒ©ã‚¹å®šç¾©
- [ ] spell_container å‚ç…§ä¿æŒ
- [ ] setup() ãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…
- [ ] ã‚¢ã‚¯ã‚»ã‚µãƒ¡ã‚½ãƒƒãƒ‰å®Ÿè£…ï¼ˆå¾Œæ–¹äº’æ›æ€§ï¼‰

---

#### ã‚¿ã‚¹ã‚¯1-2: GameSystemManager ã®åˆæœŸåŒ–ã‚’æ›´æ–°ï¼ˆ2-3æ™‚é–“ï¼‰

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `scripts/system_manager/game_system_manager.gd`

**å¤‰æ›´ç®‡æ‰€**: `_setup_spell_systems()` ãƒ¡ã‚½ãƒƒãƒ‰

```gdscript
# ===== å¤‰æ›´å‰ =====
func _setup_spell_systems() -> void:
	var spell_container = SpellSystemContainer.new()
	game_flow_manager.set_spell_container(spell_container)

	# å„ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–...

# ===== å¤‰æ›´å¾Œ =====
func _setup_spell_systems() -> void:
	# SpellSystemManager ã‚’ä½œæˆ
	var spell_system_manager = SpellSystemManager.new()
	spell_system_manager.name = "SpellSystemManager"

	# GameFlowManager ã®å­ã¨ã—ã¦è¿½åŠ 
	game_flow_manager.add_child(spell_system_manager)

	# SpellSystemContainer ã‚’ä½œæˆ
	var spell_container = SpellSystemContainer.new()

	# SpellSystemManager ã«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—
	spell_system_manager.setup(spell_container)

	# GameFlowManager ã«å‚ç…§ã‚’è¨­å®šï¼ˆå¾Œæ–¹äº’æ›æ€§ï¼‰
	game_flow_manager.set_spell_container(spell_container)
	game_flow_manager.spell_system_manager = spell_system_manager

	# å„ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–...ï¼ˆæ—¢å­˜ã‚³ãƒ¼ãƒ‰ç¶­æŒï¼‰
```

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
- [ ] SpellSystemManager ä½œæˆ
- [ ] GameFlowManager ã®å­ã¨ã—ã¦è¿½åŠ 
- [ ] spell_container è¨­å®š
- [ ] æ—¢å­˜ã® set_spell_container() å‘¼ã³å‡ºã—ç¶­æŒï¼ˆäº’æ›æ€§ï¼‰

---

#### ã‚¿ã‚¹ã‚¯1-3: GameFlowManager ã«å‚ç…§è¿½åŠ ï¼ˆ1æ™‚é–“ï¼‰

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `scripts/game_flow_manager.gd`

**å¤‰æ›´ç®‡æ‰€**: ã‚¯ãƒ©ã‚¹å¤‰æ•°å®£è¨€éƒ¨

```gdscript
# ===== è¿½åŠ  =====
# SpellSystemManager ã¸ã®å‚ç…§ï¼ˆPhase 1 ã§è¿½åŠ ï¼‰
var spell_system_manager: SpellSystemManager = null

# æ—¢å­˜ã® spell_container ã¯äº’æ›æ€§ã®ãŸã‚ç¶­æŒ
var spell_container: SpellSystemContainer = null
```

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
- [ ] spell_system_manager å¤‰æ•°è¿½åŠ 
- [ ] æ—¢å­˜ã® spell_container ã¯ç¶­æŒ

---

#### ã‚¿ã‚¹ã‚¯1-4: å‚ç…§è¨­å®šã®æ›´æ–°ï¼ˆ1-2æ™‚é–“ï¼‰

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: å…¨ã‚·ã‚¹ãƒ†ãƒ ã§ `gfm.spell_container` ã‚’å‚ç…§ã—ã¦ã„ã‚‹ç®‡æ‰€

**æ¤œç´¢ã‚³ãƒãƒ³ãƒ‰**:
```bash
grep -r "spell_container\." scripts/
```

**å¤‰æ›´ãƒ‘ã‚¿ãƒ¼ãƒ³**:
```gdscript
# ===== å¤‰æ›´å‰ =====
var spell_draw = game_flow_manager.spell_container.spell_draw

# ===== å¤‰æ›´å¾Œï¼ˆæ¨å¥¨ï¼‰ =====
var spell_draw = game_flow_manager.spell_system_manager.spell_container.spell_draw

# ===== å¤‰æ›´å¾Œï¼ˆäº’æ›æ€§ç¶­æŒï¼‰=====
var spell_draw = game_flow_manager.spell_container.spell_draw  # ãã®ã¾ã¾
```

**æ–¹é‡**: Phase 1 ã§ã¯æ—¢å­˜å‚ç…§ã‚’ç¶­æŒã—ã€å¾Œæ–¹äº’æ›æ€§ã‚’å„ªå…ˆ

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
- [ ] å…¨å‚ç…§ç®‡æ‰€ã‚’ç¢ºèªï¼ˆ20+ç®‡æ‰€ï¼‰
- [ ] å¿…è¦ã«å¿œã˜ã¦æ›´æ–°ï¼ˆPhase 1 ã§ã¯æœ€å°é™ï¼‰

---

#### ã‚¿ã‚¹ã‚¯1-5: ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ï¼ˆ2-3æ™‚é–“ï¼‰

**ãƒ†ã‚¹ãƒˆé …ç›®**:

```
â–¡ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«: GDScript æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãªã—
â–¡ ã‚²ãƒ¼ãƒ èµ·å‹•: MainScene â†’ game_3d åˆæœŸåŒ–
â–¡ ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚º: UIè¡¨ç¤º â†’ ã‚¹ãƒšãƒ«é¸æŠå¯èƒ½
â–¡ ã‚¹ãƒšãƒ«å®Ÿè¡Œ: å„ç¨®ã‚¹ãƒšãƒ«ãŒæ­£å¸¸å‹•ä½œ
  - SpellDraw: ã‚«ãƒ¼ãƒ‰ãƒ‰ãƒ­ãƒ¼
  - SpellMagic: EPæ“ä½œ
  - SpellLand: åœŸåœ°å±æ€§å¤‰æ›´
  - SpellCurse: ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼å‘ªã„
â–¡ ã‚¿ãƒ¼ãƒ³é€²è¡Œ: ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚º â†’ ä»–ãƒ•ã‚§ãƒ¼ã‚ºæ­£å¸¸é·ç§»
â–¡ ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°: push_error() ãªã—
â–¡ 3ã‚¿ãƒ¼ãƒ³ä»¥ä¸Š: è¤‡æ•°ã‚¿ãƒ¼ãƒ³æ­£å¸¸å‹•ä½œ
```

**æ¤œè¨¼ã‚³ãƒãƒ³ãƒ‰**:
```gdscript
# ãƒ‡ãƒãƒƒã‚°ã‚³ãƒ³ã‚½ãƒ¼ãƒ«ã§ç¢ºèª
print(game_flow_manager.spell_system_manager)  # null ã§ãªã„ã“ã¨
print(game_flow_manager.spell_system_manager.spell_container)  # null ã§ãªã„ã“ã¨
print(game_flow_manager.spell_container)  # äº’æ›æ€§ç¢ºèª
```

---

### æˆåŠŸæŒ‡æ¨™

- [ ] SpellSystemManager ã‚¯ãƒ©ã‚¹ä½œæˆå®Œäº†
- [ ] GameSystemManager ã®åˆæœŸåŒ–æ›´æ–°å®Œäº†
- [ ] å…¨ãƒ†ã‚¹ãƒˆé …ç›®ã‚¯ãƒªã‚¢
- [ ] æ—¢å­˜æ©Ÿèƒ½ã«å½±éŸ¿ãªã—ï¼ˆå¾Œæ–¹äº’æ›æ€§ç¶­æŒï¼‰
- [ ] ãƒ„ãƒªãƒ¼æ§‹é€ ãŒ1æ®µéšæ·±ããªã‚‹ï¼ˆGFM â†’ SSM â†’ Containerï¼‰

### ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | æ·±åˆ»åº¦ | ç™ºç”Ÿç¢ºç‡ | ç·©å’Œç­– |
|--------|--------|---------|--------|
| æ—¢å­˜ã‚¹ãƒšãƒ«å‡¦ç†ãŒå‹•ä½œã—ãªããªã‚‹ | ğŸ”´ é«˜ | ä½ | å¾Œæ–¹äº’æ›æ€§ã‚’ç¶­æŒï¼ˆspell_container å‚ç…§ç¶™ç¶šï¼‰ |
| åˆæœŸåŒ–é †åºã®å•é¡Œ | ğŸŸ¡ ä¸­ | ä¸­ | _setup_spell_systems() ã§æ®µéšçš„ã«åˆæœŸåŒ– |
| å‚ç…§ã®æ›´æ–°æ¼ã‚Œ | ğŸŸ¡ ä¸­ | ä¸­ | grep ã§å…¨ç®‡æ‰€æ¤œç´¢ã€ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆä½¿ç”¨ |
| ã‚·ã‚°ãƒŠãƒ«æ¥ç¶šã®é‡è¤‡ | ğŸŸ¢ ä½ | ä½ | is_connected() ãƒã‚§ãƒƒã‚¯ï¼ˆæ—¢å­˜ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ |

### ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»

**Phase 1 å¤±æ•—æ™‚**:
1. SpellSystemManager ã®å‰Šé™¤
2. GameSystemManager ã® _setup_spell_systems() ã‚’å…ƒã«æˆ»ã™
3. GameFlowManager ã® spell_system_manager å¤‰æ•°å‰Šé™¤

**æ‰€è¦æ™‚é–“**: 30åˆ†

---

## Phase 2: ã‚·ã‚°ãƒŠãƒ«ãƒªãƒ¬ãƒ¼æ•´å‚™ï¼ˆ3æ—¥ï¼‰âšª æœªç€æ‰‹

**é–‹å§‹äºˆå®š**: 2026-02-18
**çµ‚äº†äºˆå®š**: 2026-02-21

### ç›®çš„

- å­â†’è¦ªâ†’è¦ªã®è¦ªã®ã‚·ã‚°ãƒŠãƒ«ä¼æ’­ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’ç¢ºç«‹
- æ¨ªæ–­çš„ã‚·ã‚°ãƒŠãƒ«æ¥ç¶šã®å‰Šæ¸›ï¼ˆ12ç®‡æ‰€ â†’ 0ç®‡æ‰€ï¼‰
- ãƒ‡ãƒãƒƒã‚°å®¹æ˜“æ€§ã®å‘ä¸Š

### èƒŒæ™¯

**ç¾çŠ¶ã®å•é¡Œ**ï¼ˆ`dependency_map.md` å‚ç…§ï¼‰:

```
BattleSystem.invasion_completed
â”œâ†’ DominioCommandHandler (ç›´æ¥æ¥ç¶š) âŒ
â”œâ†’ LandActionHelper (ç›´æ¥æ¥ç¶š) âŒ
â””â†’ CPUTurnProcessor (ç›´æ¥æ¥ç¶š) âŒ

TileActionProcessor.invasion_completed
â””â†’ âŒ èª°ã‚‚å—ä¿¡ã—ã¦ã„ãªã„
```

**ç†æƒ³å½¢**:

```
BattleSystem.invasion_completed
â””â†’ TileActionProcessor._on_invasion_completed
    â””â†’ TileActionProcessor.action_completed.emit()
        â””â†’ BoardSystem3D._on_action_completed
            â””â†’ BoardSystem3D.tile_action_completed.emit()
                â””â†’ GameFlowManager._on_tile_action_completed
                    â””â†’ å„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
```

---

### ä½œæ¥­å†…å®¹

#### ã‚¿ã‚¹ã‚¯2-1: BoardSystem3D ã«ãƒªãƒ¬ãƒ¼ã‚·ã‚°ãƒŠãƒ«è¿½åŠ ï¼ˆ2æ™‚é–“ï¼‰

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `scripts/board_system_3d.gd`

**Step 1: ã‚·ã‚°ãƒŠãƒ«å®šç¾©è¿½åŠ **

```gdscript
# ===== è¿½åŠ  =====
signal invasion_completed(success: bool, tile_index: int)
```

**Step 2: æ¥ç¶šãƒ­ã‚¸ãƒƒã‚¯è¿½åŠ ï¼ˆcreate_subsystems å†…ï¼‰**

```gdscript
func create_subsystems():
	# ... æ—¢å­˜ã‚³ãƒ¼ãƒ‰ ...

	# æ—¢å­˜ã®ã‚·ã‚°ãƒŠãƒ«æ¥ç¶š
	if not tile_action_processor.action_completed.is_connected(_on_action_completed):
		tile_action_processor.action_completed.connect(_on_action_completed)

	# ===== æ–°è¦è¿½åŠ  =====
	if not tile_action_processor.invasion_completed.is_connected(_on_tile_invasion_completed):
		tile_action_processor.invasion_completed.connect(_on_tile_invasion_completed)
```

**Step 3: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ **

```gdscript
# ===== æ–°è¦è¿½åŠ  =====
func _on_tile_invasion_completed(success: bool, tile_index: int):
	# ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°
	print("[BoardSystem3D] invasion_completed ãƒªãƒ¬ãƒ¼: success=%s, tile=%d" % [success, tile_index])

	# è¦ªã¸ãƒªãƒ¬ãƒ¼
	invasion_completed.emit(success, tile_index)
```

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
- [ ] invasion_completed ã‚·ã‚°ãƒŠãƒ«å®šç¾©
- [ ] tile_action_processor.invasion_completed æ¥ç¶š
- [ ] _on_tile_invasion_completed ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…

---

#### ã‚¿ã‚¹ã‚¯2-2: GameFlowManager ã§ãƒªãƒ¬ãƒ¼ã‚·ã‚°ãƒŠãƒ«ã‚’å—ä¿¡ï¼ˆ2æ™‚é–“ï¼‰

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**: `scripts/game_flow_manager.gd`

**Step 1: ã‚·ã‚°ãƒŠãƒ«æ¥ç¶šè¿½åŠ ï¼ˆ_ready ã¾ãŸã¯ setup å†…ï¼‰**

```gdscript
func _ready():
	# ... æ—¢å­˜ã‚³ãƒ¼ãƒ‰ ...

	# ===== æ–°è¦è¿½åŠ  =====
	if board_system_3d:
		if not board_system_3d.invasion_completed.is_connected(_on_board_invasion_completed):
			board_system_3d.invasion_completed.connect(_on_board_invasion_completed)
```

**Step 2: ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ **

```gdscript
# ===== æ–°è¦è¿½åŠ  =====
func _on_board_invasion_completed(success: bool, tile_index: int):
	print("[GameFlowManager] invasion_completed å—ä¿¡: success=%s, tile=%d" % [success, tile_index])

	# å¿…è¦ã«å¿œã˜ã¦å‡¦ç†ã‚’å®Ÿè¡Œ
	# ï¼ˆç¾çŠ¶ã§ã¯å„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒ BattleSystem ã‹ã‚‰ç›´æ¥å—ä¿¡ã—ã¦ã„ã‚‹ãŸã‚ã€ã“ã“ã§ã¯ä½•ã‚‚ã—ãªã„ï¼‰
```

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
- [ ] board_system_3d.invasion_completed æ¥ç¶š
- [ ] _on_board_invasion_completed ãƒãƒ³ãƒ‰ãƒ©ãƒ¼å®Ÿè£…

---

#### ã‚¿ã‚¹ã‚¯2-3: å„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã®æ¥ç¶šå…ˆã‚’å¤‰æ›´ï¼ˆ3-4æ™‚é–“ï¼‰

**å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**ï¼ˆ3ãƒ•ã‚¡ã‚¤ãƒ«ï¼‰:
1. `scripts/game_flow/dominio_command_handler.gd`
2. `scripts/game_flow/land_action_helper.gd`
3. `scripts/cpu_ai/cpu_turn_processor.gd`

**å¤‰æ›´ãƒ‘ã‚¿ãƒ¼ãƒ³**:

```gdscript
# ===== å¤‰æ›´å‰ =====
battle_system.invasion_completed.connect(callable, CONNECT_ONE_SHOT)

# ===== å¤‰æ›´å¾Œ =====
# board_system ã¸ã®å‚ç…§ãŒå¿…è¦
var board_system = game_flow_manager.board_system_3d  # ã¾ãŸã¯æ³¨å…¥
board_system.invasion_completed.connect(callable, CONNECT_ONE_SHOT)
```

**æ³¨æ„**: å„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ãŒ board_system ã¸ã®å‚ç…§ã‚’æŒã¤å¿…è¦ãŒã‚ã‚‹

**ãƒã‚§ãƒƒã‚¯ãƒã‚¤ãƒ³ãƒˆ**:
- [ ] DominioCommandHandler: æ¥ç¶šå…ˆå¤‰æ›´
- [ ] LandActionHelper: æ¥ç¶šå…ˆå¤‰æ›´
- [ ] CPUTurnProcessor: æ¥ç¶šå…ˆå¤‰æ›´
- [ ] å„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã« board_system å‚ç…§è¿½åŠ 

---

#### ã‚¿ã‚¹ã‚¯2-4: ä»–ã®ã‚·ã‚°ãƒŠãƒ«ãƒ•ãƒ­ãƒ¼ã‚‚åŒæ§˜ã«å®Ÿè£…ï¼ˆ8-10æ™‚é–“ï¼‰

**å¯¾è±¡ã‚·ã‚°ãƒŠãƒ«**:
1. âœ… invasion_completedï¼ˆä¸Šè¨˜ã§å®Ÿè£…ï¼‰
2. movement_completedï¼ˆMovementController â†’ BoardSystem3Dï¼‰
3. level_up_completedï¼ˆTileDataManager â†’ BoardSystem3Dï¼‰
4. ãã®ä»–2-3å€‹

**å„ã‚·ã‚°ãƒŠãƒ«ã§åŒã˜ãƒ‘ã‚¿ãƒ¼ãƒ³ã‚’é©ç”¨**:
1. BoardSystem3D ã«ãƒªãƒ¬ãƒ¼ã‚·ã‚°ãƒŠãƒ«è¿½åŠ 
2. å­ã‚·ã‚¹ãƒ†ãƒ ã®ã‚·ã‚°ãƒŠãƒ«ã‚’æ¥ç¶š
3. ãƒãƒ³ãƒ‰ãƒ©ãƒ¼ã§ emit
4. GameFlowManager ã§å—ä¿¡ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

---

#### ã‚¿ã‚¹ã‚¯2-5: ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼ï¼ˆ4-6æ™‚é–“ï¼‰

**ãƒ†ã‚¹ãƒˆé …ç›®**:

```
â–¡ ã‚³ãƒ³ãƒ‘ã‚¤ãƒ«: GDScript æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãªã—
â–¡ ã‚·ã‚°ãƒŠãƒ«æ¥ç¶š: é‡è¤‡æ¥ç¶šã‚¨ãƒ©ãƒ¼ãªã—
â–¡ æˆ¦é—˜å®Ÿè¡Œ: invasion_completed ãƒªãƒ¬ãƒ¼å‹•ä½œç¢ºèª
  - BattleSystem â†’ TileActionProcessor â†’ BoardSystem3D â†’ GameFlowManager
â–¡ ç§»å‹•å‡¦ç†: movement_completed ãƒªãƒ¬ãƒ¼å‹•ä½œç¢ºèª
â–¡ ãƒ¬ãƒ™ãƒ«ã‚¢ãƒƒãƒ—: level_up_completed ãƒªãƒ¬ãƒ¼å‹•ä½œç¢ºèª
â–¡ ãƒ‰ãƒŸãƒ‹ã‚ªã‚³ãƒãƒ³ãƒ‰: ä¾µç•¥æˆåŠŸæ™‚ã®å‡¦ç†æ­£å¸¸å‹•ä½œ
â–¡ CPU ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼: CPU vs CPU ã®ãƒãƒˆãƒ«æ­£å¸¸å‹•ä½œ
â–¡ 3ã‚¿ãƒ¼ãƒ³ä»¥ä¸Š: å…¨ãƒ•ã‚§ãƒ¼ã‚ºæ­£å¸¸å‹•ä½œ
â–¡ ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°: ãƒªãƒ¬ãƒ¼ãƒ­ã‚°ãŒé †åºé€šã‚Šå‡ºåŠ›
â–¡ BUG-000: ã‚·ã‚°ãƒŠãƒ«é‡è¤‡æ¥ç¶šãªã—
```

---

### æˆåŠŸæŒ‡æ¨™

- [ ] æ¨ªæ–­çš„ã‚·ã‚°ãƒŠãƒ«æ¥ç¶š: 12ç®‡æ‰€ â†’ 0ç®‡æ‰€
- [ ] ã‚·ã‚°ãƒŠãƒ«ãƒ•ãƒ­ãƒ¼ãŒä¸€æœ¬ã®è¦ªå­ãƒã‚§ãƒ¼ãƒ³ã«çµ±ä¸€
- [ ] å…¨ãƒ†ã‚¹ãƒˆé …ç›®ã‚¯ãƒªã‚¢
- [ ] `docs/implementation/signal_catalog.md` æ›´æ–°å®Œäº†

### ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | æ·±åˆ»åº¦ | ç™ºç”Ÿç¢ºç‡ | ç·©å’Œç­– |
|--------|--------|---------|--------|
| æ—¢å­˜ã‚·ã‚°ãƒŠãƒ«æ¥ç¶šã®ç ´æ | ğŸ”´ é«˜ | ä¸­ | æ®µéšçš„å®Ÿè£…ã€å„ã‚¹ãƒ†ãƒƒãƒ—å¾Œã«ãƒ†ã‚¹ãƒˆ |
| ã‚·ã‚°ãƒŠãƒ«å®Ÿè¡Œé †åºã®å¤‰åŒ– | ğŸŸ¡ ä¸­ | ä¸­ | ãƒ‡ãƒãƒƒã‚°ãƒ­ã‚°ã§é †åºç¢ºèª |
| BUG-000 å†ç™ºï¼ˆé‡è¤‡æ¥ç¶šï¼‰| ğŸŸ¡ ä¸­ | ä½ | is_connected() å¿…é ˆé©ç”¨ |
| å‚ç…§ã®è¿½åŠ æ¼ã‚Œ | ğŸŸ¡ ä¸­ | ä¸­ | ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆä½¿ç”¨ |

---

## Phase 3: UIManager è²¬å‹™åˆ†é›¢ï¼ˆ4-5æ—¥ï¼‰âšª æœªç€æ‰‹

**é–‹å§‹äºˆå®š**: 2026-02-22
**çµ‚äº†äºˆå®š**: 2026-02-27

### ç›®çš„

- UIManager ã‚’300-400è¡Œã«å‰Šæ¸›
- å„UIé ˜åŸŸãŒç‹¬ç«‹ã—ã¦å‹•ä½œ
- UIå¤‰æ›´æ™‚ã®å½±éŸ¿ç¯„å›²é™å®š

### èƒŒæ™¯

**ç¾çŠ¶ã®å•é¡Œ**:
- UIManager: 1,069è¡Œã€93ãƒ¡ã‚½ãƒƒãƒ‰
- å…¨UIè¦ç´ ãŒ1ãƒ•ã‚¡ã‚¤ãƒ«ã«é›†ç´„
- æ–°UIè¿½åŠ æ™‚ã« UIManager ã‚’ä¿®æ­£å¿…é ˆ

**ç†æƒ³å½¢**:
```
UIManager (300è¡Œ)
â”œâ”€â”€ HandUIController (200è¡Œ)
â”œâ”€â”€ BattleUIController (300è¡Œ)
â””â”€â”€ DominioUIController (200è¡Œ)
```

---

### ä½œæ¥­å†…å®¹ï¼ˆæ¦‚è¦ï¼‰

#### ã‚¿ã‚¹ã‚¯3-1: HandUIController æŠ½å‡ºï¼ˆ1-1.5æ—¥ï¼‰
#### ã‚¿ã‚¹ã‚¯3-2: BattleUIController æŠ½å‡ºï¼ˆ1-1.5æ—¥ï¼‰
#### ã‚¿ã‚¹ã‚¯3-3: DominioUIController æŠ½å‡ºï¼ˆ1-1.5æ—¥ï¼‰
#### ã‚¿ã‚¹ã‚¯3-4: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ1æ—¥ï¼‰

**è©³ç´°ã¯ Phase 2 å®Œäº†å¾Œã«ç­–å®š**

---

### æˆåŠŸæŒ‡æ¨™

- [ ] UIManager: 1,069è¡Œ â†’ 300è¡Œï¼ˆ72%å‰Šæ¸›ï¼‰
- [ ] UI Controller 3å€‹ä½œæˆå®Œäº†
- [ ] å…¨UIæ©Ÿèƒ½æ­£å¸¸å‹•ä½œ
- [ ] æ–°UIè¿½åŠ æ™‚ã« UIManager ä¿®æ­£ä¸è¦

### ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | æ·±åˆ»åº¦ | ç™ºç”Ÿç¢ºç‡ | ç·©å’Œç­– |
|--------|--------|---------|--------|
| UIè¡¨ç¤ºã®ç ´æ | ğŸ”´ é«˜ | é«˜ | æ®µéšçš„å®Ÿè£…ã€å„UIé ˜åŸŸã”ã¨ã«ãƒ†ã‚¹ãƒˆ |
| å‚ç…§ã®æ›´æ–°æ¼ã‚Œ | ğŸ”´ é«˜ | ä¸­ | å…¨å‚ç…§ç®‡æ‰€ã‚’ grep ã§æ¤œç´¢ |
| UIçŠ¶æ…‹ç®¡ç†ã®è¤‡é›‘åŒ– | ğŸŸ¡ ä¸­ | ä¸­ | Controlleré–“ã®é€šä¿¡ã‚’ UIManager çµŒç”±ã«é™å®š |

---

## Phase 4: ãƒ†ã‚¹ãƒˆãƒ»ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆï¼ˆ2æ—¥ï¼‰âšª æœªç€æ‰‹

**é–‹å§‹äºˆå®š**: 2026-02-28
**çµ‚äº†äºˆå®š**: 2026-03-02

### ç›®çš„

- çµ±åˆãƒ†ã‚¹ãƒˆã®å®Ÿæ–½
- ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã®æœ€çµ‚æ›´æ–°
- æˆæœã®æ¸¬å®š

### ä½œæ¥­å†…å®¹

#### ã‚¿ã‚¹ã‚¯4-1: çµ±åˆãƒ†ã‚¹ãƒˆï¼ˆ1æ—¥ï¼‰

**ãƒ†ã‚¹ãƒˆé …ç›®**:
- [ ] å…¨æ©Ÿèƒ½å‹•ä½œç¢ºèªï¼ˆ10+ã‚·ãƒ¼ãƒ³ï¼‰
- [ ] ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆï¼ˆFPSã€ãƒ¡ãƒ¢ãƒªï¼‰
- [ ] CPU vs CPU é•·æ™‚é–“ãƒ†ã‚¹ãƒˆï¼ˆ30ã‚¿ãƒ¼ãƒ³ä»¥ä¸Šï¼‰
- [ ] ã‚¨ãƒ©ãƒ¼ãƒ­ã‚°ç¢ºèªï¼ˆpush_error ãªã—ï¼‰

---

#### ã‚¿ã‚¹ã‚¯4-2: ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆ1æ—¥ï¼‰

**æ›´æ–°å¯¾è±¡**:
- [ ] `CLAUDE.md` - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦æ›´æ–°
- [ ] `docs/design/TREE_STRUCTURE.md` - æœ€çµ‚æ§‹é€ åæ˜ 
- [ ] `docs/design/dependency_map.md` - æ”¹å–„å¾Œã®çŠ¶æ…‹è¨˜éŒ²
- [ ] `docs/progress/refactoring_next_steps.md` - Phase 1-3 å®Œäº†è¨˜éŒ²
- [ ] `docs/implementation/signal_catalog.md` - ã‚·ã‚°ãƒŠãƒ«ä¸€è¦§æ›´æ–°

---

#### ã‚¿ã‚¹ã‚¯4-3: ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ¸¬å®šï¼ˆ2-3æ™‚é–“ï¼‰

**æ¸¬å®šé …ç›®**:

| ãƒ¡ãƒˆãƒªã‚¯ã‚¹ | Before | After | æ”¹å–„ç‡ |
|-----------|--------|-------|--------|
| æ¨ªæ–­çš„ã‚·ã‚°ãƒŠãƒ«æ¥ç¶š | 12ç®‡æ‰€ | 0ç®‡æ‰€ | 100% |
| é€†å‚ç…§ï¼ˆå­â†’è¦ªï¼‰ | 5ç®‡æ‰€ | 0ç®‡æ‰€ | 100% |
| æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«è¡Œæ•° | 1,764è¡Œ | 400è¡Œ | 77% |
| ç¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ•° | 3å€‹ | 0å€‹ | 100% |

---

### æˆåŠŸæŒ‡æ¨™

- [ ] å…¨ãƒ†ã‚¹ãƒˆé …ç›®ã‚¯ãƒªã‚¢
- [ ] å…¨ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°å®Œäº†
- [ ] ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ”¹å–„ç‡ã‚’è¨˜éŒ²
- [ ] Phase 0-4 ã®æˆæœã‚’ `daily_log.md` ã«è¨˜éŒ²

---

## ğŸ¯ å…¨ä½“ã®æˆåŠŸæŒ‡æ¨™

### å®šé‡çš„æŒ‡æ¨™

- [ ] æ¨ªæ–­çš„ã‚·ã‚°ãƒŠãƒ«æ¥ç¶š: 12ç®‡æ‰€ â†’ 0ç®‡æ‰€ï¼ˆ100%å‰Šæ¸›ï¼‰
- [ ] é€†å‚ç…§: 5ç®‡æ‰€ â†’ 0ç®‡æ‰€ï¼ˆ100%å‰Šæ¸›ï¼‰
- [ ] æœ€å¤§ãƒ•ã‚¡ã‚¤ãƒ«è¡Œæ•°: 1,764è¡Œ â†’ 400è¡Œï¼ˆ77%å‰Šæ¸›ï¼‰
- [ ] ç¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆæ•°: 3å€‹ â†’ 0å€‹ï¼ˆ100%å‰Šæ¸›ï¼‰
- [ ] ãƒ„ãƒªãƒ¼éšå±¤: 2éšå±¤ â†’ 3-4éšå±¤ï¼ˆæ˜ç¢ºåŒ–ï¼‰

### å®šæ€§çš„æŒ‡æ¨™

- [ ] æ–°ã‚·ã‚¹ãƒ†ãƒ è¿½åŠ æ™‚ã«ã€Œã©ã“ã«é…ç½®ã™ã¹ãã‹ã€ãŒè‡ªæ˜
- [ ] ã‚·ã‚°ãƒŠãƒ«ãƒ•ãƒ­ãƒ¼ãŒä¸€æœ¬ã®è¦ªå­ãƒã‚§ãƒ¼ãƒ³ã§è¡¨ç¾å¯èƒ½
- [ ] å­ã‚·ã‚¹ãƒ†ãƒ ãŒè¦ªã®ãƒ¢ãƒƒã‚¯ã ã‘ã§ãƒ†ã‚¹ãƒˆå¯èƒ½
- [ ] ãƒ„ãƒªãƒ¼å›³ã‚’è¦‹ã‚Œã°å…¨ä½“åƒãŒç†è§£ã§ãã‚‹
- [ ] ãƒ‡ãƒãƒƒã‚°æ™‚é–“ãŒ50%å‰Šæ¸›

---

## ğŸš¨ ãƒªã‚¹ã‚¯ç®¡ç†

### å…¨ä½“ãƒªã‚¹ã‚¯

| ãƒªã‚¹ã‚¯ | æ·±åˆ»åº¦ | ç™ºç”Ÿç¢ºç‡ | ç·©å’Œç­– |
|--------|--------|---------|--------|
| å·¥æ•°è¶…éï¼ˆ12æ—¥ â†’ 15æ—¥ä»¥ä¸Šï¼‰| ğŸŸ¡ ä¸­ | ä¸­ | Phase 3 ã‚’å¾Œå›ã—ã«ã™ã‚‹é¸æŠè‚¢ |
| æ—¢å­˜æ©Ÿèƒ½ã®ç ´æ | ğŸ”´ é«˜ | ä¸­ | æ®µéšçš„å®Ÿè£…ã€å„Phaseå¾Œã«ãƒ†ã‚¹ãƒˆ |
| ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ä½ä¸‹ | ğŸŸ¢ ä½ | ä½ | Phase 4 ã§ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ãƒ†ã‚¹ãƒˆ |
| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°æ¼ã‚Œ | ğŸŸ¡ ä¸­ | ä¸­ | å„Phaseå®Œäº†æ™‚ã«æ›´æ–° |

### ãƒ•ã‚§ã‚¤ãƒ«ã‚»ãƒ¼ãƒ•

**å„Phaseå¤±æ•—æ™‚ã®ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯è¨ˆç”»**:
- Phase 1 å¤±æ•— â†’ SpellSystemManager å‰Šé™¤ï¼ˆ30åˆ†ï¼‰
- Phase 2 å¤±æ•— â†’ ã‚·ã‚°ãƒŠãƒ«æ¥ç¶šã‚’å…ƒã«æˆ»ã™ï¼ˆ2æ™‚é–“ï¼‰
- Phase 3 å¤±æ•— â†’ UI Controller å‰Šé™¤ï¼ˆ1æ™‚é–“ï¼‰

---

## ğŸ“Š é€²æ—ç®¡ç†

### ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

#### Phase 0ï¼ˆ1æ—¥ï¼‰
- [x] TREE_STRUCTURE.md ä½œæˆ
- [x] dependency_map.md ä½œæˆ
- [x] architecture_migration_plan.md ä½œæˆ

#### Phase 1ï¼ˆ2æ—¥ï¼‰
- [ ] SpellSystemManager ã‚¯ãƒ©ã‚¹ä½œæˆ
- [ ] GameSystemManager åˆæœŸåŒ–æ›´æ–°
- [ ] GameFlowManager å‚ç…§è¿½åŠ 
- [ ] å‚ç…§è¨­å®šæ›´æ–°
- [ ] ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼

#### Phase 2ï¼ˆ3æ—¥ï¼‰
- [ ] BoardSystem3D ãƒªãƒ¬ãƒ¼ã‚·ã‚°ãƒŠãƒ«è¿½åŠ 
- [ ] GameFlowManager å—ä¿¡å®Ÿè£…
- [ ] å„ãƒãƒ³ãƒ‰ãƒ©ãƒ¼æ¥ç¶šå…ˆå¤‰æ›´
- [ ] ä»–ã®ã‚·ã‚°ãƒŠãƒ«ãƒ•ãƒ­ãƒ¼ã‚‚å®Ÿè£…
- [ ] ãƒ†ã‚¹ãƒˆãƒ»æ¤œè¨¼

#### Phase 3ï¼ˆ4-5æ—¥ï¼‰
- [ ] HandUIController æŠ½å‡º
- [ ] BattleUIController æŠ½å‡º
- [ ] DominioUIController æŠ½å‡º
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆ

#### Phase 4ï¼ˆ2æ—¥ï¼‰
- [ ] çµ±åˆãƒ†ã‚¹ãƒˆ
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°
- [ ] ãƒ¡ãƒˆãƒªã‚¯ã‚¹æ¸¬å®š

---

## ğŸ”— é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `docs/design/TREE_STRUCTURE.md` - ç†æƒ³çš„ãªãƒ„ãƒªãƒ¼æ§‹é€ 
- `docs/design/dependency_map.md` - ã‚·ã‚¹ãƒ†ãƒ ä¾å­˜é–¢ä¿‚ãƒãƒƒãƒ—
- `docs/progress/signal_cleanup_work.md` - ã‚·ã‚°ãƒŠãƒ«æ”¹å–„è¨ˆç”»ï¼ˆå…ƒè¨ˆç”»ï¼‰
- `docs/progress/refactoring_next_steps.md` - ç›´è¿‘ã®ä½œæ¥­è¨ˆç”»
- `docs/design/god_object_quick_reference.md` - ç¥ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆåˆ†æ

---

**æœ€çµ‚æ›´æ–°**: 2026-02-14
**æ¬¡ã®ã‚¢ã‚¯ã‚·ãƒ§ãƒ³**: Phase 0 å®Œäº†ç¢ºèª â†’ Phase 1 é–‹å§‹æº–å‚™
