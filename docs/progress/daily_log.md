# ğŸ“… æ—¥æ¬¡ä½œæ¥­ãƒ­ã‚°

**ç›®çš„**: ãƒãƒ£ãƒƒãƒˆé–“ã®ç¶™ç¶šæ€§ã‚’ä¿ã¤ãŸã‚ã€å„æ—¥ã®ä½œæ¥­å†…å®¹ã‚’ç°¡æ½”ã«è¨˜éŒ²

**ãƒ«ãƒ¼ãƒ«**: 
- å„ä½œæ¥­ã¯1ã€œ3è¡Œã§ç°¡æ½”ã«
- å®Œäº†ã—ãŸã‚¿ã‚¹ã‚¯ã« âœ…
- æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—ã‚’å¿…ãšæ˜è¨˜
- è©³ç´°ã¯è©²å½“ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã«ãƒªãƒ³ã‚¯
- **å‰æ—¥ä»¥å‰ã®ãƒ­ã‚°ã¯å‰Šé™¤ã—ã€ç›´è¿‘ã®ä½œæ¥­ã®ã¿è¨˜éŒ²**
- **âš ï¸ ãƒ­ã‚°æ›´æ–°æ™‚ã¯å¿…ãšæ®‹ã‚Šãƒˆãƒ¼ã‚¯ãƒ³æ•°ã‚’å ±å‘Šã™ã‚‹ã“ã¨**

---

## 2025å¹´11æœˆ25æ—¥

### å®Œäº†ã—ãŸä½œæ¥­

#### 1. é€šè¡Œæ–™å‘ªã„ã‚¹ãƒšãƒ«çµ±åˆ âœ…
- âœ… **spell_curse_toll.gd**: `apply_curse_from_effect()` æ±ç”¨ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
  - å…¨é€šè¡Œæ–™å‘ªã„åŠ¹æœã‚’çµ±ä¸€å‡¦ç†ï¼ˆtoll_share, toll_disable, toll_fixed, toll_multiplier, peace, curse_toll_halfï¼‰
  - caster_id ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿è¿½åŠ ã§ãƒ‰ãƒªãƒ¼ãƒ ãƒˆãƒ¬ã‚¤ãƒ³å¯¾å¿œ
- âœ… **spell_phase_handler.gd**: é€šè¡Œæ–™å‘ªã„6ã‚±ãƒ¼ã‚¹ã‚’1ã‚±ãƒ¼ã‚¹ã«é›†ç´„
  - å€‹åˆ¥å‡¦ç†å‰Šé™¤ â†’ `spell_curse_toll.apply_curse_from_effect()` çµ±ä¸€å‘¼ã³å‡ºã—
- âœ… **ç§˜è¡“å°‚ç”¨ã‚¹ãƒšãƒ«æ–¹å¼ç¢ºå®š**
  - ID 9000-9999: ç§˜è¡“å°‚ç”¨ã‚¹ãƒšãƒ«ï¼ˆ`data/spell_mystic.json`ï¼‰
  - ID 2000-2999: æ—¢å­˜ã‚¹ãƒšãƒ«ï¼ˆç§˜è¡“ã‹ã‚‰ã‚‚å‚ç…§å¯èƒ½ï¼‰

#### 2. ãƒãƒ¼ãƒŠãƒƒã‚¯ãƒ«ç§˜è¡“å®Ÿè£… âœ…
- âœ… **data/spell_mystic.json** ä½œæˆ
  - ID 9001: é€šè¡Œæ–™åŠæ¸›ã®å‘ªã„ï¼ˆcurse_toll_halfï¼‰
  - JSONãƒ•ã‚©ãƒ¼ãƒãƒƒãƒˆ: `{"cards": [...]}`
- âœ… **data/fire_2.json**: ãƒãƒ¼ãƒŠãƒƒã‚¯ãƒ«ï¼ˆID 29ï¼‰ã«ç§˜è¡“è¿½åŠ 
  - spell_id: 9001, cost: 50G, duration: 3ã‚¿ãƒ¼ãƒ³
- âœ… **scripts/card_loader.gd**: spell_mystic.jsonèª­ã¿è¾¼ã¿è¿½åŠ 
- âœ… **scripts/spells/spell_mystic_arts.gd**: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆå–å¾—ä¿®æ­£
  - TargetSelectionHelperã‚’ç›´æ¥å‘¼ã³å‡ºã—
  - target_infoè¾æ›¸å…¨ä½“ã‚’æ­£ã—ãå‡¦ç†
- âœ… **å‹•ä½œç¢ºèª**: æ•µã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é ˜åœ°ã¸ã®é€šè¡Œæ–™åŠæ¸›å‘ªã„ç™ºå‹•æˆåŠŸ

#### 3. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–° âœ…
- âœ… **docs/design/mystic_arts_complete.md**: 9000ç•ªå°æ–¹å¼ã‚’æ­£å¼æ¡ç”¨ã¨ã—ã¦è¨˜è¼‰
  - ãƒ‡ãƒ¼ã‚¿æ§‹é€ ä¾‹ã«ãƒãƒ¼ãƒŠãƒƒã‚¯ãƒ«è¿½åŠ 
  - ç§˜è¡“è¿½åŠ æ‰‹é †ã‚’2ãƒ‘ã‚¿ãƒ¼ãƒ³ã«åˆ†é›¢ï¼ˆæ—¢å­˜ã‚¹ãƒšãƒ«/å°‚ç”¨ã‚¹ãƒšãƒ«ï¼‰
  - å‹•ä½œç¢ºèªæ¸ˆã¿åŠ¹æœã«é€šè¡Œæ–™å‘ªã„è¿½åŠ 

### æŠ€è¡“çš„ãªè©³ç´°

#### é€šè¡Œæ–™å‘ªã„çµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³

**å¤‰æ›´å‰ï¼ˆå€‹åˆ¥å‡¦ç†ï¼‰**:
```gdscript
"toll_share":
	spell_curse_toll.apply_toll_share(...)
"toll_disable":
	spell_curse_toll.apply_toll_disable(...)
"toll_fixed":
	spell_curse_toll.apply_toll_fixed(...)
# ... 6ã‚±ãƒ¼ã‚¹
```

**å¤‰æ›´å¾Œï¼ˆçµ±åˆå‡¦ç†ï¼‰**:
```gdscript
"toll_share", "toll_disable", "toll_fixed", "toll_multiplier", "peace", "curse_toll_half":
	spell_curse_toll.apply_curse_from_effect(effect, tile_index, target_player_id, current_player_id)
```

#### ç§˜è¡“å°‚ç”¨ã‚¹ãƒšãƒ«IDç¯„å›²
- **9000-9999**: ç§˜è¡“å°‚ç”¨ï¼ˆé€šå¸¸ã‚¹ãƒšãƒ«ã¨ã—ã¦ä½¿ç”¨ä¸å¯ï¼‰
- **2000-2999**: æ—¢å­˜ã‚¹ãƒšãƒ«ï¼ˆç§˜è¡“ã‹ã‚‰ã‚‚å‚ç…§å¯èƒ½ï¼‰

### ä¿®æ­£ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«
1. **scripts/spells/spell_curse_toll.gd**
   - `apply_curse_from_effect()` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
   - å…¨é€šè¡Œæ–™å‘ªã„ã‚¿ã‚¤ãƒ—ã«å¯¾å¿œ

2. **scripts/game_flow/spell_phase_handler.gd**
   - é€šè¡Œæ–™å‘ªã„6ã‚±ãƒ¼ã‚¹ã‚’1ã‚±ãƒ¼ã‚¹ã«çµ±åˆ

3. **scripts/spells/spell_mystic_arts.gd**
   - `_has_valid_target()` ä¿®æ­£ï¼ˆTargetSelectionHelperç›´æ¥å‘¼ã³å‡ºã—ï¼‰

4. **scripts/card_loader.gd**
   - spell_mystic.jsonèª­ã¿è¾¼ã¿è¿½åŠ 

5. **data/spell_mystic.json** (æ–°è¦ä½œæˆ)
   - ID 9001: é€šè¡Œæ–™åŠæ¸›ã®å‘ªã„

6. **data/fire_2.json**
   - ãƒãƒ¼ãƒŠãƒƒã‚¯ãƒ«ï¼ˆID 29ï¼‰ã«ç§˜è¡“è¿½åŠ 

7. **docs/design/mystic_arts_complete.md**
   - 9000ç•ªå°æ–¹å¼ã‚’æ­£å¼è¨˜è¼‰

#### 4. ãƒ€ã‚¤ã‚¹ç³»ã‚¹ãƒšãƒ«çµ±åˆ âœ…
- âœ… **scripts/spells/spell_dice.gd**: `apply_effect_from_parsed()` æ±ç”¨ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
  - dice_fixed, dice_range, dice_multi, dice_range_magic ã‚’çµ±ä¸€å‡¦ç†
- âœ… **scripts/game_flow/spell_phase_handler.gd**: ãƒ€ã‚¤ã‚¹ç³»4ã‚±ãƒ¼ã‚¹ã‚’1ã‚±ãƒ¼ã‚¹ã«é›†ç´„
  - å€‹åˆ¥å‡¦ç†å‰Šé™¤ â†’ `spell_dice.apply_effect_from_parsed()` çµ±ä¸€å‘¼ã³å‡ºã—
- âœ… **å‹•ä½œç¢ºèªå¯¾è±¡**: ãƒ›ãƒ¼ãƒªãƒ¼ãƒ¯ãƒ¼ãƒ‰6ã€ãƒ˜ã‚¤ã‚¹ãƒˆã€ãƒ•ãƒ©ã‚¤ã€ãƒãƒ£ãƒ¼ã‚¸ã‚¹ãƒ†ãƒƒãƒ—

#### 5. ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç³»ã‚¹ãƒšãƒ«çµ±åˆ âœ…
- âœ… **scripts/spells/spell_curse_stat.gd**: `apply_curse_from_effect()` æ±ç”¨ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
  - stat_boost, stat_reduce ã‚’çµ±ä¸€å‡¦ç†
- âœ… **scripts/game_flow/spell_phase_handler.gd**: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç³»2ã‚±ãƒ¼ã‚¹ã‚’1ã‚±ãƒ¼ã‚¹ã«é›†ç´„
  - å€‹åˆ¥å‡¦ç†å‰Šé™¤ â†’ `spell_curse_stat.apply_curse_from_effect()` çµ±ä¸€å‘¼ã³å‡ºã—
- âœ… **å‹•ä½œç¢ºèªå¯¾è±¡**: ãƒã‚¤ã‚¿ãƒªãƒ†ã‚£ã€ãƒ‡ã‚£ã‚¸ãƒ¼ã‚º

### çµ±åˆä½œæ¥­å®Œäº†ã¾ã¨ã‚ âœ…

**3ã¤ã®ã‚¹ãƒšãƒ«ç³»çµ±ã‚’çµ±åˆå®Œäº†:**

| ç³»çµ± | çµ±åˆå‰ | çµ±åˆå¾Œ | å‰Šæ¸›ç‡ |
|------|--------|--------|--------|
| é€šè¡Œæ–™å‘ªã„ | 6ã‚±ãƒ¼ã‚¹ | 1ã‚±ãƒ¼ã‚¹ | -83% |
| ãƒ€ã‚¤ã‚¹ | 4ã‚±ãƒ¼ã‚¹ | 1ã‚±ãƒ¼ã‚¹ | -75% |
| ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ | 2ã‚±ãƒ¼ã‚¹ | 1ã‚±ãƒ¼ã‚¹ | -50% |
| **åˆè¨ˆ** | **12ã‚±ãƒ¼ã‚¹** | **3ã‚±ãƒ¼ã‚¹** | **-75%** |

**çµ±åˆãƒ‘ã‚¿ãƒ¼ãƒ³ï¼ˆ3ç³»çµ±å…±é€šï¼‰:**
```gdscript
// å„SpellXxxã‚¯ãƒ©ã‚¹ã«æ±ç”¨ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 
func apply_effect_from_parsed(effect, ...) / apply_curse_from_effect(effect, ...)
  match effect_type:
	"effect_type_1": apply_xxx_1(...)
	"effect_type_2": apply_xxx_2(...)

// spell_phase_handlerã§çµ±åˆå‘¼ã³å‡ºã—
"effect_type_1", "effect_type_2", ...:
  spell_xxx.apply_effect_from_parsed(effect, ...)
```

### ä¿®æ­£ã—ãŸãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆè¿½åŠ ï¼‰
9. **scripts/spells/spell_dice.gd**
   - `apply_effect_from_parsed()` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 

10. **scripts/spells/spell_curse_stat.gd**
	- `apply_curse_from_effect()` ãƒ¡ã‚½ãƒƒãƒ‰è¿½åŠ 

11. **scripts/game_flow/spell_phase_handler.gd** (è¿½åŠ ä¿®æ­£)
	- ãƒ€ã‚¤ã‚¹ç³»4ã‚±ãƒ¼ã‚¹ â†’ 1ã‚±ãƒ¼ã‚¹çµ±åˆ
	- ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç³»2ã‚±ãƒ¼ã‚¹ â†’ 1ã‚±ãƒ¼ã‚¹çµ±åˆ

### æ¬¡ã®ã‚¹ãƒ†ãƒƒãƒ—

#### ğŸ¯ æ¬¡å›ä½œæ¥­å€™è£œ

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³1: æ®‹ã‚Šã®ã‚¹ãƒšãƒ«ç³»çµ±ã‚’çµ±åˆ**
- drawç³»ï¼ˆç¾åœ¨1ã‚±ãƒ¼ã‚¹ã€æ—¢ã«ç°¡æ½”ï¼‰
- damageç³»ï¼ˆç¾åœ¨1ã‚±ãƒ¼ã‚¹ã€æ—¢ã«ç°¡æ½”ï¼‰
- landç³»ï¼ˆç¾åœ¨ã¾ã¨ã‚ã¦å‡¦ç†ã€æ—¢ã«çµ±åˆæ¸ˆã¿ï¼‰

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³2: ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ç§˜è¡“ã®è¿½åŠ å®Ÿè£…**
- ID 124: ã‚¹ã‚­ãƒ¥ãƒ©ï¼ˆæˆ¦é—˜å¾Œã«æ•µã¸é€šè¡Œæ–™ç„¡åŠ¹å‘ªã„ï¼‰
- ãã®ä»–ã®é€šè¡Œæ–™é–¢é€£ç§˜è¡“

**ã‚ªãƒ—ã‚·ãƒ§ãƒ³3: æ–°è¦ã‚·ã‚¹ãƒ†ãƒ é–‹ç™º**
- ãã®ä»–ã®ã‚²ãƒ¼ãƒ ã‚·ã‚¹ãƒ†ãƒ æ”¹å–„

**æ¨å¥¨**: ã‚¹ãƒšãƒ«çµ±åˆä½œæ¥­ã¯å®Œäº†ã€‚æ¬¡ã¯æ–°è¦æ©Ÿèƒ½é–‹ç™ºã¸ã€‚

### å‚è€ƒãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

- `docs/design/mystic_arts_complete.md`: ç§˜è¡“ã‚·ã‚¹ãƒ†ãƒ ï¼ˆ9000ç•ªå°æ–¹å¼æ¡ç”¨ï¼‰
- `docs/design/spells/ãƒ€ã‚¤ã‚¹æ“ä½œ.md`: ãƒ€ã‚¤ã‚¹æ“ä½œã‚¹ãƒšãƒ«è©³ç´°
- `docs/design/spells/ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¢—æ¸›.md`: ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¢—æ¸›å‘ªã„è©³ç´°
- `docs/design/toll_system_implementation_complete.md`: é€šè¡Œæ–™ã‚·ã‚¹ãƒ†ãƒ 
- `docs/design/spells/é€šè¡Œæ–™å‘ªã„.md`: é€šè¡Œæ–™å‘ªã„è©³ç´°
- `docs/design/spells_design.md`: ã‚¹ãƒšãƒ«ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¨­è¨ˆ

**âš ï¸ æ®‹ã‚Šãƒˆãƒ¼ã‚¯ãƒ³æ•°: 86,400 / 190,000**

---
