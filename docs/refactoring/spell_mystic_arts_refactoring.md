# SpellMysticArts ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»

**æ—¥ä»˜**: 2025å¹´5æœˆ  
**ç›®çš„**: SpellPhaseHandler.gdã‹ã‚‰ç§˜è¡“é–¢é€£å‡¦ç†ã‚’åˆ†é›¢ã—ã€SpellMysticArtsã‚¯ãƒ©ã‚¹ã«çµ±åˆ

---

## ğŸ“Š ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å‰å¾Œã®æ¯”è¼ƒ

| é …ç›® | ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å‰ | ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œ |
|------|-------------------|-------------------|
| **SpellPhaseHandlerè¡Œæ•°** | ç´„1,260è¡Œ | ç´„940è¡Œ |
| **å‰Šæ¸›è¡Œæ•°** | - | ç´„320è¡Œ |
| **SpellMysticArtsè¡Œæ•°** | ç´„200è¡Œ | ç´„520è¡Œ |
| **ç§˜è¡“é–¢é€£ãƒ¡ã‚½ãƒƒãƒ‰** | SpellPhaseHandlerã«12å€‹ | SpellMysticArtsã«çµ±åˆ |

---

## ğŸ—ï¸ ç¾åœ¨ã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
scripts/game_flow/
â””â”€â”€ spell_phase_handler.gd (1,260è¡Œ)
    â”œâ”€â”€ ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†
    â”œâ”€â”€ ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç† â† åˆ†é›¢å¯¾è±¡
    â”œâ”€â”€ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠ
    â”œâ”€â”€ åŠ¹æœå®Ÿè¡Œ
    â””â”€â”€ UIç®¡ç†

scripts/spell/
â””â”€â”€ spell_mystic_arts.gd (200è¡Œ)
    â”œâ”€â”€ ç§˜è¡“ãƒ‡ãƒ¼ã‚¿å–å¾—
    â”œâ”€â”€ ç™ºå‹•åˆ¤å®š
    â””â”€â”€ åŠ¹æœé©ç”¨
```

---

## ğŸ¯ ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å¾Œã®ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
scripts/game_flow/
â””â”€â”€ spell_phase_handler.gd (940è¡Œ)
    â”œâ”€â”€ ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†
    â”œâ”€â”€ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠ
    â”œâ”€â”€ åŠ¹æœå®Ÿè¡Œ
    â””â”€â”€ UIç®¡ç†

scripts/spell/
â””â”€â”€ spell_mystic_arts.gd (520è¡Œ)
    â”œâ”€â”€ ç§˜è¡“ãƒ‡ãƒ¼ã‚¿å–å¾—ï¼ˆæ—¢å­˜ï¼‰
    â”œâ”€â”€ ç™ºå‹•åˆ¤å®šï¼ˆæ—¢å­˜ï¼‰
    â”œâ”€â”€ åŠ¹æœé©ç”¨ï¼ˆæ—¢å­˜ï¼‰
    â”œâ”€â”€ ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹ â† ç§»å‹•
    â”œâ”€â”€ ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠUI â† ç§»å‹•
    â”œâ”€â”€ ç§˜è¡“é¸æŠUI â† ç§»å‹•
    â”œâ”€â”€ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠ â† ç§»å‹•
    â”œâ”€â”€ ç§˜è¡“å®Ÿè¡Œ â† ç§»å‹•
    â””â”€â”€ çŠ¶æ…‹ç®¡ç† â† ç§»å‹•
```

---

## ğŸ“¦ ç§»å‹•å¯¾è±¡ãƒ¡ã‚½ãƒƒãƒ‰ä¸€è¦§

### SpellPhaseHandler â†’ SpellMysticArts

| ãƒ¡ã‚½ãƒƒãƒ‰å | è¡Œæ•° | èª¬æ˜ |
|-----------|------|------|
| `start_mystic_arts_phase()` | 25è¡Œ | ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹ |
| `_select_mystic_arts_creature()` | 35è¡Œ | ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠUI |
| `_select_mystic_art()` | 25è¡Œ | ç§˜è¡“é¸æŠUI |
| `_select_mystic_arts_target()` | 60è¡Œ | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠ |
| `_is_async_mystic_art()` | 25è¡Œ | éåŒæœŸåŠ¹æœåˆ¤å®š |
| `_execute_mystic_art()` | 65è¡Œ | ç§˜è¡“å®Ÿè¡Œï¼ˆå˜ä½“ï¼‰ |
| `_execute_mystic_art_all_creatures()` | 60è¡Œ | ç§˜è¡“å®Ÿè¡Œï¼ˆå…¨ä½“ï¼‰ |
| `_clear_mystic_art_selection()` | 3è¡Œ | é¸æŠçŠ¶æ…‹ã‚¯ãƒªã‚¢ |
| `has_available_mystic_arts()` | 4è¡Œ | ç§˜è¡“åˆ©ç”¨å¯èƒ½åˆ¤å®š |
| `has_spell_mystic_arts()` | 2è¡Œ | ã‚·ã‚¹ãƒ†ãƒ å­˜åœ¨åˆ¤å®š |
| `update_mystic_button_visibility()` | 15è¡Œ | ãƒœã‚¿ãƒ³è¡¨ç¤ºæ›´æ–° |
| `_on_mystic_art_used()` | 3è¡Œ | ç§˜è¡“ä½¿ç”¨å¾Œå‡¦ç† |

**åˆè¨ˆ: ç´„320è¡Œ**

### ç§»å‹•å¯¾è±¡å¤‰æ•°

| å¤‰æ•°å | èª¬æ˜ |
|--------|------|
| `selected_mystic_art` | é¸æŠä¸­ã®ç§˜è¡“ |
| `selected_mystic_creature` | é¸æŠä¸­ã®ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ |

---

## âš ï¸ ãƒªã‚¹ã‚¯åˆ†æã¨å¯¾ç­–

### é«˜ãƒªã‚¹ã‚¯: çŠ¶æ…‹ç®¡ç†ã®åŒæœŸ

**å•é¡Œç‚¹:**
- `current_state`ãŒSpellPhaseHandlerã§ç®¡ç†ã•ã‚Œã¦ã„ã‚‹
- ç§˜è¡“å®Ÿè¡Œä¸­ã«`State.SELECTING_TARGET`ã‚„`State.EXECUTING_EFFECT`ã«é·ç§»

**å¯¾ç­–:**
- SpellMysticArtsã¯ã‚·ã‚°ãƒŠãƒ«ã§çŠ¶æ…‹å¤‰æ›´ã‚’é€šçŸ¥
- çŠ¶æ…‹å¤‰æ›´ã®è²¬å‹™ã¯SpellPhaseHandlerã«æ®‹ã™

```gdscript
# SpellMysticArtså´
signal mystic_art_target_selection_started(targets: Array)
signal mystic_art_execution_started()
signal mystic_art_completed(success: bool)

# SpellPhaseHandlerå´
func _on_mystic_target_selection_started(targets):
    available_targets = targets
    current_target_index = 0
    current_state = State.SELECTING_TARGET
```

### ä¸­ãƒªã‚¹ã‚¯: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠUIã®å…±æœ‰

**å•é¡Œç‚¹:**
- ã‚¹ãƒšãƒ«ã¨ç§˜è¡“ã§ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠUIã‚’å…±æœ‰
- `_confirm_target_selection()`ã§ç§˜è¡“/ã‚¹ãƒšãƒ«åˆ†å²ã‚ã‚Š

**å¯¾ç­–:**
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç¢ºå®šæ™‚ã®ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ã‚’ã‚·ã‚°ãƒŠãƒ«ã§åˆ†é›¢
- SpellMysticArtsã¯`target_confirmed`ã‚·ã‚°ãƒŠãƒ«ã‚’å—ã‘å–ã‚‹

### ä½ãƒªã‚¹ã‚¯: UIå‚ç…§

**å•é¡Œç‚¹:**
- `ui_manager`ã¸ã®å‚ç…§ãŒå¿…è¦

**å¯¾ç­–:**
- åˆæœŸåŒ–æ™‚ã«SpellMysticArtsã«ui_managerå‚ç…§ã‚’æ¸¡ã™
- ã¾ãŸã¯ã€UIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã‚·ã‚°ãƒŠãƒ«çµŒç”±ã§SpellPhaseHandlerã«å§”è­²

---

## ğŸ“‹ å®Ÿè£…æ‰‹é †

### Phase 1: æº–å‚™ï¼ˆå¤‰æ›´ãªã—ï¼‰
1. [x] ç¾çŠ¶åˆ†æã¨ãƒªã‚¹ã‚¯è©•ä¾¡
2. [x] ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»æ›¸ä½œæˆ
3. [x] é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆå½±éŸ¿èª¿æŸ»

### Phase 2: SpellMysticArtsäº‹å‰æ•´ç†

åˆ†å‰²å‰ã«SpellMysticArtså†…ã®ä¸è¦ã‚³ãƒ¼ãƒ‰ã‚’æ•´ç†ã—ã€ã‚´ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ¼ãƒ†ãƒ é–¢é€£ã‚’SpellMagicã«ç§»å‹•ã™ã‚‹ã€‚

#### 2-1. å‰Šé™¤å¯¾è±¡ï¼ˆæœªä½¿ç”¨ã‚³ãƒ¼ãƒ‰ï¼‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | è¡Œæ•° | ç†ç”± |
|---------|------|------|
| `_apply_damage()` | 20è¡Œ | matchã‹ã‚‰å¤–ã‚Œã¦ã„ã‚‹ã€SpellDamageã§å‡¦ç† |
| `_apply_curse_attack()` | 20è¡Œ | JSONã§æœªä½¿ç”¨ã€TODOçŠ¶æ…‹ |
| `_apply_steal_magic()` | 28è¡Œ | JSONã§æœªä½¿ç”¨ã€SpellMagicã«åŒç­‰æ©Ÿèƒ½ã‚ã‚Š |
| `_apply_mass_buff()` | 30è¡Œ | JSONã§æœªä½¿ç”¨ |
| `_apply_destroy_deck_top()` | 15è¡Œ | JSONã§æœªä½¿ç”¨ |
| `get_target_creature_info()` | 20è¡Œ | å‘¼ã³å‡ºã—å…ƒãªã— |
| `get_mystic_art_info()` | 15è¡Œ | å‘¼ã³å‡ºã—å…ƒãªã— |

**å‰Šæ¸›: ç´„150è¡Œ**

#### 2-2. SpellMagicã¸ç§»å‹•ï¼ˆã‚´ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ¼ãƒ†ãƒ é–¢é€£ï¼‰

| ãƒ¡ã‚½ãƒƒãƒ‰ | è¡Œæ•° | ç§»å‹•å…ˆ |
|---------|------|--------|
| `_apply_gain_magic()` | 20è¡Œ | SpellMagicï¼ˆæ—¢å­˜add_magicã§ä»£æ›¿å¯èƒ½ã€ãƒ©ãƒƒãƒ‘ãƒ¼ä¸è¦ï¼‰ |
| `_apply_self_destroy()` | 25è¡Œ | SpellMagic.apply_self_destroy() |
| `_get_spell_magic()` | 5è¡Œ | ç§»å‹•å¾Œã¯ä¸è¦ |

**ç§»å‹•: ç´„50è¡Œ**

#### 2-3. matchæ–‡ã®æ•´ç†

å‰Šé™¤å¾Œã€`_apply_single_effect()`ã®matchæ–‡ã‹ã‚‰ä»¥ä¸‹ã‚’å‰Šé™¤:
- `"destroy_deck_top":`
- `"curse_attack":`
- `"steal_magic":`
- `"mass_buff":`
- `"self_destroy":` â†’ SpellMagicçµŒç”±ã«å¤‰æ›´
- `"gain_magic":` â†’ SpellMagicçµŒç”±ã«å¤‰æ›´

#### 2-4. ä½œæ¥­ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

- [x] ä¸è¦ãƒ¡ã‚½ãƒƒãƒ‰7å€‹ã‚’å‰Šé™¤
- [x] `_apply_self_destroy()`ã‚’SpellMagicã«å§”è­²ï¼ˆæ—¢ã«SpellMagicã«å­˜åœ¨ï¼‰
- [x] SpellMysticArtsã®matchæ–‡ã‚’æ•´ç†
- [ ] ã‚´ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ¼ãƒ†ãƒ ã®å‹•ä½œç¢ºèªï¼ˆæ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼‰
- [ ] ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ï¼ˆé­”åŠ›å¢—æ¸›.mdï¼‰

#### 2-5. äº‹å‰æ•´ç†ã®çµæœ

**æ•´ç†å‰**: 496è¡Œ  
**æ•´ç†å¾Œ**: 318è¡Œ  
**å‰Šæ¸›**: 178è¡Œï¼ˆç´„36%å‰Šæ¸›ï¼‰

**å‰Šé™¤ã—ãŸãƒ¡ã‚½ãƒƒãƒ‰:**
- `_apply_destroy_deck_top()` - JSONã§æœªä½¿ç”¨
- `_apply_damage()` - matchã‹ã‚‰å¤–ã‚Œã¦ã„ãŸ
- `_apply_curse_attack()` - TODOçŠ¶æ…‹ã€æœªä½¿ç”¨
- `_apply_steal_magic()` - JSONã§æœªä½¿ç”¨
- `_apply_mass_buff()` - JSONã§æœªä½¿ç”¨
- `get_mystic_art_info()` - å‘¼ã³å‡ºã—å…ƒãªã—
- `get_target_creature_info()` - å‘¼ã³å‡ºã—å…ƒãªã—
- `_apply_gain_magic_via_spell_magic()` - spell_idå‚ç…§æ–¹å¼ã«å¤‰æ›´
- `_apply_self_destroy_via_spell_magic()` - spell_idå‚ç…§æ–¹å¼ã«å¤‰æ›´
- `_get_spell_magic()` - ä¸Šè¨˜2ã¤ã®å‰Šé™¤ã«ä¼´ã„ä¸è¦

**å¤‰æ›´ã—ãŸJSON:**
- `data/neutral_1.json` - ã‚´ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ¼ãƒ†ãƒ ã®ç§˜è¡“ã‚’spell_idå‚ç…§æ–¹å¼ã«å¤‰æ›´
- `data/spell_mystic.json` - ID:9015ã€Œé»„é‡‘çŒ®èº«ã€ã‚’è¿½åŠ 

**å¤‰æ›´ã—ãŸã‚³ãƒ¼ãƒ‰:**
- `SpellPhaseHandler._apply_single_effect()` - `self_destroy`åŠ¹æœã®å‡¦ç†ã‚’è¿½åŠ 
- `SpellMysticArts._apply_single_effect()` - matchæ–‡ã‚’å‰Šé™¤ã€å…¨ã¦SpellPhaseHandlerã«å§”è­²

### Phase 3: ã‚·ã‚°ãƒŠãƒ«è¿½åŠ  âœ…
1. [x] SpellMysticArtsã«ã‚·ã‚°ãƒŠãƒ«å®šç¾©ã‚’è¿½åŠ 
2. [x] SpellPhaseHandlerã§ã‚·ã‚°ãƒŠãƒ«æ¥ç¶š

### Phase 4: ãƒ¡ã‚½ãƒƒãƒ‰ç§»å‹•ï¼ˆSpellPhaseHandler â†’ SpellMysticArtsï¼‰âœ…
1. [x] å¤‰æ•°ã‚’ç§»å‹•ï¼ˆselected_mystic_art, selected_mystic_creatureï¼‰
2. [x] UIç³»ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç§»å‹•ï¼ˆ_select_creature, _select_mystic_art_from_creatureï¼‰
3. [x] ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç§»å‹•ï¼ˆ_select_targetï¼‰
4. [x] å®Ÿè¡Œç³»ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç§»å‹•ï¼ˆexecute_mystic_art, _execute_all_creaturesï¼‰
5. [x] ãƒ˜ãƒ«ãƒ‘ãƒ¼ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ç§»å‹•ï¼ˆ_is_async_mystic_artï¼‰

### Phase 5: SpellPhaseHandlerå´ã®ä¿®æ­£ âœ…
1. [x] ç§˜è¡“é–¢é€£ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å§”è­²å‘¼ã³å‡ºã—ã«å¤‰æ›´ï¼ˆstart_mystic_arts_phaseï¼‰
2. [x] ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒ©è¿½åŠ ï¼ˆ_on_mystic_phase_completedç­‰ï¼‰
3. [x] `_confirm_target_selection()`ã®ç§˜è¡“åˆ†å²ã‚’ä¿®æ­£ï¼ˆspell_mystic_arts.is_active()ï¼‰
4. [x] ä¸è¦å¤‰æ•°å‰Šé™¤ï¼ˆselected_mystic_art, selected_mystic_creatureï¼‰
5. [x] ä¸è¦ãƒ¡ã‚½ãƒƒãƒ‰å‰Šé™¤ï¼ˆ_clear_mystic_art_selection, æ—§ç§˜è¡“ãƒ¡ã‚½ãƒƒãƒ‰ç¾¤ï¼‰

### Phase 6: ãƒ†ã‚¹ãƒˆã¨æ¤œè¨¼ âœ…

**è‡ªå‹•ãƒ†ã‚¹ãƒˆï¼ˆGodotèµ·å‹•ç¢ºèªï¼‰:**
- [x] æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãªã—
- [x] ã‚´ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ¼ãƒ†ãƒ ç§˜è¡“å‹•ä½œç¢ºèªï¼ˆG200ç²å¾— + è‡ªå£Šï¼‰

**æ‰‹å‹•ãƒ†ã‚¹ãƒˆï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰:**
è©³ç´°ã¯ã€ŒğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»ã€ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã‚’å‚ç…§ã€‚

### æœ€çµ‚çµæœ

| ãƒ•ã‚¡ã‚¤ãƒ« | å¤‰æ›´å‰ | å¤‰æ›´å¾Œ | å¤‰åŒ– |
|---------|--------|--------|------|
| SpellMysticArts | 496è¡Œ | 672è¡Œ | +176è¡Œ |
| SpellPhaseHandler | 1,260è¡Œ | 979è¡Œ | **-281è¡Œ** |
| **åˆè¨ˆ** | 1,756è¡Œ | 1,651è¡Œ | **-105è¡Œ** |

**SpellPhaseHandlerã®å‰Šæ¸›å†…è¨³:**
- ç§˜è¡“é–¢é€£ãƒ¡ã‚½ãƒƒãƒ‰ç§»å‹•: ç´„320è¡Œ
- å¤‰æ•°ãƒ»ãƒ˜ãƒ«ãƒ‘ãƒ¼å‰Šé™¤: ç´„10è¡Œ
- ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒ©è¿½åŠ : +ç´„20è¡Œ
- å·®ã—å¼•ãå‰Šæ¸›: ç´„281è¡Œ

---

## âš ï¸ è©³ç´°ãƒªã‚¹ã‚¯åˆ†æ

### ğŸ”´ é«˜ãƒªã‚¹ã‚¯: çŠ¶æ…‹ç®¡ç†ã®åˆ†æ•£

**å•é¡Œç®‡æ‰€:**
ç§˜è¡“é–¢é€£ã§`current_state`ã‚’å¤‰æ›´ã—ã¦ã„ã‚‹ç®‡æ‰€ãŒ5ç®‡æ‰€ã‚ã‚‹:

| è¡Œ | çŠ¶æ…‹é·ç§» | å‡¦ç†å†…å®¹ |
|----|---------|---------|
| 339 | â†’ SELECTING_TARGET | `_select_mystic_arts_target()`: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠé–‹å§‹ |
| 376 | â†’ EXECUTING_EFFECT | `_execute_mystic_art()`: ç§˜è¡“å®Ÿè¡Œé–‹å§‹ |
| 390 | â†’ WAITING_FOR_INPUT | `_execute_mystic_art()`: ç™ºå‹•æ¡ä»¶ä¸æˆç«‹æ™‚ |
| 445 | â†’ EXECUTING_EFFECT | `_execute_mystic_art_all_creatures()`: å…¨ä½“ç§˜è¡“å®Ÿè¡Œ |
| 459 | â†’ WAITING_FOR_INPUT | `_execute_mystic_art_all_creatures()`: ç™ºå‹•æ¡ä»¶ä¸æˆç«‹æ™‚ |

**ãƒªã‚¹ã‚¯:**
- åˆ†å‰²å¾Œã€SpellMysticArtsã¨SpellPhaseHandleré–“ã§çŠ¶æ…‹ä¸æ•´åˆãŒç™ºç”Ÿã™ã‚‹å¯èƒ½æ€§
- ç‰¹ã«éåŒæœŸå‡¦ç†ï¼ˆawaitï¼‰ä¸­ã®çŠ¶æ…‹å¤‰æ›´ã‚¿ã‚¤ãƒŸãƒ³ã‚°ãŒãšã‚Œã‚‹å¯èƒ½æ€§

**å¯¾ç­–:**
- çŠ¶æ…‹å¤‰æ›´ã¯SpellPhaseHandlerã«æ®‹ã™
- SpellMysticArtsã¯ã‚·ã‚°ãƒŠãƒ«ã§ã€ŒçŠ¶æ…‹å¤‰æ›´ãŒå¿…è¦ã€ã¨é€šçŸ¥ã™ã‚‹ã®ã¿
- ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒ©ã§å³åº§ã«çŠ¶æ…‹å¤‰æ›´ã‚’å®Ÿè¡Œ

### ğŸ”´ é«˜ãƒªã‚¹ã‚¯: ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠã®å…±æœ‰

**å•é¡Œç®‡æ‰€:**
`_confirm_target_selection()`ï¼ˆ694è¡Œç›®ï¼‰ã§ç§˜è¡“/ã‚¹ãƒšãƒ«ã‚’åˆ†å²:

```gdscript
if not selected_mystic_art.is_empty():
    # ç§˜è¡“å®Ÿè¡Œ
    _execute_mystic_art(selected_mystic_creature, selected_mystic_art, selected_target, player_id)
else:
    # ã‚¹ãƒšãƒ«å®Ÿè¡Œ
    execute_spell_effect(selected_spell_card, selected_target)
```

**ãƒªã‚¹ã‚¯:**
- `selected_mystic_art`å¤‰æ•°ãŒSpellMysticArtsã«ç§»å‹•ã™ã‚‹ã¨ã€ã“ã®åˆ†å²ãŒæ©Ÿèƒ½ã—ãªããªã‚‹
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠUIï¼ˆ`available_targets`, `current_target_index`ï¼‰ã¯SpellPhaseHandlerã«æ®‹ã‚‹å¿…è¦ãŒã‚ã‚‹

**å¯¾ç­–:**
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠUIå¤‰æ•°ã¯SpellPhaseHandlerã«æ®‹ã™
- SpellMysticArtsã¯ã€Œç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºä¸­ã€ãƒ•ãƒ©ã‚°ã‚’æŒã¡ã€SpellPhaseHandlerã‹ã‚‰å‚ç…§
- ã¾ãŸã¯ã€ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç¢ºå®šæ™‚ã«ã‚·ã‚°ãƒŠãƒ«ã§SpellMysticArtsã«é€šçŸ¥

### ğŸŸ¡ ä¸­ãƒªã‚¹ã‚¯: ã‚­ãƒ£ãƒ³ã‚»ãƒ«å‡¦ç†ã®åˆ†å²

**å•é¡Œç®‡æ‰€:**
`_cancel_target_selection()`ï¼ˆ713è¡Œç›®ï¼‰ã§ã‚‚ç§˜è¡“/ã‚¹ãƒšãƒ«åˆ†å²:

```gdscript
if not selected_mystic_art.is_empty():
    _clear_mystic_art_selection()
    current_state = State.WAITING_FOR_INPUT
else:
    cancel_spell()
```

**ãƒªã‚¹ã‚¯:**
- ç§˜è¡“ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã®çŠ¶æ…‹å¾©å¸°å‡¦ç†ãŒä¸å®Œå…¨ã«ãªã‚‹å¯èƒ½æ€§

**å¯¾ç­–:**
- SpellMysticArtsã«`is_mystic_phase_active()`ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ 
- ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã¯SpellMysticArtsã«`on_cancelled()`ã‚’å‘¼ã³å‡ºã—

### ğŸŸ¡ ä¸­ãƒªã‚¹ã‚¯: éåŒæœŸç§˜è¡“ã®å®Œäº†å¾…ã¡

**å•é¡Œç®‡æ‰€:**
`_is_async_mystic_art()`ã§åˆ¤å®šã•ã‚Œã‚‹éåŒæœŸåŠ¹æœ:
- `destroy_and_draw`, `swap_creature`: ã‚«ãƒ¼ãƒ‰é¸æŠUIå¾…ã¡
- `move_self`, `move_steps`: ç§»å‹•å…ˆé¸æŠå¾…ã¡

**ãƒªã‚¹ã‚¯:**
- éåŒæœŸå‡¦ç†ã®å®Œäº†ã‚·ã‚°ãƒŠãƒ«ãŒæ­£ã—ãä¼æ’­ã—ãªã„å¯èƒ½æ€§
- awaitãƒã‚§ãƒ¼ãƒ³ãŒé€”åˆ‡ã‚Œã‚‹å¯èƒ½æ€§

**å¯¾ç­–:**
- éåŒæœŸç§˜è¡“ã®å®Œäº†ã¯æ—¢å­˜ã®`CardSelectionHandler`çµŒç”±
- SpellMysticArtsã¯å®Ÿè¡Œã®ã¿ã€å®Œäº†å¾…ã¡ã¯SpellPhaseHandlerãŒæ‹…å½“

### ğŸŸ¢ ä½ãƒªã‚¹ã‚¯: UIå‚ç…§

**å•é¡Œç®‡æ‰€:**
- `ui_manager.phase_label.text = ...` ã®è¨­å®šç®‡æ‰€ï¼ˆ5ç®‡æ‰€ï¼‰
- `spell_and_mystic_ui` ã®æ“ä½œ

**å¯¾ç­–:**
- UIãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯ã‚·ã‚°ãƒŠãƒ«`ui_message_requested`ã§é€šçŸ¥
- SpellPhaseHandlerã®ã‚·ã‚°ãƒŠãƒ«ãƒãƒ³ãƒ‰ãƒ©ã§å®Ÿéš›ã®UIæ›´æ–°ã‚’å®Ÿè¡Œ

---

## ğŸ§ª ãƒ†ã‚¹ãƒˆè¨ˆç”»

### Phase 2å®Œäº†å¾Œï¼ˆäº‹å‰æ•´ç†ï¼‰

| ãƒ†ã‚¹ãƒˆé …ç›® | ç¢ºèªå†…å®¹ | ç¢ºèªæ–¹æ³• |
|-----------|---------|---------|
| ã‚´ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ¼ãƒ†ãƒ ç§˜è¡“ | G200ç²å¾— + è‡ªå£ŠãŒå‹•ä½œ | ã‚´ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ¼ãƒ†ãƒ ã§ç§˜è¡“ç™ºå‹• |
| ä»–ã®ç§˜è¡“ã«å½±éŸ¿ãªã— | æ—¢å­˜ç§˜è¡“ãŒæ­£å¸¸å‹•ä½œ | ã‚¢ãƒ¢ãƒ³ï¼ˆãƒã‚¤ã‚¿ãƒªãƒ†ã‚£ï¼‰ã§ç¢ºèª |
| Godotèµ·å‹• | æ§‹æ–‡ã‚¨ãƒ©ãƒ¼ãªã— | ã‚¨ãƒ‡ã‚£ã‚¿èµ·å‹•ç¢ºèª |

### Phase 3-5å®Œäº†å¾Œï¼ˆãƒ¡ã‚¤ãƒ³åˆ†å‰²ï¼‰

#### åŸºæœ¬ãƒ•ãƒ­ãƒ¼

| ãƒ†ã‚¹ãƒˆé …ç›® | ç¢ºèªå†…å®¹ | æ‰‹é † |
|-----------|---------|------|
| ç§˜è¡“ãƒœã‚¿ãƒ³è¡¨ç¤º | ç§˜è¡“å¯èƒ½æ™‚ã«[ç§˜è¡“ã‚’ä½¿ã†]è¡¨ç¤º | ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹æ™‚ã«ç¢ºèª |
| ç§˜è¡“ãƒœã‚¿ãƒ³éè¡¨ç¤º | ç§˜è¡“ä¸å¯æ™‚ã«éè¡¨ç¤º | ãƒ€ã‚¦ãƒ³çŠ¶æ…‹/ç§˜è¡“ãªã—ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã®ã¿ã®æ™‚ |
| ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠ | ä¸Šä¸‹ã‚­ãƒ¼ã§é¸æŠå¯èƒ½ | è¤‡æ•°ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãŒã„ã‚‹çŠ¶æ…‹ã§ç¢ºèª |
| ç§˜è¡“é¸æŠ | ç§˜è¡“ãƒªã‚¹ãƒˆã‹ã‚‰é¸æŠå¯èƒ½ | è¤‡æ•°ç§˜è¡“ã‚’æŒã¤ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã§ç¢ºèª |

#### ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠ

| ãƒ†ã‚¹ãƒˆé …ç›® | ç¢ºèªå†…å®¹ | ãƒ†ã‚¹ãƒˆã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼/ç§˜è¡“ |
|-----------|---------|----------------------|
| ã‚»ãƒ«ãƒ•ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ | UIè¡¨ç¤ºãªã—ã§å³ç™ºå‹• | ãƒ•ã‚§ã‚¤ãƒˆï¼ˆãƒ‰ãƒ­ãƒ¼ï¼‰ |
| å˜ä½“ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ | ä¸Šä¸‹ã‚­ãƒ¼ã§é¸æŠã€Enterç¢ºå®š | ã‚¨ãƒ«ãƒ•ã‚¢ãƒ¼ãƒãƒ£ãƒ¼ï¼ˆãƒ€ãƒ¡ãƒ¼ã‚¸ï¼‰ |
| å…¨ä½“ã‚¿ãƒ¼ã‚²ãƒƒãƒˆ | é¸æŠãªã—ã§å…¨å¯¾è±¡ã«é©ç”¨ | ãƒ‡ã‚£ãƒ©ãƒ‹ãƒ¼ï¼ˆæˆ¦é—˜è¡Œå‹•ä¸å¯ï¼‰ |
| ã‚¿ãƒ¼ã‚²ãƒƒãƒˆãªã—æ™‚ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤º | æ•µã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼0ä½“ã§ãƒ€ãƒ¡ãƒ¼ã‚¸ç§˜è¡“ |

#### ã‚­ãƒ£ãƒ³ã‚»ãƒ«å‡¦ç†

| ãƒ†ã‚¹ãƒˆé …ç›® | ç¢ºèªå†…å®¹ | æ‰‹é † |
|-----------|---------|------|
| ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠã‚­ãƒ£ãƒ³ã‚»ãƒ« | Escã§ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºçµ‚äº†ã€ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºã«æˆ»ã‚‹ | EscæŠ¼ä¸‹ |
| ç§˜è¡“é¸æŠã‚­ãƒ£ãƒ³ã‚»ãƒ« | Escã§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠã«æˆ»ã‚‹ | ç§˜è¡“ãƒªã‚¹ãƒˆè¡¨ç¤ºä¸­ã«Esc |
| ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠã‚­ãƒ£ãƒ³ã‚»ãƒ« | Escã§ç§˜è¡“é¸æŠã«æˆ»ã‚‹ | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠä¸­ã«Esc |
| é­”åŠ›ä¸è¶³æ™‚ | ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã€ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºã«æˆ»ã‚‹ | ã‚³ã‚¹ãƒˆä¸è¶³ã§ç™ºå‹•è©¦è¡Œ |

#### ç§˜è¡“å®Ÿè¡Œ

| ãƒ†ã‚¹ãƒˆé …ç›® | ç¢ºèªå†…å®¹ | ãƒ†ã‚¹ãƒˆã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ |
|-----------|---------|------------------|
| é€šå¸¸ç§˜è¡“ | åŠ¹æœé©ç”¨ã€é­”åŠ›æ¶ˆè²»ã€ãƒ€ã‚¦ãƒ³çŠ¶æ…‹ | ã‚¢ãƒ¢ãƒ³ï¼ˆãƒã‚¤ã‚¿ãƒªãƒ†ã‚£ï¼‰ |
| ä¸å±ˆæŒã¡ç§˜è¡“ | åŠ¹æœé©ç”¨å¾Œã‚‚ãƒ€ã‚¦ãƒ³ã—ãªã„ | ãƒãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ‡ãƒ³ |
| éåŒæœŸç§˜è¡“ | ã‚«ãƒ¼ãƒ‰é¸æŠUIè¡¨ç¤ºã€é¸æŠå¾Œå®Œäº† | ã‚¯ãƒ©ã‚¦ãƒ‰ã‚®ã‚ºãƒ¢ï¼ˆdestroy_and_drawï¼‰ |
| spell_idå‚ç…§ | æ­£ã—ã„ã‚¹ãƒšãƒ«åŠ¹æœãŒé©ç”¨ | ãƒãƒ¼ãƒŠãƒƒã‚¯ãƒ«ï¼ˆé€šè¡Œæ–™åŠæ¸›ï¼‰ |
| ç›´æ¥effects | effectsãŒç›´æ¥é©ç”¨ | ãƒ•ã‚§ã‚¤ãƒˆï¼ˆdraw_cardsï¼‰ |

#### æ’ä»–åˆ¶å¾¡

| ãƒ†ã‚¹ãƒˆé …ç›® | ç¢ºèªå†…å®¹ | æ‰‹é † |
|-----------|---------|------|
| ç§˜è¡“å¾Œã‚¹ãƒšãƒ«ä¸å¯ | ç§˜è¡“ä½¿ç”¨å¾Œã€ã‚¹ãƒšãƒ«ã‚«ãƒ¼ãƒ‰ä½¿ç”¨ä¸å¯ | ç§˜è¡“ç™ºå‹•å¾Œã«ã‚¹ãƒšãƒ«é¸æŠè©¦è¡Œ |
| ã‚¹ãƒšãƒ«å¾Œç§˜è¡“ä¸å¯ | ã‚¹ãƒšãƒ«ä½¿ç”¨å¾Œã€ç§˜è¡“ãƒœã‚¿ãƒ³éè¡¨ç¤º | ã‚¹ãƒšãƒ«ç™ºå‹•å¾Œã«ç§˜è¡“ãƒœã‚¿ãƒ³ç¢ºèª |

#### å›å¸°ãƒ†ã‚¹ãƒˆï¼ˆã‚¹ãƒšãƒ«å´ã¸ã®å½±éŸ¿ãªã—ç¢ºèªï¼‰

| ãƒ†ã‚¹ãƒˆé …ç›® | ç¢ºèªå†…å®¹ |
|-----------|---------|
| ã‚¹ãƒšãƒ«ã‚«ãƒ¼ãƒ‰ä½¿ç”¨ | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠâ†’åŠ¹æœé©ç”¨ãŒæ­£å¸¸ |
| ã‚¹ãƒšãƒ«ã‚­ãƒ£ãƒ³ã‚»ãƒ« | Escã§ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã€ã‚³ã‚¹ãƒˆè¿”å´ |
| å…¨ä½“ã‚¹ãƒšãƒ« | å…¨ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼å¯¾è±¡ã‚¹ãƒšãƒ«ãŒæ­£å¸¸ |
| éåŒæœŸã‚¹ãƒšãƒ« | ãƒ‰ãƒ­ãƒ¼ç³»ã‚¹ãƒšãƒ«ã®å®Œäº†å¾…ã¡ãŒæ­£å¸¸ |

### ãƒ†ã‚¹ãƒˆç”¨ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ä¸€è¦§

| ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ | ç§˜è¡“ã‚¿ã‚¤ãƒ— | ãƒ†ã‚¹ãƒˆç›®çš„ |
|-------------|-----------|-----------|
| ã‚¢ãƒ¢ãƒ³ | spell_idå‚ç…§ï¼ˆæ—¢å­˜ã‚¹ãƒšãƒ«ï¼‰ | åŸºæœ¬ãƒ•ãƒ­ãƒ¼ç¢ºèª |
| ãƒãƒ¼ãƒŠãƒƒã‚¯ãƒ« | spell_idå‚ç…§ï¼ˆ9000ç•ªå°ï¼‰ | ç§˜è¡“å°‚ç”¨ã‚¹ãƒšãƒ«ç¢ºèª |
| ãƒ•ã‚§ã‚¤ãƒˆ | ç›´æ¥effectsï¼ˆã‚»ãƒ«ãƒ•ï¼‰ | ã‚»ãƒ«ãƒ•ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç¢ºèª |
| ã‚¨ãƒ«ãƒ•ã‚¢ãƒ¼ãƒãƒ£ãƒ¼ | å˜ä½“ãƒ€ãƒ¡ãƒ¼ã‚¸ | å˜ä½“ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç¢ºèª |
| ã‚¯ãƒ©ã‚¦ãƒ‰ã‚®ã‚ºãƒ¢ | éåŒæœŸï¼ˆdestroy_and_drawï¼‰ | éåŒæœŸç§˜è¡“ç¢ºèª |
| ãƒ¬ãƒ ãƒ¬ãƒ¼ã‚¹ | éåŒæœŸï¼ˆswap_creatureï¼‰ | éåŒæœŸç§˜è¡“ç¢ºèª |
| ãƒãƒ¼ãƒ‰ãƒ¡ã‚¤ãƒ‡ãƒ³ | ä¸å±ˆæŒã¡ | ãƒ€ã‚¦ãƒ³çŠ¶æ…‹ä¾‹å¤–ç¢ºèª |
| ã‚´ãƒ¼ãƒ«ãƒ‰ãƒˆãƒ¼ãƒ†ãƒ  | self_destroy | SpellMagicå§”è­²ç¢ºèª |

---

## ğŸ”„ ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹è¨­è¨ˆ

### SpellMysticArts æ–°è¦ã‚·ã‚°ãƒŠãƒ«

```gdscript
# ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºé–¢é€£
signal mystic_phase_started()
signal mystic_phase_cancelled()
signal mystic_phase_completed()

# ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠé–¢é€£
signal target_selection_requested(targets: Array)
signal target_confirmed(target_data: Dictionary)

# å®Ÿè¡Œé–¢é€£
signal mystic_art_executing(creature: Dictionary, mystic_art: Dictionary)
signal mystic_art_success(mystic_art: Dictionary)
signal mystic_art_failed(reason: String)

# UIé–¢é€£
signal ui_message_requested(message: String)
```

### SpellMysticArts æ–°è¦å…¬é–‹ãƒ¡ã‚½ãƒƒãƒ‰

```gdscript
## ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºã‚’é–‹å§‹
func start_mystic_phase(player_id: int) -> void

## ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç¢ºå®šæ™‚ã«å‘¼ã°ã‚Œã‚‹
func on_target_confirmed(target_data: Dictionary) -> void

## ã‚­ãƒ£ãƒ³ã‚»ãƒ«æ™‚ã«å‘¼ã°ã‚Œã‚‹
func on_cancelled() -> void

## ç§˜è¡“ãƒœã‚¿ãƒ³è¡¨ç¤ºçŠ¶æ…‹ã‚’å–å¾—
func should_show_mystic_button(player_id: int) -> bool
```

---

## ğŸ“ å‚™è€ƒ

- æ—¢å­˜ã®SpellMysticArtsã‚¯ãƒ©ã‚¹ã¯åŠ¹æœé©ç”¨ãƒ­ã‚¸ãƒƒã‚¯ã‚’æŒã£ã¦ã„ã‚‹ãŸã‚ã€ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ã‚’è¿½åŠ ã™ã‚‹å½¢
- SpellPhaseHandlerã¯ã€Œã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºå…¨ä½“ã®çŠ¶æ…‹ç®¡ç†ã€ã«é›†ä¸­
- ç§˜è¡“ã®è©³ç´°ãƒ­ã‚¸ãƒƒã‚¯ã¯SpellMysticArtsã«é›†ç´„

---

## ğŸ“š é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°

ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œäº†æ™‚ã«ä»¥ä¸‹ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ã™ã‚‹å¿…è¦ãŒã‚ã‚‹ã€‚

### 1. docs/design/spells_design.md

**æ›´æ–°ç®‡æ‰€: ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã‚»ã‚¯ã‚·ãƒ§ãƒ³**

å¤‰æ›´å‰:
```
scripts/spells/              # ã‚¹ãƒšãƒ«åŠ¹æœãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
  â”œâ”€â”€ spell_draw.gd         # ãƒ‰ãƒ­ãƒ¼å‡¦ç† âœ…
  â”œâ”€â”€ spell_magic.gd        # é­”åŠ›å¢—æ¸› âœ…
  ...
```

å¤‰æ›´å¾Œ:
```
scripts/spells/              # ã‚¹ãƒšãƒ«åŠ¹æœãƒ¢ã‚¸ãƒ¥ãƒ¼ãƒ«
  â”œâ”€â”€ spell_draw.gd         # ãƒ‰ãƒ­ãƒ¼å‡¦ç† âœ…
  â”œâ”€â”€ spell_magic.gd        # é­”åŠ›å¢—æ¸› âœ…
  â”œâ”€â”€ spell_mystic_arts.gd  # ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ãƒ»å®Ÿè¡Œ âœ… â† è¿½åŠ 
  ...
```

**æ›´æ–°ç®‡æ‰€: ç§˜è¡“ã‚·ã‚¹ãƒ†ãƒ ã‚»ã‚¯ã‚·ãƒ§ãƒ³**

- å®Ÿè£…çŠ¶æ³ã‚’ã€Œâ³ã€ã‹ã‚‰ã€Œâœ… å®Œäº†ã€ã«æ›´æ–°
- å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«ã®èª¬æ˜ã‚’æ›´æ–°

### 2. docs/design/mystic_arts.md

**æ›´æ–°ç®‡æ‰€: é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³**

å¤‰æ›´å‰:
```
scripts/spells/spell_mystic_arts.gd      # ç§˜è¡“å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³
scripts/game_flow/spell_phase_handler.gd # ç§˜è¡“ç™ºå‹•ãƒ•ãƒ­ãƒ¼ã€éåŒæœŸåˆ¤å®š
```

å¤‰æ›´å¾Œ:
```
scripts/spells/spell_mystic_arts.gd      # ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ãƒ»å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³ï¼ˆçµ±åˆå¾Œï¼‰
scripts/game_flow/spell_phase_handler.gd # ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºç®¡ç†ã€ç§˜è¡“ã¸ã®å§”è­²
```

**æ›´æ–°ç®‡æ‰€: ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ - SpellMysticArts**

ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’è¿½åŠ :

| ãƒ¡ã‚½ãƒƒãƒ‰ | èª¬æ˜ |
|---------|------|
| `start_mystic_phase(player_id)` | ç§˜è¡“ãƒ•ã‚§ãƒ¼ã‚ºã‚’é–‹å§‹ |
| `_select_mystic_arts_creature(creatures, player_id)` | ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠUIè¡¨ç¤º |
| `_select_mystic_art(creature, ui)` | ç§˜è¡“é¸æŠUIè¡¨ç¤º |
| `_select_mystic_arts_target(creature, mystic_art, player_id)` | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠ |
| `_is_async_mystic_art(mystic_art)` | éåŒæœŸåŠ¹æœåˆ¤å®š |
| `_execute_mystic_art(creature, mystic_art, target_data, player_id)` | ç§˜è¡“å®Ÿè¡Œï¼ˆå˜ä½“ï¼‰ |
| `_execute_mystic_art_all_creatures(creature, mystic_art, target_info, player_id)` | ç§˜è¡“å®Ÿè¡Œï¼ˆå…¨ä½“ï¼‰ |
| `on_target_confirmed(target_data)` | ã‚¿ãƒ¼ã‚²ãƒƒãƒˆç¢ºå®šã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ |
| `on_cancelled()` | ã‚­ãƒ£ãƒ³ã‚»ãƒ«ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ |

**æ›´æ–°ç®‡æ‰€: ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰ã‚»ã‚¯ã‚·ãƒ§ãƒ³ - SpellPhaseHandler**

ä»¥ä¸‹ã®ãƒ¡ã‚½ãƒƒãƒ‰ã‚’å‰Šé™¤ï¼ˆSpellMysticArtsã«ç§»å‹•ï¼‰:

- `start_mystic_arts_phase()` â†’ `spell_mystic_arts.start_mystic_phase()` ã¸ã®å§”è­²ã«å¤‰æ›´
- `_select_mystic_arts_creature()` â†’ å‰Šé™¤
- `_select_mystic_art()` â†’ å‰Šé™¤
- `_select_mystic_arts_target()` â†’ å‰Šé™¤
- `_is_async_mystic_art()` â†’ å‰Šé™¤
- `_execute_mystic_art()` â†’ å‰Šé™¤
- `_execute_mystic_art_all_creatures()` â†’ å‰Šé™¤

**æ›´æ–°ç®‡æ‰€: å®Ÿè¡Œãƒ•ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³**

```
ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºé–‹å§‹
  â”‚
  â”œâ”€ [ç§˜è¡“ã‚’ä½¿ã†] é¸æŠ
  â”‚   â””â”€ SpellMysticArts.start_mystic_phase() ã«å§”è­² â† æ›´æ–°
  â”‚       â”œâ”€ ç™ºå‹•å¯èƒ½ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã‚’åˆ—æŒ™
  â”‚       â”œâ”€ ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠUIè¡¨ç¤º
  â”‚       â”œâ”€ ç§˜è¡“é¸æŠUIè¡¨ç¤º
  â”‚       â”œâ”€ ã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠï¼ˆã‚·ã‚°ãƒŠãƒ«ã§SpellPhaseHandlerã«é€šçŸ¥ï¼‰
  â”‚       â”œâ”€ ç§˜è¡“ç™ºå‹•ãƒ»åŠ¹æœé©ç”¨
  â”‚       â”œâ”€ é­”åŠ›æ¶ˆè²»
  â”‚       â”œâ”€ ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã‚’ãƒ€ã‚¦ãƒ³çŠ¶æ…‹ã«è¨­å®š
  â”‚       â””â”€ å®Œäº†ã‚·ã‚°ãƒŠãƒ«ç™ºè¡Œ
  â”‚
  â”œâ”€ [ã‚¹ãƒšãƒ«ã‚«ãƒ¼ãƒ‰ä½¿ç”¨] â†’ ç§˜è¡“UIã‚’éè¡¨ç¤º
  â””â”€ [ã‚¹ãƒšãƒ«ã‚’ã—ãªã„] â†’ ã‚¹ãƒšãƒ«ãƒ•ã‚§ãƒ¼ã‚ºçµ‚äº†
```

### 3. docs/design/spells/é­”åŠ›å¢—æ¸›.md

**æ›´æ–°ç®‡æ‰€: å‘¼ã³å‡ºã—ãƒ•ãƒ­ãƒ¼ã‚»ã‚¯ã‚·ãƒ§ãƒ³**

å¤‰æ›´å‰:
```
SpellPhaseHandler._execute_mystic_art()
  â””â†’ SpellMysticArts.apply_mystic_art_effect()
```

å¤‰æ›´å¾Œ:
```
SpellMysticArts.execute_mystic_art()
  â””â†’ SpellMysticArts.apply_mystic_art_effect()
```

### 4. docs/design/spells/æ‰‹æœ­æ“ä½œ.md

**æ›´æ–°ç®‡æ‰€: ç§˜è¡“ãƒ»ã‚¹ã‚­ãƒ«å®Ÿè£…ã‚¿ã‚¹ã‚¯ã‚»ã‚¯ã‚·ãƒ§ãƒ³**

- `spell_phase_handler.card_selection_handler` â†’ å‚ç…§æ–¹æ³•ã®èª¬æ˜ã‚’æ›´æ–°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰
- ç§˜è¡“ã‹ã‚‰ã®å‘¼ã³å‡ºã—ä¾‹ã‚’æ›´æ–°

### 5. æ›´æ–°ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°å®Œäº†å¾Œã«ä»¥ä¸‹ã‚’ç¢ºèª:

**ä¸»è¦ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [ ] `docs/design/spells_design.md` - ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£å›³æ›´æ–°
- [ ] `docs/design/spells_design.md` - ç§˜è¡“ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…çŠ¶æ³æ›´æ–°
- [ ] `docs/design/mystic_arts.md` - é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ã‚»ã‚¯ã‚·ãƒ§ãƒ³æ›´æ–°
- [ ] `docs/design/mystic_arts.md` - ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰è¡¨æ›´æ–°ï¼ˆSpellMysticArtsï¼‰
- [ ] `docs/design/mystic_arts.md` - ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰è¡¨æ›´æ–°ï¼ˆSpellPhaseHandlerï¼‰
- [ ] `docs/design/mystic_arts.md` - å®Ÿè¡Œãƒ•ãƒ­ãƒ¼å›³æ›´æ–°
- [ ] `docs/design/mystic_arts.md` - å¤‰æ›´å±¥æ­´ã«è¿½è¨˜

**å€‹åˆ¥ã‚¹ãƒšãƒ«ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ:**
- [ ] `docs/design/spells/é­”åŠ›å¢—æ¸›.md` - å‘¼ã³å‡ºã—ãƒ•ãƒ­ãƒ¼å›³æ›´æ–°
- [ ] `docs/design/spells/æ‰‹æœ­æ“ä½œ.md` - ç§˜è¡“å®Ÿè£…ã‚¿ã‚¹ã‚¯ã®å‚ç…§æ›´æ–°ï¼ˆå¿…è¦ã«å¿œã˜ã¦ï¼‰

**å½±éŸ¿ãªã—ï¼ˆç¢ºèªã®ã¿ï¼‰:**
- [x] `docs/design/spells/ãƒ€ãƒ¡ãƒ¼ã‚¸æ“ä½œ.md` - é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ã¯ç¾çŠ¶ç¶­æŒã§OK
- [x] `docs/design/spells/ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼æ“ä½œ.md` - é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ã¯ç¾çŠ¶ç¶­æŒã§OK
- [x] `docs/design/spells/ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¢—æ¸›.md` - é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ã¯ç¾çŠ¶ç¶­æŒã§OK
- [x] `docs/design/spells/æˆ¦é—˜åˆ¶é™å‘ªã„.md` - é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«è¡¨ã¯ç¾çŠ¶ç¶­æŒã§OK
- [x] `docs/design/spells/ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼äº¤æ›.md` - ç§˜è¡“ä¸€è¦§è¡¨ã¯å¤‰æ›´ä¸è¦

---

## ğŸ“… å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ |
|------|------|
| 2025/05/29 | åˆç‰ˆä½œæˆã€ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚°è¨ˆç”»ç­–å®š |
| 2025/05/29 | é–¢é€£ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆæ›´æ–°ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ  |
