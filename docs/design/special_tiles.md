# ç‰¹æ®Šã‚¿ã‚¤ãƒ«ä»•æ§˜

**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**æœ€çµ‚æ›´æ–°**: 2025å¹´12æœˆ16æ—¥

---

## æ¦‚è¦

ç‰¹æ®Šã‚¿ã‚¤ãƒ«ã¯ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é…ç½®ä¸å¯ã®ç‰¹åˆ¥ãªãƒã‚¹ã€‚å„ã‚¿ã‚¤ãƒ«ã«å›ºæœ‰ã®åŠ¹æœãŒã‚ã‚‹ã€‚

---

## 1. ã‚«ãƒ¼ãƒ‰è³¼å…¥ã‚¿ã‚¤ãƒ« (card_buy)

### åŸºæœ¬æƒ…å ±
| é …ç›® | å€¤ |
|------|-----|
| tile_type | `card_buy` |
| åœæ­¢å¯ | âœ… |
| ç™ºå‹•ã‚¿ã‚¤ãƒŸãƒ³ã‚° | åœæ­¢æ™‚ |
| è‰² | ç·‘ |

### åŠ¹æœ
1. åœæ­¢ã™ã‚‹ã¨**ã‚¹ãƒšãƒ«ãƒ»ã‚¢ã‚¤ãƒ†ãƒ **ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã§3æšè¡¨ç¤º
2. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯1æšã‚’é¸æŠã—ã¦è³¼å…¥å¯èƒ½ï¼ˆè³¼å…¥ã—ãªã„é¸æŠè‚¢ã‚ã‚Šï¼‰
3. è³¼å…¥ä¾¡æ ¼ = **ã‚«ãƒ¼ãƒ‰ã‚³ã‚¹ãƒˆã®50%ï¼ˆåˆ‡ã‚Šä¸Šã’ï¼‰**
4. è³¼å…¥ã—ãŸã‚«ãƒ¼ãƒ‰ã¯**æ‰‹æœ­**ã«è¿½åŠ 

### å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
åœæ­¢
  â†“
ã‚¹ãƒšãƒ«ãƒ»ã‚¢ã‚¤ãƒ†ãƒ ã‹ã‚‰3æšãƒ©ãƒ³ãƒ€ãƒ é¸å‡ºï¼ˆCardLoaderã‹ã‚‰ï¼‰
  â†“
UI: 3æšè¡¨ç¤º + ã€Œè²·ã‚ãªã„ã€ãƒœã‚¿ãƒ³
  â†“
ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é¸æŠ
  â”œâ”€ ã‚«ãƒ¼ãƒ‰é¸æŠ â†’ ã‚³ã‚¹ãƒˆ50%ï¼ˆåˆ‡ã‚Šä¸Šã’ï¼‰æ”¯æ‰•ã„ â†’ æ‰‹æœ­ã«è¿½åŠ 
  â””â”€ è²·ã‚ãªã„ â†’ ä½•ã‚‚ã—ãªã„
  â†“
å®Œäº†
```

### è¨ˆç®—ä¾‹
- ã‚«ãƒ¼ãƒ‰ã‚³ã‚¹ãƒˆ100 â†’ è³¼å…¥ä¾¡æ ¼50
- ã‚«ãƒ¼ãƒ‰ã‚³ã‚¹ãƒˆ70 â†’ è³¼å…¥ä¾¡æ ¼35
- ã‚«ãƒ¼ãƒ‰ã‚³ã‚¹ãƒˆ15 â†’ è³¼å…¥ä¾¡æ ¼8ï¼ˆåˆ‡ã‚Šä¸Šã’ï¼‰

### æ³¨æ„
- æ‰‹æœ­ä¸Šé™ã«é”ã—ã¦ã„ã¦ã‚‚è³¼å…¥å¯èƒ½
- é­”åŠ›ä¸è¶³ã®ã‚«ãƒ¼ãƒ‰ã‚‚è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆã§é¸æŠä¸å¯ï¼‰

---

## 2. ã‚«ãƒ¼ãƒ‰è­²æ¸¡ã‚¿ã‚¤ãƒ« (card_give)

### åŸºæœ¬æƒ…å ±
| é …ç›® | å€¤ |
|------|-----|
| tile_type | `card_give` |
| åœæ­¢å¯ | âœ… |
| ç™ºå‹•ã‚¿ã‚¤ãƒŸãƒ³ã‚° | åœæ­¢æ™‚ |
| è‰² | é»„ |

### åŠ¹æœ
1. åœæ­¢ã™ã‚‹ã¨**ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼/ã‚¢ã‚¤ãƒ†ãƒ /ã‚¹ãƒšãƒ«**ã®3ç¨®é¡ã‹ã‚‰é¸æŠ
2. é¸æŠã—ãŸç¨®é¡ã®ã‚«ãƒ¼ãƒ‰ã‚’**è‡ªåˆ†ã®å±±æœ­**ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã§1æšå–å¾—
3. å–å¾—ã—ãŸã‚«ãƒ¼ãƒ‰ã¯**æ‰‹æœ­**ã«è¿½åŠ 
4. **ç„¡æ–™**

### å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
åœæ­¢
  â†“
UI: ã€Œã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã€ã€Œã‚¢ã‚¤ãƒ†ãƒ ã€ã€Œã‚¹ãƒšãƒ«ã€ãƒœã‚¿ãƒ³è¡¨ç¤º
  â†“
ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é¸æŠ
  â†“
å±±æœ­ã‹ã‚‰è©²å½“ç¨®é¡ã®ã‚«ãƒ¼ãƒ‰ã‚’æ¤œç´¢
  â”œâ”€ è¦‹ã¤ã‹ã£ãŸ â†’ ãƒ©ãƒ³ãƒ€ãƒ 1æšã‚’æ‰‹æœ­ã«ç§»å‹•
  â””â”€ è¦‹ã¤ã‹ã‚‰ãªã„ â†’ ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸è¡¨ç¤ºï¼ˆè©²å½“ã‚«ãƒ¼ãƒ‰ãªã—ï¼‰
  â†“
å®Œäº†
```

### æ³¨æ„
- å±±æœ­ï¼ˆdeckï¼‰ã‹ã‚‰å–å¾—ã™ã‚‹ãŸã‚ã€å±±æœ­ã«ãªã„ç¨®é¡ã¯å–å¾—ä¸å¯
- å–å¾—ã—ãŸã‚«ãƒ¼ãƒ‰ã¯å±±æœ­ã‹ã‚‰æ¶ˆãˆã‚‹
- å±±æœ­ã«è©²å½“ç¨®é¡ãŒãªã‘ã‚Œã°ã€Œè©²å½“ã‚«ãƒ¼ãƒ‰ãªã—ã€è¡¨ç¤ºã§çµ‚äº†ï¼ˆé¸ã³ç›´ã—ä¸å¯ï¼‰
- å±±æœ­ãŒç©ºã®å ´åˆã¯3ç¨®é¡ã™ã¹ã¦é¸æŠä¸å¯è¡¨ç¤º

---

## 3. é­”æ³•çŸ³ã‚¿ã‚¤ãƒ« (magic_stone)

### åŸºæœ¬æƒ…å ±
| é …ç›® | å€¤ |
|------|-----|
| tile_type | `magic_stone` |
| åœæ­¢å¯ | âœ… |
| ç™ºå‹•ã‚¿ã‚¤ãƒŸãƒ³ã‚° | **é€šéæ™‚ãƒ»åœæ­¢æ™‚** |
| è‰² | ã‚·ã‚¢ãƒ³ |

### æ¦‚å¿µ
é­”æ³•çŸ³ã¯4å±æ€§ï¼ˆç«ãƒ»æ°´ãƒ»åœŸãƒ»é¢¨ï¼‰ã®æ ªå¼ã®ã‚ˆã†ãªã‚¢ã‚¤ãƒ†ãƒ ã€‚ä¾¡å€¤ã¯ç›¤é¢ã®çŠ¶æ³ã«ã‚ˆã‚Šå‹•çš„ã«å¤‰åŒ–ã™ã‚‹ã€‚

### çŸ³ã®ç¨®é¡
| çŸ³ | åˆæœŸä¾¡å€¤ |
|----|---------|
| ç«ã®çŸ³ | 50G |
| æ°´ã®çŸ³ | 50G |
| åœŸã®çŸ³ | 50G |
| é¢¨ã®çŸ³ | 50G |

### ä¾¡å€¤è¨ˆç®—

å…¨ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å…¨ã‚¿ã‚¤ãƒ«ã‚’å‚ç…§ã—ã¦å‹•çš„ã«è¨ˆç®—ã€‚

#### è¨ˆç®—å¼
```
çŸ³ã®ä¾¡å€¤ = åˆæœŸå€¤(50) + åŒå±æ€§ãƒœãƒ¼ãƒŠã‚¹ - ç›¸å…‹å±æ€§ãƒšãƒŠãƒ«ãƒ†ã‚£

åŒå±æ€§ãƒœãƒ¼ãƒŠã‚¹ = (åŒå±æ€§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼æ•° Ã— 10) + (åŒå±æ€§ç·ãƒ¬ãƒ™ãƒ« Ã— 5)
ç›¸å…‹å±æ€§ãƒšãƒŠãƒ«ãƒ†ã‚£ = (ç›¸å…‹å±æ€§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼æ•° Ã— 5) + (ç›¸å…‹å±æ€§ç·ãƒ¬ãƒ™ãƒ« Ã— 2.5)
				   â€»ãƒšãƒŠãƒ«ãƒ†ã‚£ä¿‚æ•°ã¯ãƒœãƒ¼ãƒŠã‚¹ä¿‚æ•°ã®åŠåˆ†
```

#### ç›¸å…‹é–¢ä¿‚
| çŸ³ | åŒå±æ€§ï¼ˆ+ï¼‰ | ç›¸å…‹å±æ€§ï¼ˆ-ï¼‰ |
|----|-----------|--------------|
| ç«ã®çŸ³ | ç« | æ°´ |
| æ°´ã®çŸ³ | æ°´ | ç« |
| åœŸã®çŸ³ | åœŸ | é¢¨ |
| é¢¨ã®çŸ³ | é¢¨ | åœŸ |

#### è¨ˆç®—ä¾‹
ç›¤é¢çŠ¶æ³:
- ç«ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼: 3ä½“ã€ç·ãƒ¬ãƒ™ãƒ«7
- æ°´ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼: 2ä½“ã€ç·ãƒ¬ãƒ™ãƒ«4

**ç«ã®çŸ³ã®ä¾¡å€¤:**
```
= 50 + (3 Ã— 10) + (7 Ã— 5) - (2 Ã— 5) - (4 Ã— 2.5)
= 50 + 30 + 35 - 10 - 10
= 95G
```

**æ°´ã®çŸ³ã®ä¾¡å€¤:**
```
= 50 + (2 Ã— 10) + (4 Ã— 5) - (3 Ã— 5) - (7 Ã— 2.5)
= 50 + 20 + 20 - 15 - 17.5
= 57.5G â†’ 57Gï¼ˆåˆ‡ã‚Šæ¨ã¦ï¼‰
```

### å£²è²·
| æ“ä½œ | ä¾¡æ ¼ |
|------|------|
| è³¼å…¥ | ç¾åœ¨ä¾¡å€¤ |
| å£²å´ | ç¾åœ¨ä¾¡å€¤ |

### æ‰€æŒä¸Šé™
ãªã—ï¼ˆç„¡åˆ¶é™ã«è³¼å…¥å¯èƒ½ï¼‰

### æœ€ä½ä¾¡å€¤
25Gï¼ˆç›¸å…‹ãƒšãƒŠãƒ«ãƒ†ã‚£ã§ä¸‹ãŒã£ã¦ã‚‚25æœªæº€ã«ã¯ãªã‚‰ãªã„ï¼‰

### è³¼å…¥/å£²å´å˜ä½
è¤‡æ•°å€‹ã¾ã¨ã‚ã¦è³¼å…¥/å£²å´å¯èƒ½

### ç·é­”åŠ›ã¸ã®å½±éŸ¿
æ‰€æŒã—ã¦ã„ã‚‹çŸ³ã®**ç¾åœ¨ä¾¡å€¤**ãŒç·é­”åŠ›ã«åŠ ç®—ã•ã‚Œã‚‹

```
ç·é­”åŠ› = æ‰€æŒé­”åŠ› + åœŸåœ°ä¾¡å€¤ + çŸ³ã®ç¾åœ¨ä¾¡å€¤åˆè¨ˆ
```

### å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
é€šé or åœæ­¢ï¼ˆæ¯å›ç™ºå‹•ï¼‰
  â†“
UI: ã‚·ãƒ§ãƒƒãƒ—ç”»é¢è¡¨ç¤º
  â”œâ”€ å„çŸ³ã®ç¾åœ¨ä¾¡å€¤è¡¨ç¤º
  â”œâ”€ æ‰€æŒæ•°è¡¨ç¤º
  â”œâ”€ è³¼å…¥æ•°/å£²å´æ•°é¸æŠUI
  â”œâ”€ ã€Œè³¼å…¥ã€ã€Œå£²å´ã€ã€Œè²·ã‚ãªã„ã€ãƒœã‚¿ãƒ³
  â†“
ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼æ“ä½œï¼ˆè¤‡æ•°å€‹å¯ï¼‰
  â”œâ”€ è³¼å…¥ â†’ å€‹æ•° Ã— ç¾åœ¨ä¾¡å€¤ã‚’æ”¯æ‰•ã„ â†’ çŸ³ã‚’å–å¾—
  â”œâ”€ å£²å´ â†’ çŸ³ã‚’æ‰‹æ”¾ã™ â†’ å€‹æ•° Ã— ç¾åœ¨ä¾¡å€¤ã‚’ç²å¾—
  â””â”€ è²·ã‚ãªã„ â†’ ä½•ã‚‚ã—ãªã„
  â†“
å®Œäº†
```

---

## 4. é­”æ³•ã‚¿ã‚¤ãƒ« (magic)

### åŸºæœ¬æƒ…å ±
| é …ç›® | å€¤ |
|------|-----|
| tile_type | `magic` |
| åœæ­¢å¯ | âœ… |
| ç™ºå‹•ã‚¿ã‚¤ãƒŸãƒ³ã‚° | åœæ­¢æ™‚ |
| è‰² | ãƒ”ãƒ³ã‚¯ |

### åŠ¹æœ
1. åœæ­¢ã™ã‚‹ã¨**å…¨ã‚¹ãƒšãƒ«**ã‹ã‚‰ãƒ©ãƒ³ãƒ€ãƒ ã§3æšè¡¨ç¤º
2. ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã¯1æšã‚’é¸æŠã—ã¦ä½¿ç”¨å¯èƒ½ï¼ˆä½¿ç”¨ã—ãªã„é¸æŠè‚¢ã‚ã‚Šï¼‰
3. ä½¿ç”¨æ™‚ã¯**ã‚«ãƒ¼ãƒ‰ã‚³ã‚¹ãƒˆã‚’æ”¯æ‰•ã†**
4. ä½¿ç”¨å¾Œã®ã‚«ãƒ¼ãƒ‰ã¯æ¶ˆæ»…ï¼ˆæ‰‹æœ­ã«ã¯å…¥ã‚‰ãªã„ï¼‰

### å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
åœæ­¢
  â†“
å…¨ã‚¹ãƒšãƒ«ã‹ã‚‰3æšãƒ©ãƒ³ãƒ€ãƒ é¸å‡ºï¼ˆCardLoaderã‹ã‚‰ï¼‰
  â†“
UI: 3æšè¡¨ç¤º + ã€Œä½¿ã‚ãªã„ã€ãƒœã‚¿ãƒ³
  â†“
ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é¸æŠ
  â”œâ”€ ã‚¹ãƒšãƒ«é¸æŠ â†’ ã‚³ã‚¹ãƒˆæ”¯æ‰•ã„ â†’ é€šå¸¸ã®ã‚¹ãƒšãƒ«ä½¿ç”¨å‡¦ç†
  â”‚    ï¼ˆã‚¿ãƒ¼ã‚²ãƒƒãƒˆé¸æŠç­‰ã€é€šå¸¸ã®ã‚¹ãƒšãƒ«UIã‚’ä½¿ç”¨ï¼‰
  â””â”€ ä½¿ã‚ãªã„ â†’ ä½•ã‚‚ã—ãªã„
  â†“
å®Œäº†
```

### æ³¨æ„
- ã‚¹ãƒšãƒ«ä½¿ç”¨å‡¦ç†ã¯æ—¢å­˜ã®SpellPhaseHandlerç­‰ã‚’æµç”¨
- ã‚¿ãƒ¼ã‚²ãƒƒãƒˆæŒ‡å®šãŒå¿…è¦ãªã‚¹ãƒšãƒ«ã¯é€šå¸¸é€šã‚ŠUIè¡¨ç¤º
- é­”åŠ›ä¸è¶³ã®ã‚¹ãƒšãƒ«ã‚‚è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆã§é¸æŠä¸å¯ï¼‰
- å¯¾è±¡ãŒãªã„ã‚¹ãƒšãƒ«ã‚‚è¡¨ç¤ºã•ã‚Œã‚‹ï¼ˆä½¿ç”¨æ™‚ã«å¯¾è±¡é¸æŠä¸å¯ã§å®Ÿè³ªä½¿ãˆãªã„ï¼‰

---

## 5. ãƒ™ãƒ¼ã‚¹ã‚¿ã‚¤ãƒ« (base)

### åŸºæœ¬æƒ…å ±
| é …ç›® | å€¤ |
|------|-----|
| tile_type | `base` |
| åœæ­¢å¯ | âœ… |
| ç™ºå‹•ã‚¿ã‚¤ãƒŸãƒ³ã‚° | åœæ­¢æ™‚ |
| è‰² | ã‚°ãƒ¬ãƒ¼ |

### åŠ¹æœ
1. åœæ­¢ã™ã‚‹ã¨**ä»»æ„ã®ç©ºãåœ°**ã«ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã‚’é…ç½®å¯èƒ½
2. **æ‰‹æœ­**ã‹ã‚‰ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã‚’é¸æŠ
3. é€šå¸¸ã®**ã‚«ãƒ¼ãƒ‰ã‚³ã‚¹ãƒˆ**ã‚’æ”¯æ‰•ã†
4. é€šå¸¸ã®**é…ç½®åˆ¶é™**ï¼ˆlands_requiredï¼‰ã‚‚é©ç”¨
5. é…ç½®ã—ãªã„é¸æŠè‚¢ã‚ã‚Š

### å‡¦ç†ãƒ•ãƒ­ãƒ¼
```
åœæ­¢
  â†“
UI: æ‰‹æœ­ã‹ã‚‰ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠ
  â”œâ”€ lands_required ã‚’æº€ãŸã•ãªã„ã‚«ãƒ¼ãƒ‰ã¯ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆ
  â”œâ”€ ã‚³ã‚¹ãƒˆãŒè¶³ã‚Šãªã„ã‚«ãƒ¼ãƒ‰ã‚‚ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆ
  â†“
ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼é¸æŠ
  â”œâ”€ ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼é¸æŠ â†’ ç©ºãåœ°é¸æŠUIè¡¨ç¤º
  â”‚    â†“
  â”‚    ç©ºãåœ°ã‚¿ã‚¤ãƒ«é¸æŠ
  â”‚    â†“
  â”‚    ã‚³ã‚¹ãƒˆæ”¯æ‰•ã„ â†’ é…ç½®å®Ÿè¡Œ
  â””â”€ é…ç½®ã—ãªã„ â†’ ä½•ã‚‚ã—ãªã„
  â†“
å®Œäº†
```

### åˆ¶é™ãƒã‚§ãƒƒã‚¯
1. **lands_required**: å¿…è¦å±æ€§åœŸåœ°æ•°ã‚’æº€ãŸã—ã¦ã„ã‚‹ã‹
2. **ã‚«ãƒ¼ãƒ‰ã‚³ã‚¹ãƒˆ**: é­”åŠ›ãŒè¶³ã‚Šã¦ã„ã‚‹ã‹
3. **ç©ºãåœ°**: é…ç½®å¯èƒ½ãªã‚¿ã‚¤ãƒ«ãŒã‚ã‚‹ã‹

### æ³¨æ„
- ç©ºãåœ°ãŒãªã„å ´åˆã¯ã‚¿ã‚¤ãƒ«é¸æŠãŒã§ããªã„ï¼ˆã‚¨ãƒ©ãƒ¼è¡¨ç¤ºãªã—ã€å˜ã«é¸æŠä¸å¯ï¼‰
- neutralï¼ˆç„¡å±æ€§ï¼‰ã‚¿ã‚¤ãƒ«ã‚‚ç©ºãåœ°ã¨ã—ã¦é…ç½®å¯èƒ½

---

## CPUå¯¾å¿œ

- CPUã‚‚ã™ã¹ã¦ã®ç‰¹æ®Šã‚¿ã‚¤ãƒ«ã‚’ä½¿ç”¨ã™ã‚‹
- AIãƒ­ã‚¸ãƒƒã‚¯ã¯å¾Œå›ã—ï¼ˆåˆæœŸå®Ÿè£…ã§ã¯ã€Œã‚¹ã‚­ãƒƒãƒ—ã€å‹•ä½œï¼‰
- å„ã‚¿ã‚¤ãƒ«ã«CPUåˆ¤æ–­ãƒ­ã‚¸ãƒƒã‚¯ã‚’è¿½åŠ äºˆå®š

---

## å®Ÿè£…å„ªå…ˆåº¦

| å„ªå…ˆåº¦ | ã‚¿ã‚¤ãƒ« | ç†ç”± |
|--------|--------|------|
| 1 | card_give | ã‚·ãƒ³ãƒ—ãƒ«ï¼ˆç„¡æ–™ã€å±±æœ­ã‹ã‚‰å–å¾—ã®ã¿ï¼‰ |
| 2 | card_buy | ã‚·ãƒ³ãƒ—ãƒ«ï¼ˆã‚³ã‚¹ãƒˆè¨ˆç®—ã®ã¿è¿½åŠ ï¼‰ |
| 3 | magic | æ—¢å­˜ã‚¹ãƒšãƒ«å‡¦ç†ã‚’æµç”¨å¯èƒ½ |
| 4 | base | æ—¢å­˜é…ç½®å‡¦ç†ã‚’æµç”¨å¯èƒ½ |
| 5 | magic_stone | æ–°è¦ã‚·ã‚¹ãƒ†ãƒ ï¼ˆçŸ³ã®ç®¡ç†ã€ä¾¡å€¤è¨ˆç®—ï¼‰ |

---

## å®Ÿè£…è©³ç´°

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£: ã‚¿ã‚¤ãƒ«ã¸ã®å‡¦ç†å§”è­²

ç‰¹æ®Šã‚¿ã‚¤ãƒ«ã®å‡¦ç†ã¯å„ã‚¿ã‚¤ãƒ«ã‚¯ãƒ©ã‚¹ã«å§”è­²ã™ã‚‹æ–¹å¼ã‚’æ¡ç”¨ã€‚

```
special_tile_system.gd
  â†“ handle_xxx_tile(player_id, tile)
ã‚¿ã‚¤ãƒ«ã‚¯ãƒ©ã‚¹ (xxx_tile.gd)
  â†“ handle_special_action(player_id, context)
UIè¡¨ç¤ºãƒ»å‡¦ç†å®Ÿè¡Œ
  â†“
çµæœã‚’è¿”ã™
```

#### ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆ

ã‚¿ã‚¤ãƒ«ã«æ¸¡ã•ã‚Œã‚‹contextã«ã¯ä»¥ä¸‹ã®ã‚·ã‚¹ãƒ†ãƒ å‚ç…§ãŒå«ã¾ã‚Œã‚‹ï¼š

```gdscript
func _create_tile_context() -> Dictionary:
	return {
		"player_system": player_system,
		"card_system": card_system,
		"ui_manager": ui_manager,
		"game_flow_manager": game_flow_manager,
		"board_system": board_system
	}
```

#### ã‚¿ã‚¤ãƒ«å´ã®å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³

```gdscript
extends BaseTile

var _player_system = null
var _card_system = null
var _ui_manager = null
# ...

func handle_special_action(player_id: int, context: Dictionary) -> Dictionary:
	# ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰ã‚·ã‚¹ãƒ†ãƒ å‚ç…§ã‚’å–å¾—
	_player_system = context.get("player_system")
	_card_system = context.get("card_system")
	_ui_manager = context.get("ui_manager")
	# ...
	
	# CPUã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—
	if _is_cpu_player(player_id):
		return {"success": true, "xxx_done": false}
	
	# ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®å ´åˆã¯UIè¡¨ç¤º
	var result = await _show_xxx_selection(player_id)
	return result
```

### å…±é€šUIè¨­å®šé–¢æ•°

å…¨ã¦ã®ç‰¹æ®Šã‚¿ã‚¤ãƒ«ãƒãƒ³ãƒ‰ãƒ©ã¯ã€å‡¦ç†ã®æœ€å¾Œã«å…±é€šé–¢æ•°`_show_special_tile_landing_ui(player_id)`ã‚’å‘¼ã³å‡ºã™ã€‚

```gdscript
## special_tile_system.gd

func _show_special_tile_landing_ui(player_id: int):
	# ã‚«ãƒ¼ãƒ‰ã‚’ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆï¼ˆå¬å–šä¸å¯ï¼‰
	ui_manager.card_selection_filter = "disabled"
	# æ‰‹æœ­UIè¡¨ç¤º
	ui_manager.show_card_selection_ui(current_player)
	# ãƒ•ã‚§ãƒ¼ã‚ºè¡¨ç¤º
	ui_manager.phase_label.text = "ç‰¹æ®Šã‚¿ã‚¤ãƒ«: å¬å–šä¸å¯ï¼ˆãƒ‘ã‚¹ã¾ãŸã¯é ˜åœ°ã‚³ãƒãƒ³ãƒ‰ã‚’ä½¿ç”¨ï¼‰"
```

### UIå…±é€šä»•æ§˜

ç‰¹æ®Šã‚¿ã‚¤ãƒ«UIã¯çµ±ä¸€ã•ã‚ŒãŸã‚µã‚¤ã‚ºãƒ»ã‚¹ã‚¿ã‚¤ãƒ«ã‚’ä½¿ç”¨ï¼š

| é …ç›® | å€¤ |
|------|-----|
| ãƒ¡ã‚¤ãƒ³ãƒ‘ãƒãƒ« | 1800 x 1050 |
| ã‚«ãƒ¼ãƒ‰ãƒ‘ãƒãƒ« | 500 x 680 |
| ãƒ‘ãƒãƒ«é–“éš” | 80px |
| ä½ç½®èª¿æ•´ | ä¸­å¤®ã‹ã‚‰150pxä¸Š |
| ã‚¿ã‚¤ãƒˆãƒ«ãƒ•ã‚©ãƒ³ãƒˆ | 48ã€œ56 |
| ã‚«ãƒ¼ãƒ‰åãƒ•ã‚©ãƒ³ãƒˆ | 44 |
| èª¬æ˜ãƒ•ã‚©ãƒ³ãƒˆ | 40 |
| ãƒœã‚¿ãƒ³ï¼ˆæ±ºå®šï¼‰ | 300x90ã€œ350x100 |
| ãƒœã‚¿ãƒ³ï¼ˆã‚­ãƒ£ãƒ³ã‚»ãƒ«ï¼‰ | 400x100ã€œ450x110 |

---

## å®Ÿè£…çŠ¶æ³

| ã‚¿ã‚¤ãƒ« | çŠ¶æ…‹ | å‚™è€ƒ |
|--------|------|------|
| magic | âœ… å®Œäº† | ã‚¿ã‚¤ãƒ«å§”è­²ã€SpellPhaseHandleré€£æº |
| card_buy | âœ… å®Œäº† | ã‚¿ã‚¤ãƒ«å§”è­²ã€è³¼å…¥ä¾¡æ ¼50%è¡¨ç¤º |
| card_give | âœ… å®Œäº† | ã‚¿ã‚¤ãƒ«å§”è­²ã€3ã‚¿ã‚¤ãƒ—é¸æŠUI |
| magic_stone | ğŸ”§ æœªå®Ÿè£… | å‹•çš„ä¾¡æ ¼ã‚·ã‚¹ãƒ†ãƒ å¿…è¦ |
| base | ğŸ”§ æœªå®Ÿè£… | ãƒªãƒ¢ãƒ¼ãƒˆé…ç½®ã‚·ã‚¹ãƒ†ãƒ å¿…è¦ |
| checkpoint | âœ… å‹•ä½œä¸­ | LapSystemã§å‡¦ç† |
| warp_stop | âœ… å‹•ä½œä¸­ | special_tile_systemã§å‡¦ç† |

---

## é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

### ã‚¿ã‚¤ãƒ«ã‚¯ãƒ©ã‚¹
- `scripts/tiles/magic_tile.gd` - é­”æ³•ã‚¿ã‚¤ãƒ«å‡¦ç†
- `scripts/tiles/card_buy_tile.gd` - ã‚«ãƒ¼ãƒ‰è³¼å…¥ã‚¿ã‚¤ãƒ«å‡¦ç†
- `scripts/tiles/card_give_tile.gd` - ã‚«ãƒ¼ãƒ‰è­²æ¸¡ã‚¿ã‚¤ãƒ«å‡¦ç†

### UI
- `scripts/ui_components/magic_tile_ui.gd` - é­”æ³•ã‚¿ã‚¤ãƒ«UI
- `scripts/ui_components/card_buy_ui.gd` - ã‚«ãƒ¼ãƒ‰è³¼å…¥ã‚¿ã‚¤ãƒ«UI
- `scripts/ui_components/card_give_ui.gd` - ã‚«ãƒ¼ãƒ‰è­²æ¸¡ã‚¿ã‚¤ãƒ«UI

### ã‚·ã‚¹ãƒ†ãƒ 
- `scripts/special_tile_system.gd` - ç‰¹æ®Šã‚¿ã‚¤ãƒ«å‡¦ç†ãƒ»å§”è­²ãƒ»å…±é€šUIè¨­å®š
- `scripts/tile_action_processor.gd` - ã‚¿ã‚¤ãƒ«ç€åœ°å‡¦ç†
- `scripts/game_flow/spell_phase_handler.gd` - å¤–éƒ¨ã‚¹ãƒšãƒ«å®Ÿè¡Œï¼ˆé­”æ³•ã‚¿ã‚¤ãƒ«ç”¨ï¼‰

### ãã®ä»–
- `scripts/tile_helper.gd` - ã‚¿ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—å®šæ•°
- `scripts/quest/stage_loader.gd` - ã‚¿ã‚¤ãƒ«ã‚·ãƒ¼ãƒ³ãƒãƒƒãƒ”ãƒ³ã‚°
- `data/master/maps/map_diamond_20_v2.json` - ç‰¹æ®Šã‚¿ã‚¤ãƒ«é…ç½®ãƒãƒƒãƒ—

---

## æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ |
|------|------|
| 2025/12/16 | åˆç‰ˆä½œæˆ |
| 2025/12/16 | é­”æ³•çŸ³ã®ä¾¡å€¤è¨ˆç®—å¼è¿½åŠ ï¼ˆç›¸å…‹å±æ€§ãƒšãƒŠãƒ«ãƒ†ã‚£å«ã‚€ï¼‰ |
| 2025/12/16 | è©³ç´°ä»•æ§˜è¿½åŠ ï¼ˆæ‰‹æœ­ä¸Šé™ã€ã‚°ãƒ¬ãƒ¼ã‚¢ã‚¦ãƒˆã€æœ€ä½ä¾¡å€¤25ã€è¤‡æ•°è³¼å…¥ã€CPUå¯¾å¿œãªã©ï¼‰ |
| 2025/12/17 | å®Ÿè£…è©³ç´°ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ ï¼ˆå…±é€šUIè¨­å®šé–¢æ•°ã€ãƒãƒ³ãƒ‰ãƒ©å®Ÿè£…ãƒ‘ã‚¿ãƒ¼ãƒ³ï¼‰ |
| 2025/12/17 | ã‚¿ã‚¤ãƒ«å§”è­²ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ã«ç§»è¡Œï¼ˆmagic, card_buy, card_giveå®Œäº†ï¼‰ |
| 2025/12/17 | UIå…±é€šä»•æ§˜è¿½åŠ ã€å®Ÿè£…çŠ¶æ³ã‚»ã‚¯ã‚·ãƒ§ãƒ³è¿½åŠ  |