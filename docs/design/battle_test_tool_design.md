# ãƒãƒˆãƒ«ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«è¨­è¨ˆæ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ã‚«ãƒ«ãƒ‰ã‚»ãƒ—ãƒˆé¢¨ã‚«ãƒ¼ãƒ‰ãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ   
**ä½œæˆæ—¥**: 2025å¹´10æœˆ18æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: åˆç‰ˆãƒ»ãƒ¬ãƒ“ãƒ¥ãƒ¼å¾…ã¡

---

## âš ï¸ é‡è¦ãªæ³¨æ„äº‹é …

**ã“ã®è¨­è¨ˆæ›¸ã¯æ–°è¦ä½œæˆã•ã‚ŒãŸã‚‚ã®ã§ã™ã€‚å®Ÿè£…ã‚’é€²ã‚ã‚‹ä¸­ã§èª¤ã‚Šã‚„ä¸æ•´åˆãŒè¦‹ã¤ã‹ã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ã€‚**

å®Ÿè£…æ™‚ã«ä»¥ä¸‹ã®ç‚¹ã«æ³¨æ„ã—ã¦ãã ã•ã„ï¼š
1. **æ—¢å­˜è¨­è¨ˆæ›¸ã¨ã®æ•´åˆæ€§ã‚’ç¢ºèª**
   - [design.md](design.md) - ãƒãƒˆãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ä»•æ§˜
   - [skills_design.md](skills_design.md) - ã‚¹ã‚­ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã®ä»•æ§˜
2. **å®Ÿè£…ä¸­ã«ä¸æ•´åˆã‚’ç™ºè¦‹ã—ãŸå ´åˆ**
   - ã“ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚’æ›´æ–°ã—ã¦ãã ã•ã„
   - æ›´æ–°å±¥æ­´ã«è¨˜éŒ²ã—ã¦ãã ã•ã„
3. **ç–‘å•ç‚¹ãŒã‚ã‚Œã°**
   - æ—¢å­˜ã®å®Ÿè£…ã‚³ãƒ¼ãƒ‰ã‚’å„ªå…ˆã—ã¦ãã ã•ã„
   - design.mdã€skills_design.mdã®ä»•æ§˜ã‚’å„ªå…ˆã—ã¦ãã ã•ã„

---

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£](#ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£)
3. [ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ)
4. [UIè¨­è¨ˆ](#uiè¨­è¨ˆ)
5. [ãƒãƒˆãƒ«ãƒ­ã‚¸ãƒƒã‚¯è¨­è¨ˆ](#ãƒãƒˆãƒ«ãƒ­ã‚¸ãƒƒã‚¯è¨­è¨ˆ)
6. [ã‚¹ã‚­ãƒ«ä»˜ä¸ã‚·ã‚¹ãƒ†ãƒ ](#ã‚¹ã‚­ãƒ«ä»˜ä¸ã‚·ã‚¹ãƒ†ãƒ )
7. [çµæœè¡¨ç¤ºè¨­è¨ˆ](#çµæœè¡¨ç¤ºè¨­è¨ˆ)
8. [æŠ€è¡“ä»•æ§˜](#æŠ€è¡“ä»•æ§˜)
9. [åˆ¶ç´„äº‹é …](#åˆ¶ç´„äº‹é …)
10. [æ›´æ–°å±¥æ­´](#æ›´æ–°å±¥æ­´)

---

## æ¦‚è¦

### ç›®çš„
ã‚¹ãƒšãƒ«ãƒ»ã‚¢ã‚¤ãƒ†ãƒ ãƒ»ã‚¹ã‚­ãƒ«ã®åŠ¹æœã‚’ç¶²ç¾…çš„ã«ãƒ†ã‚¹ãƒˆã—ã€ãƒãƒ©ãƒ³ã‚¹èª¿æ•´ãƒ»ãƒã‚°æ¤œå‡ºã‚’è¡Œã†ãƒ„ãƒ¼ãƒ«ã€‚

### ã‚¹ã‚³ãƒ¼ãƒ—
```
10ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ Ã— 10ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ Ã— 20ã‚¢ã‚¤ãƒ†ãƒ  Ã— 20ã‚¢ã‚¤ãƒ†ãƒ  Ã— 1ã‚¹ãƒšãƒ«
= 40,000 ãƒãƒˆãƒ«
å®Ÿè¡Œæ™‚é–“: ç´„6-7åˆ†
ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡: ç´„10MB
```

### ä¸»è¦æ©Ÿèƒ½
1. IDå…¥åŠ›å¼ã®é¸æŠUI
2. ãƒ—ãƒªã‚»ãƒƒãƒˆæ©Ÿèƒ½
3. åœŸåœ°æ¡ä»¶ãƒ»éš£æ¥æ¡ä»¶ã®è¨­å®š
4. ãƒãƒˆãƒ«å®Ÿè¡Œãƒ»çµæœè¨˜éŒ²
5. çµ±è¨ˆåˆ†æãƒ»CSVå‡ºåŠ›

---

## ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

### å…¨ä½“æ§‹æˆå›³
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          BattleTestTool (ã‚·ãƒ¼ãƒ³)                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”         â”‚
â”‚  â”‚  ConfigPanel    â”‚  â”‚ IDReferencePanel â”‚         â”‚
â”‚  â”‚  (è¨­å®šUI)       â”‚  â”‚  (æŠ˜ã‚ŠãŸãŸã¿)     â”‚         â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚
â”‚           â”‚                                         â”‚
â”‚           â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚ BattleTestUI    â”‚                               â”‚
â”‚  â”‚ (ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼)  â”‚                               â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜                               â”‚
â”‚           â”‚                                         â”‚
â”‚           â–¼                                         â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”                               â”‚
â”‚  â”‚BattleTestExecutorâ”‚â—„â”€â”€â”€â”€â”                        â”‚
â”‚  â”‚(å®Ÿè¡Œã‚¨ãƒ³ã‚¸ãƒ³)     â”‚     â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”˜     â”‚                        â”‚
â”‚           â”‚              â”‚                        â”‚
â”‚           â–¼              â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                        â”‚
â”‚  â”‚  BattleSystem   â”‚    â”‚ æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ            â”‚
â”‚  â”‚  (æ—¢å­˜)         â”‚    â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                        â”‚
â”‚                         â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                        â”‚
â”‚  â”‚  SkillSystem    â”‚â—„â”€â”€â”€â”¤                        â”‚
â”‚  â”‚  (æ—¢å­˜)         â”‚    â”‚                        â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚                        â”‚
â”‚                         â”‚                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚                        â”‚
â”‚  â”‚  CardLoader     â”‚â—„â”€â”€â”€â”˜                        â”‚
â”‚  â”‚  (æ—¢å­˜)         â”‚                             â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜                             â”‚
â”‚                                                     â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”           â”‚
â”‚  â”‚         ResultPanel                  â”‚           â”‚
â”‚  â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤           â”‚
â”‚  â”‚  â”œâ”€ StatisticsView (çµ±è¨ˆã‚µãƒãƒªãƒ¼)    â”‚           â”‚
â”‚  â”‚  â”œâ”€ TableView (ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º)         â”‚           â”‚
â”‚  â”‚  â””â”€ DetailView (è©³ç´°è¡¨ç¤º)            â”‚           â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜           â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚¯ãƒ©ã‚¹ä¾å­˜é–¢ä¿‚å›³
```
BattleTestUI
  â”‚
  â”œâ”€â–º BattleTestConfig (ãƒ‡ãƒ¼ã‚¿)
  â”‚
  â”œâ”€â–º BattleTestExecutor
  â”‚     â”‚
  â”‚     â”œâ”€â–º BattleTestConfig (å…¥åŠ›)
  â”‚     â”‚
  â”‚     â”œâ”€â–º BattleSystem (æ—¢å­˜)
  â”‚     â”‚     â”œâ”€â–º BattleParticipant
  â”‚     â”‚     â”œâ”€â–º _apply_item_effects()
  â”‚     â”‚     â”œâ”€â–º _grant_skill_to_participant()
  â”‚     â”‚     â””â”€â–º _check_skill_grant_condition()
  â”‚     â”‚
  â”‚     â”œâ”€â–º SkillSystem (æ—¢å­˜)
  â”‚     â”‚     â”œâ”€â–º ConditionChecker
  â”‚     â”‚     â””â”€â–º EffectCombat
  â”‚     â”‚
  â”‚     â”œâ”€â–º SpellPhaseHandler (æ—¢å­˜)
  â”‚     â”‚     â”œâ”€â–º execute_spell_effect()
  â”‚     â”‚     â””â”€â–º _apply_single_effect()
  â”‚     â”‚
  â”‚     â”œâ”€â–º CardLoader (æ—¢å­˜)
  â”‚     â”‚
  â”‚     â””â”€â–º BattleTestResult[] (å‡ºåŠ›)
  â”‚
  â””â”€â–º ResultViews
		â”œâ”€â–º BattleTestResult[] (å…¥åŠ›)
		â””â”€â–º BattleTestStatistics
```

### ãƒ‡ãƒ¼ã‚¿ãƒ•ãƒ­ãƒ¼
```
[1. è¨­å®šå…¥åŠ›]
  ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›
	â†“
  IDInputField â†’ BattleTestConfig
	â†“
[2. ãƒ—ãƒªã‚»ãƒƒãƒˆé©ç”¨]
  TestPresets â†’ BattleTestConfig
	â†“
[3. ãƒãƒˆãƒ«å®Ÿè¡Œ]
  BattleTestExecutor.execute_all_battles()
	â”œâ”€ ãƒ«ãƒ¼ãƒ—: ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ Ã— ã‚¢ã‚¤ãƒ†ãƒ  Ã— ã‚¹ãƒšãƒ«
	â”‚   â†“
	â”œâ”€ _create_participant()
	â”‚   â”œâ”€ CardLoader.get_card_by_id()
	â”‚   â”œâ”€ _apply_item_effects() â˜…ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœé©ç”¨
	â”‚   â”‚   â””â”€ _grant_skill_to_participant() â˜…ã‚¹ã‚­ãƒ«ä»˜ä¸
	â”‚   â”œâ”€ _apply_spell_effects() â˜…ã‚¹ãƒšãƒ«åŠ¹æœé©ç”¨
	â”‚   â”œâ”€ _apply_land_count_skills()
	â”‚   â”œâ”€ _apply_battle_land_skills()
	â”‚   â””â”€ _apply_adjacent_skills()
	â”‚   â†“
	â”œâ”€ BattleSystem.determine_battle_result_with_priority()
	â”‚   â†“
	â””â”€ BattleTestResult[] (çµæœé…åˆ—)
	â†“
[4. çµ±è¨ˆè¨ˆç®—]
  BattleTestStatistics.calculate()
	â†“
[5. çµæœè¡¨ç¤º]
  ResultViews.display()
	â”œâ”€ StatisticsView
	â”œâ”€ TableView
	â””â”€ DetailView
	â†“
[6. CSVå‡ºåŠ›ï¼ˆã‚ªãƒ—ã‚·ãƒ§ãƒ³ï¼‰]
  CSVExporter.export()
```

---

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ

### BattleTestConfig
```gdscript
# scripts/battle_test/battle_test_config.gd
class_name BattleTestConfig
extends RefCounted

# æ”»æ’ƒå´è¨­å®š
var attacker_creatures: Array[int] = []      # ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼IDé…åˆ—
var attacker_items: Array[int] = []          # ã‚¢ã‚¤ãƒ†ãƒ IDé…åˆ—ï¼ˆ1ã¤ãšã¤ãƒ†ã‚¹ãƒˆï¼‰
var attacker_spell: int = -1                 # ã‚¹ãƒšãƒ«ID (-1 = ãªã—)
var attacker_owned_lands: Dictionary = {     # ä¿æœ‰åœŸåœ°æ•°
	"fire": 0,
	"water": 0,
	"earth": 0,
	"wind": 0
}
var attacker_battle_land: String = "fire"    # ãƒãƒˆãƒ«ç™ºç”ŸåœŸåœ°ã®å±æ€§
var attacker_has_adjacent: bool = false      # éš£æ¥å‘³æ–¹é ˜åœ°ã‚ã‚Š

# é˜²å¾¡å´è¨­å®š
var defender_creatures: Array[int] = []
var defender_items: Array[int] = []
var defender_spell: int = -1
var defender_owned_lands: Dictionary = {
	"fire": 0,
	"water": 0,
	"earth": 0,
	"wind": 0
}
var defender_battle_land: String = "fire"
var defender_has_adjacent: bool = false

# ãƒãƒªãƒ‡ãƒ¼ã‚·ãƒ§ãƒ³
func validate() -> bool:
	if attacker_creatures.is_empty():
		push_error("æ”»æ’ƒå´ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãŒæœªé¸æŠ")
		return false
	if defender_creatures.is_empty():
		push_error("é˜²å¾¡å´ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãŒæœªé¸æŠ")
		return false
	return true

# è¨­å®šã®å…¥ã‚Œæ›¿ãˆ
func swap_attacker_defender():
	var temp_creatures = attacker_creatures
	attacker_creatures = defender_creatures
	defender_creatures = temp_creatures
	
	var temp_items = attacker_items
	attacker_items = defender_items
	defender_items = temp_items
	
	# ãã®ä»–ã®è¨­å®šã‚‚å…¥ã‚Œæ›¿ãˆ
	var temp_spell = attacker_spell
	attacker_spell = defender_spell
	defender_spell = temp_spell
	
	var temp_lands = attacker_owned_lands.duplicate()
	attacker_owned_lands = defender_owned_lands.duplicate()
	defender_owned_lands = temp_lands
	
	var temp_battle_land = attacker_battle_land
	attacker_battle_land = defender_battle_land
	defender_battle_land = temp_battle_land
	
	var temp_adjacent = attacker_has_adjacent
	attacker_has_adjacent = defender_has_adjacent
	defender_has_adjacent = temp_adjacent
```

### BattleTestResult
```gdscript
# scripts/battle_test/battle_test_result.gd
class_name BattleTestResult
extends RefCounted

# åŸºæœ¬æƒ…å ±
var battle_id: int

# æ”»æ’ƒå´æƒ…å ±
var attacker_id: int
var attacker_name: String
var attacker_item_id: int
var attacker_item_name: String
var attacker_spell_id: int
var attacker_spell_name: String
var attacker_base_ap: int                    # åŸºç¤AP
var attacker_base_hp: int                    # åŸºç¤HP
var attacker_final_ap: int                   # æœ€çµ‚APï¼ˆã‚¹ã‚­ãƒ«é©ç”¨å¾Œï¼‰
var attacker_final_hp: int                   # æ®‹HP
var attacker_skills_triggered: Array[String] # ç™ºå‹•ã—ãŸã‚¹ã‚­ãƒ«
var attacker_granted_skills: Array[String]   # ã‚¢ã‚¤ãƒ†ãƒ ãƒ»ã‚¹ãƒšãƒ«ã§ä»˜ä¸ã•ã‚ŒãŸã‚¹ã‚­ãƒ« â˜…è¿½åŠ 

# é˜²å¾¡å´æƒ…å ±
var defender_id: int
var defender_name: String
var defender_item_id: int
var defender_item_name: String
var defender_spell_id: int
var defender_spell_name: String
var defender_base_ap: int
var defender_base_hp: int
var defender_final_ap: int
var defender_final_hp: int
var defender_skills_triggered: Array[String]
var defender_granted_skills: Array[String]   # ã‚¢ã‚¤ãƒ†ãƒ ãƒ»ã‚¹ãƒšãƒ«ã§ä»˜ä¸ã•ã‚ŒãŸã‚¹ã‚­ãƒ« â˜…è¿½åŠ 

# ãƒãƒˆãƒ«çµæœ
var winner: String  # "attacker" or "defender"
var battle_duration_ms: int  # ãƒãƒˆãƒ«å®Ÿè¡Œæ™‚é–“ï¼ˆãƒŸãƒªç§’ï¼‰

# ãƒãƒˆãƒ«æ¡ä»¶
var battle_land: String
var attacker_owned_lands: Dictionary
var defender_owned_lands: Dictionary
var attacker_has_adjacent: bool
var defender_has_adjacent: bool

# ãƒ€ãƒ¡ãƒ¼ã‚¸è©³ç´°
var damage_dealt_by_attacker: int
var damage_dealt_by_defender: int
var first_strike_occurred: bool  # å…ˆåˆ¶æ”»æ’ƒãŒç™ºç”Ÿã—ãŸã‹

# CSV/JSONå‡ºåŠ›ç”¨
func to_dict() -> Dictionary:
	return {
		"battle_id": battle_id,
		"attacker_name": attacker_name,
		"attacker_item": attacker_item_name,
		"attacker_spell": attacker_spell_name,
		"attacker_base_ap": attacker_base_ap,
		"attacker_final_ap": attacker_final_ap,
		"attacker_final_hp": attacker_final_hp,
		"attacker_skills": ",".join(attacker_skills_triggered),
		"attacker_granted_skills": ",".join(attacker_granted_skills),  # â˜…è¿½åŠ 
		"defender_name": defender_name,
		"defender_item": defender_item_name,
		"defender_spell": defender_spell_name,
		"defender_base_ap": defender_base_ap,
		"defender_final_ap": defender_final_ap,
		"defender_final_hp": defender_final_hp,
		"defender_skills": ",".join(defender_skills_triggered),
		"defender_granted_skills": ",".join(defender_granted_skills),  # â˜…è¿½åŠ 
		"winner": winner,
		"damage_attacker": damage_dealt_by_attacker,
		"damage_defender": damage_dealt_by_defender,
		"battle_land": battle_land,
	}

# ãƒ‡ãƒãƒƒã‚°ç”¨æ–‡å­—åˆ—
func to_string() -> String:
	return "[%d] %s vs %s â†’ å‹è€…: %s" % [
		battle_id,
		attacker_name,
		defender_name,
		winner
	]
```

### BattleTestStatistics
```gdscript
# scripts/battle_test/battle_test_statistics.gd
class_name BattleTestStatistics
extends RefCounted

var total_battles: int = 0
var attacker_wins: int = 0
var defender_wins: int = 0
var total_duration_ms: int = 0

# ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼åˆ¥çµ±è¨ˆ
# { "ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼å": { "wins": int, "total": int, "win_rate": float } }
var creature_stats: Dictionary = {}

# ã‚¢ã‚¤ãƒ†ãƒ åˆ¥çµ±è¨ˆ
# { "ã‚¢ã‚¤ãƒ†ãƒ å": { "wins": int, "total": int, "win_rate": float } }
var item_stats: Dictionary = {}

# ã‚¹ã‚­ãƒ«ç™ºå‹•çµ±è¨ˆ
# { "ã‚¹ã‚­ãƒ«å": { "triggered": int, "total_possible": int, "rate": float } }
var skill_stats: Dictionary = {}

# ã‚¹ã‚­ãƒ«ä»˜ä¸çµ±è¨ˆ â˜…è¿½åŠ 
# { "ã‚¹ã‚­ãƒ«å": { "granted": int, "from_item": int, "from_spell": int } }
var skill_grant_stats: Dictionary = {}

# çµ±è¨ˆè¨ˆç®—
static func calculate(results: Array[BattleTestResult]) -> BattleTestStatistics:
	var stats = BattleTestStatistics.new()
	stats.total_battles = results.size()
	
	for result in results:
		# å‹æ•—é›†è¨ˆ
		if result.winner == "attacker":
			stats.attacker_wins += 1
		else:
			stats.defender_wins += 1
		
		# å®Ÿè¡Œæ™‚é–“é›†è¨ˆ
		stats.total_duration_ms += result.battle_duration_ms
		
		# ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼çµ±è¨ˆæ›´æ–°
		_update_creature_stats(stats.creature_stats, result)
		
		# ã‚¢ã‚¤ãƒ†ãƒ çµ±è¨ˆæ›´æ–°
		_update_item_stats(stats.item_stats, result)
		
		# ã‚¹ã‚­ãƒ«çµ±è¨ˆæ›´æ–°
		_update_skill_stats(stats.skill_stats, result)
		
		# ã‚¹ã‚­ãƒ«ä»˜ä¸çµ±è¨ˆæ›´æ–° â˜…è¿½åŠ 
		_update_skill_grant_stats(stats.skill_grant_stats, result)
	
	# å‹ç‡è¨ˆç®—
	_calculate_win_rates(stats)
	
	return stats

static func _update_creature_stats(creature_stats: Dictionary, result: BattleTestResult):
	# æ”»æ’ƒå´
	if not creature_stats.has(result.attacker_name):
		creature_stats[result.attacker_name] = {"wins": 0, "total": 0}
	creature_stats[result.attacker_name].total += 1
	if result.winner == "attacker":
		creature_stats[result.attacker_name].wins += 1
	
	# é˜²å¾¡å´
	if not creature_stats.has(result.defender_name):
		creature_stats[result.defender_name] = {"wins": 0, "total": 0}
	creature_stats[result.defender_name].total += 1
	if result.winner == "defender":
		creature_stats[result.defender_name].wins += 1

static func _update_item_stats(item_stats: Dictionary, result: BattleTestResult):
	# ã‚¢ã‚¤ãƒ†ãƒ çµ±è¨ˆï¼ˆå®Ÿè£…äºˆå®šï¼‰
	pass

static func _update_skill_stats(skill_stats: Dictionary, result: BattleTestResult):
	# ã‚¹ã‚­ãƒ«çµ±è¨ˆï¼ˆå®Ÿè£…äºˆå®šï¼‰
	pass

# â˜…è¿½åŠ ï¼šã‚¹ã‚­ãƒ«ä»˜ä¸çµ±è¨ˆ
static func _update_skill_grant_stats(skill_grant_stats: Dictionary, result: BattleTestResult):
	# æ”»æ’ƒå´ã®ä»˜ä¸ã‚¹ã‚­ãƒ«ã‚’é›†è¨ˆ
	for skill in result.attacker_granted_skills:
		if not skill_grant_stats.has(skill):
			skill_grant_stats[skill] = {"granted": 0, "from_item": 0, "from_spell": 0}
		skill_grant_stats[skill].granted += 1
		# ã‚¢ã‚¤ãƒ†ãƒ ã‹ã‚¹ãƒšãƒ«ã‹ã‚’åˆ¤å®šã—ã¦åŠ ç®—
		if result.attacker_item_id > 0:
			skill_grant_stats[skill].from_item += 1
		if result.attacker_spell_id > 0:
			skill_grant_stats[skill].from_spell += 1
	
	# é˜²å¾¡å´ã‚‚åŒæ§˜ã«é›†è¨ˆ
	for skill in result.defender_granted_skills:
		if not skill_grant_stats.has(skill):
			skill_grant_stats[skill] = {"granted": 0, "from_item": 0, "from_spell": 0}
		skill_grant_stats[skill].granted += 1
		if result.defender_item_id > 0:
			skill_grant_stats[skill].from_item += 1
		if result.defender_spell_id > 0:
			skill_grant_stats[skill].from_spell += 1

static func _calculate_win_rates(stats: BattleTestStatistics):
	# å‹ç‡è¨ˆç®—
	for creature_name in stats.creature_stats:
		var data = stats.creature_stats[creature_name]
		data["win_rate"] = float(data.wins) / float(data.total) * 100.0
```

### TestPresets
```gdscript
# scripts/battle_test/test_presets.gd
class_name BattleTestPresets
extends RefCounted

# ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãƒ—ãƒªã‚»ãƒƒãƒˆ
static var CREATURE_PRESETS = {
	"ç«å±æ€§": [2, 4, 7, 9, 15, 16, 19],
	"æ°´å±æ€§": [101, 104, 108, 113, 116, 120],
	"é¢¨å±æ€§": [300, 303, 307, 309, 315, 320],
	"åœ°å±æ€§": [201, 205, 210, 215, 220],
	"å…ˆåˆ¶æ”»æ’ƒæŒã¡": [7, 303, 405],
	"å¼·æ‰“æŒã¡": [4, 9, 19],
	"ç„¡åŠ¹åŒ–æŒã¡": [1, 6, 11, 16, 112, 325, 413],
}

# ã‚¢ã‚¤ãƒ†ãƒ ãƒ—ãƒªã‚»ãƒƒãƒˆ
static var ITEM_PRESETS = {
	"æ­¦å™¨ç³»": [],  # æ‰‹å‹•è¿½åŠ äºˆå®š
	"é˜²å…·ç³»": [],
	"ã‚¢ã‚¯ã‚»ã‚µãƒªç³»": [],
	"å·»ç‰©ç³»": [],
}

# ã‚¹ãƒšãƒ«ãƒ—ãƒªã‚»ãƒƒãƒˆ
static var SPELL_PRESETS = {
	"æ”»æ’ƒç³»": [],  # æ‰‹å‹•è¿½åŠ äºˆå®š
	"é˜²å¾¡ç³»": [],
}

static func get_creature_preset(name: String) -> Array[int]:
	return CREATURE_PRESETS.get(name, [])

static func get_item_preset(name: String) -> Array[int]:
	return ITEM_PRESETS.get(name, [])

static func get_spell_preset(name: String) -> Array[int]:
	return SPELL_PRESETS.get(name, [])

static func get_all_creature_preset_names() -> Array[String]:
	var names: Array[String] = []
	for key in CREATURE_PRESETS.keys():
		names.append(key)
	return names
```

---

## UIè¨­è¨ˆ

### ç”»é¢æ§‹æˆ
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  ãƒãƒˆãƒ«ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«                                            â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚                                                             â”‚
â”‚ â”Œâ”€ æ”»æ’ƒå´è¨­å®š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ â–¼ ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼                                           â”‚ â”‚
â”‚ â”‚   IDå…¥åŠ›: [___] [___] [___] [___] [___]                 â”‚ â”‚
â”‚ â”‚           [___] [___] [___] [___] [___]                 â”‚ â”‚
â”‚ â”‚   â†’ (åå‰è¡¨ç¤ºã‚¨ãƒªã‚¢)                                      â”‚ â”‚
â”‚ â”‚   ãƒ—ãƒªã‚»ãƒƒãƒˆ: [ç«å±æ€§ â–¼]                                  â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ â–¼ ã‚¢ã‚¤ãƒ†ãƒ                                                â”‚ â”‚
â”‚ â”‚   IDå…¥åŠ›: [___] [___] [___] ...                          â”‚ â”‚
â”‚ â”‚   â†’ (åå‰è¡¨ç¤ºã‚¨ãƒªã‚¢)                                      â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ â–¼ ã‚¹ãƒšãƒ«                                                 â”‚ â”‚
â”‚ â”‚   IDå…¥åŠ›: [___]  â†’ (åå‰è¡¨ç¤º)                            â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ â–¼ ä¿æœ‰åœŸåœ°æ•°                                             â”‚ â”‚
â”‚ â”‚   ğŸ”¥ç«: [ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼ 0-10]  ğŸ’§æ°´: [ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼]            â”‚ â”‚
â”‚ â”‚   ğŸŒ±åœ°: [ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼]       ğŸ’¨é¢¨: [ã‚¹ãƒ©ã‚¤ãƒ€ãƒ¼]            â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ â–¼ ãƒãƒˆãƒ«ç™ºç”ŸåœŸåœ°                                         â”‚ â”‚
â”‚ â”‚   â—‰ ğŸ”¥ç«  â—‹ ğŸ’§æ°´  â—‹ ğŸŒ±åœ°  â—‹ ğŸ’¨é¢¨  â—‹ ä¸­ç«‹             â”‚ â”‚
â”‚ â”‚                                                          â”‚ â”‚
â”‚ â”‚ â–¼ é…ç½®æ¡ä»¶                                               â”‚ â”‚
â”‚ â”‚   â˜‘ éš£æ¥å‘³æ–¹é ˜åœ°ã‚ã‚Š                                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ é˜²å¾¡å´è¨­å®š â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ (åŒæ§˜ã®ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ)                                       â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚         [æ”»æ’ƒâ‡”é˜²å¾¡å…¥ã‚Œæ›¿ãˆ]  [ãƒ†ã‚¹ãƒˆå®Ÿè¡Œ]                    â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ IDå‚ç…§è¡¨ [â–¼å±•é–‹/â–²æŠ˜ã‚ŠãŸãŸã¿] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ æ¤œç´¢: [___________]                                    â”‚ â”‚
â”‚ â”‚ [ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼] [ã‚¢ã‚¤ãƒ†ãƒ ] [ã‚¹ãƒšãƒ«]                      â”‚ â”‚
â”‚ â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”            â”‚ â”‚
â”‚ â”‚ â”‚ ID  | åå‰        | AP | HP | å±æ€§     â”‚            â”‚ â”‚
â”‚ â”‚ â”‚ 1   | ã‚¢ãƒ¢ãƒ³      | 30 | 30 | ç«       â”‚            â”‚ â”‚
â”‚ â”‚ â”‚ 2   | ...                               â”‚            â”‚ â”‚
â”‚ â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜            â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ å®Ÿè¡ŒçŠ¶æ³ â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”   â”‚
â”‚ â”‚ é€²è¡ŒçŠ¶æ³: â– â– â– â– â– â–¡â–¡â–¡â–¡â–¡ 45% (1,800/4,000)            â”‚ â”‚
â”‚ â”‚ çµŒéæ™‚é–“: 3åˆ†12ç§’                                      â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚                                                             â”‚
â”‚ â”Œâ”€ çµæœè¡¨ç¤º [çµ±è¨ˆ][ãƒ†ãƒ¼ãƒ–ãƒ«][è©³ç´°] â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ (ã‚¿ãƒ–ã§åˆ‡ã‚Šæ›¿ãˆ)                                       â”‚ â”‚
â”‚ â”‚                                                        â”‚ â”‚
â”‚ â”‚ [CSVå‡ºåŠ›] [ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼] [ã‚½ãƒ¼ãƒˆ]                        â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### UIã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆä¸€è¦§

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | ãƒ•ã‚¡ã‚¤ãƒ« | è²¬å‹™ |
|--------------|---------|------|
| BattleTestUI | battle_test_ui.gd | ãƒ¡ã‚¤ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ©ãƒ¼ |
| IDInputField | id_input_field.gd | IDå…¥åŠ›ãƒ»åå‰è¡¨ç¤º |
| IDReferencePanel | id_reference_panel.gd | IDå‚ç…§è¡¨ |
| ResultTableView | result_table_view.gd | ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º |
| ResultDetailView | result_detail_view.gd | è©³ç´°è¡¨ç¤º |
| ResultStatisticsView | result_statistics_view.gd | çµ±è¨ˆã‚µãƒãƒªãƒ¼ |

---

## ãƒãƒˆãƒ«ãƒ­ã‚¸ãƒƒã‚¯è¨­è¨ˆ

### æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¨ã®çµ±åˆ

**é‡è¦**: æ—¢å­˜ã®`BattleSystem`, `SkillSystem`, `SpellPhaseHandler`ã‚’æ´»ç”¨ã—ã€è»Šè¼ªã®å†ç™ºæ˜ã‚’ã—ãªã„ã€‚

#### å‚ç…§ã™ã‚‹æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ 
1. **BattleSystem** ([design.md](design.md)å‚ç…§)
   - `determine_battle_result_with_priority()` ã‚’ä½¿ç”¨
   - `_apply_item_effects()` ã§ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœé©ç”¨ â˜…
   - `_grant_skill_to_participant()` ã§ã‚¹ã‚­ãƒ«ä»˜ä¸ â˜…
   - `_check_skill_grant_condition()` ã§æ¡ä»¶åˆ¤å®š â˜…
   - å…ˆåˆ¶æ”»æ’ƒåˆ¤å®š
   - ãƒ€ãƒ¡ãƒ¼ã‚¸è¨ˆç®—

2. **SkillSystem** ([skills_design.md](skills_design.md)å‚ç…§)
   - `ConditionChecker` ã§æ¡ä»¶åˆ¤å®š
   - `EffectCombat` ã§åŠ¹æœé©ç”¨
   - ability_parsedã®è§£æ

3. **SpellPhaseHandler** (æ—¢å­˜å®Ÿè£…)
   - `execute_spell_effect()` ã§ã‚¹ãƒšãƒ«åŠ¹æœå®Ÿè¡Œ â˜…
   - `_apply_single_effect()` ã§å€‹åˆ¥åŠ¹æœé©ç”¨ â˜…

4. **CardLoader** (æ—¢å­˜Autoload)
   - ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿å–å¾—

### BattleParticipantä½œæˆãƒ•ãƒ­ãƒ¼
```
_create_participant(creature_id, item_id, spell_id, config)
  â”‚
  â”œâ”€ 1. CardLoader.get_card_by_id(creature_id)
  â”‚    â””â”€ ã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿å–å¾—
  â”‚
  â”œâ”€ 2. BattleParticipant.new()
  â”‚    â”œâ”€ åŸºæœ¬ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¨­å®š
  â”‚    â”‚   â”œâ”€ base_ap = card_data.ap
  â”‚    â”‚   â”œâ”€ base_hp = card_data.hp
  â”‚    â”‚   â”œâ”€ current_hp = card_data.hp
  â”‚    â”‚   â””â”€ ability_parsed = card_data.ability_parsed
  â”‚    â”‚
  â”‚    â””â”€ å…ˆåˆ¶æ”»æ’ƒåˆ¤å®š
  â”‚        â””â”€ has_first_strike = "å…ˆåˆ¶" in keywords
  â”‚
  â”œâ”€ 3. _apply_item_effects(participant, item_id) â˜…é‡è¦
  â”‚    â”œâ”€ ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹AP/HPä¿®æ­£
  â”‚    â”‚   â””â”€ stat_bonus effectã‚’é©ç”¨
  â”‚    â”‚
  â”‚    â””â”€ ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ«ä»˜ä¸ â˜…è¿½åŠ æ©Ÿèƒ½
  â”‚        â”œâ”€ grant_skill effectã‚’æ¤œå‡º
  â”‚        â”œâ”€ _check_skill_grant_condition()ã§æ¡ä»¶ç¢ºèª
  â”‚        â”‚   â””â”€ user_elementç­‰ã®æ¡ä»¶åˆ¤å®š
  â”‚        â”‚
  â”‚        â””â”€ _grant_skill_to_participant()ã§ã‚¹ã‚­ãƒ«ä»˜ä¸
  â”‚            â”œâ”€ "å…ˆåˆ¶æ”»æ’ƒ" â†’ has_item_first_strike = true
  â”‚            â”œâ”€ "å¾Œæ‰‹" â†’ has_last_strike = true
  â”‚            â”œâ”€ "å¼·æ‰“" â†’ has_power_strike = true
  â”‚            â””â”€ ä»Šå¾Œè¿½åŠ ã•ã‚Œã‚‹ã‚¹ã‚­ãƒ«ã«ã‚‚å¯¾å¿œ
  â”‚
  â”œâ”€ 4. _apply_spell_effects(participant, spell_id) â˜…é‡è¦
  â”‚    â”œâ”€ SpellPhaseHandler.execute_spell_effect()ã‚’å‚è€ƒ
  â”‚    â”œâ”€ ã‚¹ãƒšãƒ«ã«ã‚ˆã‚‹ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ä¿®æ­£
  â”‚    â”‚   â”œâ”€ damage effect
  â”‚    â”‚   â”œâ”€ drain_magic effect
  â”‚    â”‚   â””â”€ stat_bonus effect
  â”‚    â”‚
  â”‚    â””â”€ ã‚¹ãƒšãƒ«ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ«ä»˜ä¸ â˜…è¿½åŠ æ©Ÿèƒ½ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
  â”‚        â””â”€ ã‚¢ã‚¤ãƒ†ãƒ ã¨åŒæ§˜ã®ãƒ­ã‚¸ãƒƒã‚¯
  â”‚
  â”œâ”€ 5. _apply_land_count_skills(participant, owned_lands)
  â”‚    â””â”€ ã€Œç«åœ°Ã—10ã€ç­‰ã®ã‚¹ã‚­ãƒ«é©ç”¨
  â”‚        â””â”€ ability_parsedã‚’è§£æ
  â”‚
  â”œâ”€ 6. _apply_battle_land_skills(participant, battle_land)
  â”‚    â””â”€ ã€Œæ„Ÿå¿œ[åœ°]ã€ç­‰ã€åœŸåœ°å±æ€§ã§ç™ºå‹•ã™ã‚‹ã‚¹ã‚­ãƒ«
  â”‚        â””â”€ skills_design.mdã®ä»•æ§˜ã«å¾“ã†
  â”‚
  â””â”€ 7. _apply_adjacent_skills(participant)
	   â””â”€ éš£æ¥æ¡ä»¶ã§ç™ºå‹•ã™ã‚‹ã‚¹ã‚­ãƒ«
		   â””â”€ has_adjacent = true ã®å ´åˆã®ã¿
```

---

## ã‚¹ã‚­ãƒ«ä»˜ä¸ã‚·ã‚¹ãƒ†ãƒ 

### æ¦‚è¦

ã‚¢ã‚¤ãƒ†ãƒ ã‚„ã‚¹ãƒšãƒ«ã«ã‚ˆã£ã¦ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã«**ã‚¹ã‚­ãƒ«ã‚’ä»˜ä¸**ã™ã‚‹æ©Ÿèƒ½ã€‚  
æ—¢å­˜ã® `BattleSystem` ã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’æ´»ç”¨ã—ã€ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã‚‚åŒã˜æŒ™å‹•ã‚’å†ç¾ã™ã‚‹ã€‚

### æ—¢å­˜å®Ÿè£…ã®ç¢ºèª

ä»¥ä¸‹ã®æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ï¼š

1. **`BattleSystem._apply_item_effects(participant, item_data)`**
   - å ´æ‰€: `scripts/battle_system.gd` (L275-323)
   - å½¹å‰²: ã‚¢ã‚¤ãƒ†ãƒ ã®å…¨åŠ¹æœã‚’é©ç”¨
   - å†…éƒ¨ã§ `_grant_skill_to_participant()` ã‚’å‘¼ã³å‡ºã—

2. **`BattleSystem._grant_skill_to_participant(participant, skill_name)`**
   - å ´æ‰€: `scripts/battle_system.gd` (L341-375)
   - å½¹å‰²: ç‰¹å®šã®ã‚¹ã‚­ãƒ«ã‚’Participantã«ä»˜ä¸
   - å¯¾å¿œã‚¹ã‚­ãƒ«ï¼š
	 - `"å…ˆåˆ¶æ”»æ’ƒ"` â†’ `has_item_first_strike = true` + `has_last_strike = false`
	 - `"å¾Œæ‰‹"` â†’ `has_last_strike = true` + `has_item_first_strike = false`
	 - `"å¼·æ‰“"` â†’ `has_power_strike = true`
	 - **ä»Šå¾Œã®ã‚¹ã‚­ãƒ«è¿½åŠ ã«ã‚‚å¯¾å¿œå¯èƒ½**

3. **`BattleSystem._check_skill_grant_condition(participant, conditions)`**
   - å ´æ‰€: `scripts/battle_system.gd` (L326-338)
   - å½¹å‰²: ã‚¹ã‚­ãƒ«ä»˜ä¸æ¡ä»¶ã®åˆ¤å®š
   - ç¾åœ¨å¯¾å¿œ: `user_element` (ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼å±æ€§ã«ã‚ˆã‚‹æ¡ä»¶)

### ã‚¹ã‚­ãƒ«ä»˜ä¸ã®å®Ÿè£…ä¾‹

```gdscript
# ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«å†…ã§ã®å®Ÿè£…ä¾‹
func _apply_item_effects(participant: BattleParticipant, item_id: int):
	if item_id <= 0:
		return  # ã‚¢ã‚¤ãƒ†ãƒ ãªã—
	
	var item_data = CardLoader.get_card_by_id(item_id)
	if not item_data:
		push_error("ã‚¢ã‚¤ãƒ†ãƒ ID %d ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“" % item_id)
		return
	
	# æ—¢å­˜ã®BattleSystemã®ãƒ­ã‚¸ãƒƒã‚¯ã‚’ä½¿ç”¨
	var battle_system = BattleSystem.new()
	battle_system._apply_item_effects(participant, item_data)
	
	# ä»˜ä¸ã•ã‚ŒãŸã‚¹ã‚­ãƒ«ã‚’è¨˜éŒ²
	_record_granted_skills(participant, item_data)

func _record_granted_skills(participant: BattleParticipant, item_data: Dictionary):
	"""ä»˜ä¸ã•ã‚ŒãŸã‚¹ã‚­ãƒ«ã‚’è¨˜éŒ²ã™ã‚‹"""
	if not item_data.has("ability_parsed"):
		return
	
	var ability = item_data.ability_parsed
	if not ability.has("effects"):
		return
	
	for effect in ability.effects:
		if effect.get("effect_type") == "grant_skill":
			var skill_name = effect.get("skill_name", "")
			if skill_name != "":
				# BattleTestResultã«è¨˜éŒ²ã™ã‚‹ãŸã‚é…åˆ—ã«è¿½åŠ 
				if not participant.has("granted_skills"):
					participant.granted_skills = []
				participant.granted_skills.append(skill_name)
```

### ã‚¹ã‚­ãƒ«ä»˜ä¸ã®ãƒ•ãƒ­ãƒ¼å›³

```
ã‚¢ã‚¤ãƒ†ãƒ ãƒ‡ãƒ¼ã‚¿å–å¾—
	â†“
ability_parsed.effects ã‚’ãƒ«ãƒ¼ãƒ—
	â†“
effect_type == "grant_skill" ?
	â”œâ”€ Yes â†’ æ¡ä»¶ç¢ºèª
	â”‚         â”œâ”€ conditions ãŒã‚ã‚‹ã‹ï¼Ÿ
	â”‚         â”‚   â”œâ”€ Yes â†’ _check_skill_grant_condition()
	â”‚         â”‚   â”‚         â”œâ”€ æ¡ä»¶ä¸€è‡´ â†’ ã‚¹ã‚­ãƒ«ä»˜ä¸
	â”‚         â”‚   â”‚         â””â”€ æ¡ä»¶ä¸ä¸€è‡´ â†’ ã‚¹ã‚­ãƒƒãƒ—
	â”‚         â”‚   â””â”€ No â†’ ç„¡æ¡ä»¶ã§ã‚¹ã‚­ãƒ«ä»˜ä¸
	â”‚         â”‚
	â”‚         â””â”€ _grant_skill_to_participant()
	â”‚               â”œâ”€ "å…ˆåˆ¶æ”»æ’ƒ" â†’ has_item_first_strike = true
	â”‚               â”œâ”€ "å¾Œæ‰‹" â†’ has_last_strike = true
	â”‚               â”œâ”€ "å¼·æ‰“" â†’ has_power_strike = true
	â”‚               â””â”€ æ–°ã‚¹ã‚­ãƒ« â†’ ä»Šå¾Œè¿½åŠ 
	â”‚
	â””â”€ No â†’ ä»–ã®effect_typeã‚’å‡¦ç†
```

### ãƒ‡ãƒ¼ã‚¿ä¾‹

#### ã‚¢ã‚¤ãƒ†ãƒ ãƒ‡ãƒ¼ã‚¿ï¼ˆitem.jsonï¼‰

```json
{
	"id": 3001,
	"name": "ãƒ­ãƒ³ã‚°ã‚½ãƒ¼ãƒ‰",
	"type": "item",
	"cost": {"mp": 1},
	"ability_parsed": {
		"effects": [
			{
				"effect_type": "stat_bonus",
				"target_stat": "st",
				"value": 30
			}
		]
	}
}
```

```json
{
	"id": 3002,
	"name": "ãƒã‚°ãƒãƒãƒ³ãƒãƒ¼",
	"type": "item",
	"cost": {"mp": 2},
	"ability_parsed": {
		"effects": [
			{
				"effect_type": "stat_bonus",
				"target_stat": "st",
				"value": 20
			},
			{
				"effect_type": "grant_skill",
				"skill_name": "å¼·æ‰“",
				"conditions": {
					"user_element": "fire"
				}
			}
		]
	}
}
```

### ãƒ†ã‚¹ãƒˆæ™‚ã®è¨˜éŒ²

BattleTestResultã«ä»¥ä¸‹ã‚’è¨˜éŒ²ï¼š

```gdscript
var attacker_granted_skills: Array[String] = ["å¼·æ‰“", "å…ˆåˆ¶æ”»æ’ƒ"]
var defender_granted_skills: Array[String] = []
```

ã“ã‚Œã«ã‚ˆã‚Šã€ã‚¢ã‚¤ãƒ†ãƒ ãƒ»ã‚¹ãƒšãƒ«ã«ã‚ˆã£ã¦ã©ã®ã‚¹ã‚­ãƒ«ãŒä»˜ä¸ã•ã‚ŒãŸã‹ã‚’çµæœã¨ã—ã¦ç¢ºèªã§ãã‚‹ã€‚

### ä»Šå¾Œã®æ‹¡å¼µæ€§

æ–°ã—ã„ã‚¹ã‚­ãƒ«ãŒè¿½åŠ ã•ã‚Œã‚‹å ´åˆï¼š

1. **`BattleSystem._grant_skill_to_participant()` ã«è¿½åŠ **
   ```gdscript
   "è²«é€š":
	   participant.has_penetration = true
   ```

2. **ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã¯è‡ªå‹•çš„ã«å¯¾å¿œ**
   - æ—¢å­˜ãƒ¡ã‚½ãƒƒãƒ‰ã‚’ä½¿ç”¨ã—ã¦ã„ã‚‹ãŸã‚ã€ä¿®æ­£ä¸è¦

3. **çµæœã®è¨˜éŒ²ã‚‚è‡ªå‹•å¯¾å¿œ**
   - `granted_skills` é…åˆ—ã«è‡ªå‹•è¿½åŠ 

---

## çµæœè¡¨ç¤ºè¨­è¨ˆ

### ãƒ†ãƒ¼ãƒ–ãƒ«è¡¨ç¤º
```
â”Œâ”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ ID â”‚ æ”»æ’ƒå´    â”‚ é˜²å¾¡å´    â”‚ å‹è€… â”‚æ®‹HPâ”‚ AP  â”‚ã‚¹ã‚­ãƒ«   â”‚ä»˜ä¸ã‚¹ã‚­ãƒ« â”‚
â”œâ”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”¼â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚ 1  â”‚ ã‚¢ãƒ¢ãƒ³    â”‚ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹â”‚ æ”»  â”‚ 25 â”‚ 50  â”‚å…ˆåˆ¶,å¼·æ‰“â”‚å¼·æ‰“(I)   â”‚
â”‚    â”‚+ãƒ­ãƒ³ã‚°ã‚½ãƒ¼ãƒ‰â”‚+ãªã—    â”‚     â”‚  0 â”‚ 40  â”‚        â”‚          â”‚
â””â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

**è¡¨è¨˜ãƒ«ãƒ¼ãƒ«**:
- ä»˜ä¸ã‚¹ã‚­ãƒ«åˆ—ã® `(I)` = ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹ä»˜ä¸
- ä»˜ä¸ã‚¹ã‚­ãƒ«åˆ—ã® `(S)` = ã‚¹ãƒšãƒ«ã«ã‚ˆã‚‹ä»˜ä¸

**å®Ÿè£…è¦ä»¶**:
- ItemList ã¾ãŸã¯ Treeã¾ãŸã¯Table ã‚’ä½¿ç”¨
- ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³: 20ä»¶/ãƒšãƒ¼ã‚¸
- ã‚½ãƒ¼ãƒˆæ©Ÿèƒ½: å„ã‚«ãƒ©ãƒ ã‚¯ãƒªãƒƒã‚¯ã§ã‚½ãƒ¼ãƒˆ
- ãƒ•ã‚£ãƒ«ã‚¿ãƒ¼æ©Ÿèƒ½: å‹è€…ãƒ»ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãƒ»APãƒ¬ãƒ³ã‚¸ãƒ»ä»˜ä¸ã‚¹ã‚­ãƒ«ç­‰ â˜…è¿½åŠ 
- è‰²åˆ†ã‘: å‹è€…ã«å¿œã˜ã¦è¡Œã®èƒŒæ™¯è‰²ã‚’å¤‰æ›´

### è©³ç´°è¡¨ç¤º

ãƒãƒƒãƒ—ã‚¢ãƒƒãƒ—ã‚¦ã‚£ãƒ³ãƒ‰ã‚¦ã¾ãŸã¯ã‚µã‚¤ãƒ‰ãƒ‘ãƒãƒ«ã§è¡¨ç¤ºã€‚
```
ãƒãƒˆãƒ«è©³ç´° #1234
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
æ”»æ’ƒå´: ã‚¢ãƒ¢ãƒ³
  æœ€çµ‚AP: 50 (+20)
  æ®‹HP: 25/30 (-5)
  ã‚¢ã‚¤ãƒ†ãƒ : ãƒ­ãƒ³ã‚°ã‚½ãƒ¼ãƒ‰
  ã‚¹ãƒšãƒ«: ãƒ‘ãƒ¯ãƒ¼ãƒ–ãƒ¼ã‚¹ãƒˆ
  ç™ºå‹•ã‚¹ã‚­ãƒ«: âœ“å…ˆåˆ¶æ”»æ’ƒ âœ“å¼·æ‰“
  ä»˜ä¸ã‚¹ã‚­ãƒ«: å¼·æ‰“ (ã‚¢ã‚¤ãƒ†ãƒ : ãƒã‚°ãƒãƒãƒ³ãƒãƒ¼) â˜…è¿½åŠ 

é˜²å¾¡å´: ãƒ•ã‚§ãƒ‹ãƒƒã‚¯ã‚¹
  æœ€çµ‚AP: 40
  æ®‹HP: 0/40 (-40)
  ã‚¢ã‚¤ãƒ†ãƒ : ãªã—
  ã‚¹ãƒšãƒ«: ãªã—
  ç™ºå‹•ã‚¹ã‚­ãƒ«: ãªã—
  ä»˜ä¸ã‚¹ã‚­ãƒ«: ãªã— â˜…è¿½åŠ 

ãƒãƒˆãƒ«æ¡ä»¶:
  ç™ºç”ŸåœŸåœ°: ğŸ”¥ç«
  æ”»æ’ƒå´ä¿æœ‰: ç«3 æ°´2 åœ°5 é¢¨1
  éš£æ¥: â˜‘

ãƒ€ãƒ¡ãƒ¼ã‚¸è©³ç´°:
  æ”»æ’ƒå´ â†’ é˜²å¾¡å´: 40ãƒ€ãƒ¡ãƒ¼ã‚¸
  é˜²å¾¡å´ â†’ æ”»æ’ƒå´: 5ãƒ€ãƒ¡ãƒ¼ã‚¸
```

### çµ±è¨ˆã‚µãƒãƒªãƒ¼

æŠ˜ã‚ŠãŸãŸã¿å¼ãƒ‘ãƒãƒ«ã€‚
```
ğŸ“Š çµ±è¨ˆã‚µãƒãƒªãƒ¼ [â–²éè¡¨ç¤º]
â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
ç·ãƒãƒˆãƒ«æ•°: 4,000
å®Ÿè¡Œæ™‚é–“: 6åˆ†42ç§’

å‹ç‡:
â”œâ”€ æ”»æ’ƒå´å‹åˆ©: 2,450 (61.3%)
â””â”€ é˜²å¾¡å´å‹åˆ©: 1,550 (38.8%)

Top 5 å‹ç‡:
1. ãƒ†ã‚£ã‚¢ãƒãƒˆ: 95.0%
2. ã‚¢ãƒ¢ãƒ³: 87.5%
3. ã‚·ã‚°ãƒ«ãƒ‰: 80.0%
...

ã‚¹ã‚­ãƒ«ç™ºå‹•çµ±è¨ˆ:
â”œâ”€ å…ˆåˆ¶æ”»æ’ƒ: 80.0% (800/1000)
â”œâ”€ å¼·æ‰“: 75.0% (450/600)
â””â”€ ç„¡åŠ¹åŒ–: 64.0% (320/500)

ã‚¹ã‚­ãƒ«ä»˜ä¸çµ±è¨ˆ: â˜…è¿½åŠ 
â”œâ”€ å¼·æ‰“: 450å›ä»˜ä¸ (ã‚¢ã‚¤ãƒ†ãƒ : 400, ã‚¹ãƒšãƒ«: 50)
â”œâ”€ å…ˆåˆ¶æ”»æ’ƒ: 200å›ä»˜ä¸ (ã‚¢ã‚¤ãƒ†ãƒ : 200, ã‚¹ãƒšãƒ«: 0)
â””â”€ å¾Œæ‰‹: 150å›ä»˜ä¸ (ã‚¢ã‚¤ãƒ†ãƒ : 150, ã‚¹ãƒšãƒ«: 0)
```

---

## æŠ€è¡“ä»•æ§˜

### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹è¦ä»¶

| é …ç›® | ç›®æ¨™å€¤ | è¨±å®¹å€¤ |
|------|--------|--------|
| ç·å®Ÿè¡Œæ™‚é–“ | 6-7åˆ† | 10åˆ†ä»¥å†… |
| 1ãƒãƒˆãƒ«å®Ÿè¡Œæ™‚é–“ | 10ms | 15ms |
| ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ | 10MB | 50MB |
| UIå¿œç­”æ€§ | ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–° | ãƒ•ãƒªãƒ¼ã‚ºãªã— |

### ä½¿ç”¨ã™ã‚‹Godotæ©Ÿèƒ½

- **UI**: Control, VBoxContainer, HBoxContainer, LineEdit, Button, OptionButton
- **ãƒ‡ãƒ¼ã‚¿**: RefCounted, Dictionary, Array
- **éåŒæœŸ**: await, Timer (ãƒ—ãƒ­ã‚°ãƒ¬ã‚¹ãƒãƒ¼æ›´æ–°ç”¨)
- **ãƒ•ã‚¡ã‚¤ãƒ«I/O**: FileAccess (CSVå‡ºåŠ›)

### ãƒ¡ãƒ¢ãƒªç®¡ç†æˆ¦ç•¥

1. **çµæœãƒ‡ãƒ¼ã‚¿ã®ä¿æŒ**
   - BattleTestResulté…åˆ—ã‚’ãƒ¡ãƒ¢ãƒªã«ä¿æŒ
   - 40,000ä»¶ Ã— 300ãƒã‚¤ãƒˆ = 12MBï¼ˆä»˜ä¸ã‚¹ã‚­ãƒ«æƒ…å ±è¿½åŠ ã«ã‚ˆã‚Šå¢—åŠ ï¼‰

2. **ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³**
   - è¡¨ç¤ºã¯20ä»¶ãšã¤
   - å…¨ãƒ‡ãƒ¼ã‚¿ã¯ä¿æŒã™ã‚‹ãŒã€è¡¨ç¤ºã¯éƒ¨åˆ†çš„

3. **ã‚¬ãƒ™ãƒ¼ã‚¸ã‚³ãƒ¬ã‚¯ã‚·ãƒ§ãƒ³**
   - BattleParticipantã¯ä½¿ã„æ¨ã¦
   - å„ãƒãƒˆãƒ«çµ‚äº†å¾Œã«è§£æ”¾

---

## åˆ¶ç´„äº‹é …

### æŠ€è¡“çš„åˆ¶ç´„

1. **Godotã®åˆ¶é™**
   - ãƒãƒ«ãƒã‚¹ãƒ¬ãƒƒãƒ‰éå¯¾å¿œï¼ˆãƒ¡ã‚¤ãƒ³ã‚¹ãƒ¬ãƒƒãƒ‰ã§å®Ÿè¡Œï¼‰
   - UIæ›´æ–°é »åº¦ã®åˆ¶é™

2. **æ—¢å­˜ã‚·ã‚¹ãƒ†ãƒ ã¸ã®ä¾å­˜**
   - BattleSystem, SkillSystem, SpellPhaseHandlerã«å®Œå…¨ä¾å­˜
   - ã“ã‚Œã‚‰ã®ãƒã‚°ã¯ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã«ã‚‚å½±éŸ¿

3. **ãƒ‡ãƒ¼ã‚¿åˆ¶ç´„**
   - ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼IDã¯æ—¢å­˜ãƒ‡ãƒ¼ã‚¿ã«å­˜åœ¨ã™ã‚‹å¿…è¦
   - ability_parsedãŒæ­£ã—ãå®šç¾©ã•ã‚Œã¦ã„ã‚‹å¿…è¦
   - item.jsonã¯äº‹å‰ä½œæˆãŒå¿…è¦ â˜…é‡è¦

### ä»•æ§˜ä¸Šã®åˆ¶é™

1. **ãƒ†ã‚¹ãƒˆç¯„å›²**
   - 1å¯¾1ã®ãƒãƒˆãƒ«ã®ã¿
   - è¤‡æ•°ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã®åŒæ™‚æˆ¦é—˜ã¯éå¯¾å¿œ

2. **ã‚¹ãƒšãƒ«åˆ¶é™**
   - 1å›ã®ãƒ†ã‚¹ãƒˆã§1ã¤ã®ã‚¹ãƒšãƒ«ã®ã¿
   - è¤‡æ•°ã‚¹ãƒšãƒ«ã®çµ„ã¿åˆã‚ã›ã¯éå¯¾å¿œ

3. **ã‚¢ã‚¤ãƒ†ãƒ åˆ¶é™**
   - ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼1ä½“ã«ã¤ã1ã‚¢ã‚¤ãƒ†ãƒ 
   - è¤‡æ•°ã‚¢ã‚¤ãƒ†ãƒ ã®åŒæ™‚è£…å‚™ã¯éå¯¾å¿œ

4. **ã‚¹ã‚­ãƒ«ä»˜ä¸åˆ¶é™** â˜…è¿½åŠ 
   - ã‚¢ã‚¤ãƒ†ãƒ ãƒ»ã‚¹ãƒšãƒ«ã§ä»˜ä¸ã§ãã‚‹ã‚¹ã‚­ãƒ«ã¯ `_grant_skill_to_participant()` ã§å®šç¾©ã•ã‚ŒãŸã‚‚ã®ã®ã¿
   - æ–°ã‚¹ã‚­ãƒ«è¿½åŠ æ™‚ã¯ BattleSystem ã®æ›´æ–°ãŒå¿…è¦

---

## æ›´æ–°å±¥æ­´

| æ—¥ä»˜ | å†…å®¹ | æ›´æ–°è€… |
|------|------|--------|
| 2025/10/18 | åˆç‰ˆä½œæˆ | AI |
| 2025/10/18 | ã‚¢ã‚¤ãƒ†ãƒ ãƒ»ã‚¹ãƒšãƒ«ã«ã‚ˆã‚‹ã‚¹ã‚­ãƒ«ä»˜ä¸æ©Ÿèƒ½ã‚’è¿½åŠ  | AI |

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ18æ—¥
