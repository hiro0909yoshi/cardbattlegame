# ドキュメント作成ルール

**作成日**: 2025年11月13日 | **バージョン**: 1.0

---

## 概要

このプロジェクト内で新しいドキュメントファイルを作成する際の統一ルール。  
設計の品質を保ち、メンテナンスを容易にするための基準。

---

## ファイル構成ルール

### ディレクトリ構成

```
docs/
├── design/
│   ├── spells/              # スペル関連設計
│   ├── battle/              # バトルシステム設計
│   ├── map/                 # マップシステム設計
│   ├── items/               # アイテムシステム設計
│   └── [その他システム]/
├── README.md                # プロジェクト全体ガイド
└── [その他共通ドキュメント]
```

### ファイル名規則

- **日本語**: `機能名.md`
  - 例: `ステータス増減.md`, `通行料呪い.md`
- **英語**: `feature_name.md`
  - 例: `effect_system.md`, `hp_structure.md`
- **統一**: 一つのファイルは一つの明確な機能/システムを扱う

---

## ドキュメント構造テンプレート

### 最小限の構成（シンプル設計用）

```markdown
# [機能名] 設計

**最終更新**: YYYY年MM月DD日 | **実装状況**: 🚧 設計中

---

## 概要

[機能の簡潔な説明。何をするのか、なぜ必要か]

**特徴**:
- [特徴1]
- [特徴2]
- [特徴3]

---

## 実装対象一覧

| 項目 | 説明 | パラメータ |
|------|------|----------|
| [対象1] | [説明] | [パラメータ] |
| [対象2] | [説明] | [パラメータ] |

---

## 詳細設計

[各項目の詳細説明]

### [サブシステム1]

[説明]

### [サブシステム2]

[説明]

---

## 実装チェックリスト

### Phase 1: [段階1]
- [ ] [項目1]
- [ ] [項目2]

### Phase 2: [段階2]
- [ ] [項目1]

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| YYYY/MM/DD | 1.0 | 初版作成 |

---

**作成日**: YYYY年MM月DD日
```

### 標準的な構成（複雑な設計用）

```markdown
# [機能名] 設計仕様書

**プロジェクト**: [プロジェクト名]
**作成日**: YYYY年MM月DD日
**更新日**: YYYY年MM月DD日
**バージョン**: 1.0
**ステータス**: [設計確定 / 設計中 / 実装予定]

---

## 📋 概要

[詳細な概要説明]

### 設計方針

- [方針1]
- [方針2]

### 重要な仕様決定

- [決定事項1]
- [決定事項2]

---

## [主要セクション1]

### サブセクション

[内容]

---

## [主要セクション2]

### サブセクション

[内容]

---

## 実装チェックリスト

### Phase 1: [段階1]
- [ ] [実装項目1]
- [ ] [実装項目2]

### Phase 2: [段階2]
- [ ] [実装項目1]

---

## トラブルシューティング

### [問題1]

**症状**: [症状説明]

**原因**: [原因説明]

**解決**: [解決方法]

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| YYYY/MM/DD | 1.0 | 初版作成 |

---

**最終更新**: YYYY年MM月DD日
```

---

## ヘッダー標準化ルール

### 最初の行（タイトル）

```markdown
# [機能名/システム名] [設計/仕様書/ガイド]
```

### メタ情報（2行目以降）

```markdown
**最終更新**: YYYY年MM月DD日 | **実装状況**: [ステータス]
```

### ステータス表記

- 🚧 設計中 - 設計がまだ確定していない
- ✅ 実装完了 - 実装済み、本番運用中
- ❌ 未実装 - 設計は確定しているが実装していない
- 🔄 改修中 - 既存実装の改修作業中
- 📋 設計確定 - 設計確定、実装待ち

---

## コンテンツ標準化ルール

### セクション順序（推奨）

1. **概要（必須）**
   - 簡潔な説明（3-5行）
   - 特徴をリスト表示

2. **実装対象一覧（機能が複数の場合）**
   - テーブル形式で整理
   - ID、名前、説明、パラメータを記載

3. **詳細設計（必須）**
   - 各システム/機能の詳細
   - データ構造、アーキテクチャ
   - コード例（必要な場合）

4. **実装チェックリスト（必須）**
   - 実装の段階的な計画
   - ☐ チェックボックス形式

5. **トラブルシューティング（推奨）**
   - よくある問題と解決方法
   - デバッグのコツ

6. **変更履歴（必須）**
   - 日付、バージョン、変更内容

7. **最終更新日（必須）**
   - ファイル末尾に記載

### テーブル形式

**実装対象の場合:**
```markdown
| ID | 名前 | 説明 | 期間 |
|----|------|------|------|
| 2061 | [名前] | [説明] | [期間] |
```

**アーキテクチャの場合:**
```markdown
| 項目 | 説明 | 実装ファイル |
|------|------|-----------|
| [コンポーネント] | [役割] | [ファイルパス] |
```

### コード例

- GDScript コードは ` ```gdscript ``` ` で囲む
- JSON データは ` ```json ``` ` で囲む
- パス、ファイル名は `` `バッククォート` `` で囲む
- 重要な説明は **太字** で強調
- 注釈は > ブロッククォートで記載

### リスト形式

**段落内リスト:**
```markdown
特徴には以下がある：フロー制御、効果管理、ターン処理。
```

**箇条書きリスト:**
```markdown
**特徴**:
- [特徴1]
- [特徴2]
```

---

## 命名規則

### ドキュメント内の用語

**統一する用語:**

| 項目 | 統一表記 | 説明 |
|------|--------|------|
| プレイヤー | セプター / プレイヤー | 文脈で使い分け（土地配置: セプター、API: プレイヤー） |
| 呪い | 呪い（くろい） | カタカナ表記は避ける |
| 効果 | 効果 / エフェクト | 統一して「効果」を使用 |
| ステータス | ステータス | HPやAPなど |
| スペル | スペル | 魔法カード全般 |

---

## リンク記載ルール

### 内部リンク

**参照ドキュメント:**
```markdown
詳細は `docs/design/effect_system.md` を参照してください。

- [効果システム設計](effect_system.md) - HP/AP管理構造の詳細
- [HP構造設計](hp_structure.md) - HP管理の仕組み
```

**参照セクション:**
```markdown
（同じファイル内）
## 詳細設計

参照: 上記の「アーキテクチャ」を参照。
```

### 外部参照

**GitHubやWebサイトへのリンク:**
```markdown
詳細は [公式ドキュメント](https://example.com) を参照。
```

---

## バージョン管理ルール

### バージョン番号

- **1.0**: 初版作成
- **1.1**: 軽微な追加・修正
- **2.0**: 大幅な仕様変更・重要な修正
- **2.1**: マイナーバージョンアップ

### 変更履歴の記載

```markdown
| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| 2025/11/13 | 1.0 | 初版作成 |
| 2025/11/14 | 1.1 | セクション追加、表現を改善 |
| 2025/11/15 | 2.0 | アーキテクチャ大幅変更 |
```

---

## 実装状況の更新ルール

### ドキュメント作成時

```markdown
**最終更新**: 2025年11月13日 | **実装状況**: 🚧 設計中
```

### 実装開始時

```markdown
**最終更新**: 2025年11月14日 | **実装状況**: 🔄 改修中
```

### 実装完了時

```markdown
**最終更新**: 2025年11月15日 | **実装状況**: ✅ 実装完了
```

### 実装チェックリスト

実装状況に応じて進行状況を記載：

```markdown
### Phase 1: [段階1]
- [x] 実装済み項目
- [ ] 未実装項目

### Phase 2: [段階2]
- [ ] 未着手
```

---

## 品質チェックリスト

新規ドキュメント作成時の確認項目：

### 構造チェック
- [ ] タイトルが明確か
- [ ] メタ情報（更新日、ステータス）が記載されているか
- [ ] 概要が3-5行で簡潔か
- [ ] セクション構成が論理的か

### 内容チェック
- [ ] 重複する説明がないか
- [ ] リンク先は正しいか
- [ ] テーブル、リスト形式は統一されているか
- [ ] コード例は実装に対応しているか

### 表現チェック
- [ ] 日本語の表記ゆれがないか
- [ ] 専門用語は統一されているか
- [ ] 言い切りの文体で統一されているか
- [ ] 長すぎる段落がないか（1段落3-5文程度）

### メタデータチェック
- [ ] 変更履歴が記載されているか
- [ ] 最終更新日が記載されているか
- [ ] ファイル名は規則に従っているか

---

## ファイルサイズの目安

### 推奨サイズ

- **シンプル設計**: 500-1,000行
- **標準設計**: 1,000-2,000行
- **複雑設計**: 2,000-3,000行

### 大きすぎる場合

ファイルが3,000行を超える場合は、以下を検討：

1. **分割**: 関連機能ごとにファイルを分割
2. **階層化**: ディレクトリを作成して整理
3. **リンク**: 詳細は別ドキュメントに記載

---

## よくある間違い

### ❌ してはいけないこと

1. **複数の異なるシステムを1ファイルに混在させる**
   - ✅ 正しい: 1ファイル = 1機能/システム

2. **実装コードをコピー＆ペーストしない**
   - ✅ 正しい: 仕様を記載し、実装の理由を説明

3. **バージョンを記載しない**
   - ✅ 正しい: 常に日付とバージョン番号を記載

4. **変更履歴を更新しない**
   - ✅ 正しい: 修正のたびに変更履歴を更新

5. **内部リンクを記載しない**
   - ✅ 正しい: 関連ドキュメントへのリンクを記載

### ⚠️ 注意すること

1. **日本語の統一**
   - カタカナ表記の統一（「セプター」vs「プレイヤー」）
   - 敬体と常体の混在を避ける

2. **テーブルの統一性**
   - 同じ種類のテーブルは同じフォーマット
   - ヘッダー行は常に同じ項目数

3. **コード例の実装対応**
   - コード例は実装と同期させる
   - 古いコードは削除または「参考（旧実装）」と記載

---

## まとめ

### 作成ルール 5つのポイント

1. **ファイルは1機能/システムごと** - 整理しやすい
2. **統一された構造** - 他の人が読みやすい
3. **日付とバージョン記載** - メンテナンスが容易
4. **変更履歴を更新** - 過去の決定理由を追跡可能
5. **内部リンク記載** - ドキュメント間の関係性が明確

---

**作成日**: 2025年11月13日
