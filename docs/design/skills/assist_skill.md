# 援護スキル

**バージョン**: 1.0  
**最終更新**: 2025年10月24日

---

## 📋 目次

1. [概要](#概要)
2. [発動条件](#発動条件)
3. [効果](#効果)
4. [援護対象属性](#援護対象属性)
5. [UI動作](#ui動作)
6. [コスト計算](#コスト計算)
7. [実装済みクリーチャー](#実装済みクリーチャー)
8. [使用例](#使用例)
9. [戦略的価値](#戦略的価値)
10. [実装メモ](#実装メモ)

---

## 概要

アイテムフェーズ時に、**手札のクリーチャーカードをアイテムのように使用**して、バトル参加クリーチャーのAP/HPを加算できるスキル。

---

## 発動条件

- バトル参加クリーチャーが援護スキルを持っている
- アイテムフェーズ時に手札に対象クリーチャーがある
- 使用クリーチャーのコスト分の魔力を消費

---

## 効果

1. **AP加算**: 援護クリーチャーのAPをバトル参加クリーチャーに加算
2. **HP加算**: 援護クリーチャーのHPをバトル参加クリーチャーに加算
3. **スキル非継承**: 援護クリーチャーのスキルは継承されない
4. **カード消費**: 使用した援護クリーチャーは捨て札に

---

## 援護対象属性

援護スキルには対象属性が指定されており、その属性のクリーチャーのみ援護可能：

### パターン1: 全属性対応

```json
{
  "援護": {
	"target_elements": ["all"]
  }
}
```

### パターン2: 特定属性のみ

```json
{
  "援護": {
	"target_elements": ["fire", "earth"]
  }
}
```

### 対象パターン

- **全属性対応** (`["all"]`): どの属性のクリーチャーでも援護可能
- **特定属性のみ**: 指定された属性のクリーチャーのみ援護可能

---

## UI動作

### アイテムフェーズ時

1. バトル参加クリーチャーに援護スキルがある場合
2. フェーズラベル: 「アイテムまたは援護クリーチャーを選択」
3. 手札の表示:
   - **アイテムカード**: 選択可能（グレーアウトなし）
   - **援護対象クリーチャー**: 選択可能（グレーアウトなし）
   - **その他のカード**: グレーアウト（選択不可）

---

## コスト計算

- **援護クリーチャーのコスト**: mp値をそのまま魔力消費（等倍）
- 例: 75MPのクリーチャーを援護に使用 → 75G消費

---

## 実装済みクリーチャー

**合計18体** が援護スキルを持っています。

### 属性別分布

- 🔥 火属性: 2体（シャラザード、バルキリー）
- 🌊 水属性: 2体（アクアデューク、ブラッドプリン）
- 💨 風属性: 1体（アームドプリンセス）
- 🌍 地属性: 10体（ウッドフォーク、オドラデク、セージなど）
- ⚪ 無属性: 3体（アンドロギア、グランギア、スカイギア）

### 援護対象別

- **全属性対応**: 5体（28%）
  - ウッドフォーク (ID:202)
  - オドラデク (ID:203)
  - セージ (ID:225)
  - グランギア (ID:409)
  - スカイギア (ID:419)
- **特定属性のみ**: 13体（72%）

**詳細リスト**: プロジェクトルートの `/docs/reference/assist_creatures_list.md` を参照

---

## 使用例

### シナリオ1: 基本的な使用

```
1. バルキリー（AP:30 HP:30、援護[無火地]）でバトル開始
2. アイテムフェーズで手札のピュトン（AP:20 HP:30、火属性）を選択
3. コスト75G消費してピュトンを援護に使用
4. バルキリーのステータスが AP:50 HP:60 に上昇
5. ピュトンは捨て札へ
6. 強化されたバルキリーでバトル実行
```

### シナリオ2: 属性制限

```
1. シャラザード（援護[火地]）でバトル開始
2. 手札: ピュトン（火）、グランギア（無）、ウッドフォーク（地）
3. UI表示:
   - ピュトン: 選択可能（火属性）
   - ウッドフォーク: 選択可能（地属性）
   - グランギア: グレーアウト（無属性は対象外）
```

---

## 戦略的価値

### メリット

1. **瞬間火力**: 手札のクリーチャーを犠牲に即座にパワーアップ
2. **柔軟性**: アイテムがない場合でもクリーチャーで代用可能
3. **リソース活用**: 使わないクリーチャーを有効活用

### デメリット

1. **カード消費**: 使用したクリーチャーは失われる
2. **コスト**: クリーチャーのコスト分の魔力が必要
3. **スキル非継承**: 強力なスキル持ちでも能力は引き継がれない

---

## 実装メモ

### 実装ファイル

- `scripts/game_flow/item_phase_handler.gd` - 援護判定とカード選択
- `scripts/battle/battle_preparation.gd` - 援護効果の適用
- `scripts/ui_components/hand_display.gd` - グレーアウト制御
- `scripts/ui_components/card_selection_ui.gd` - 選択可能判定

### 実装日

2025年10月24日

---

## 変更履歴

| 日付 | バージョン | 変更内容 |
|------|-----------|---------|
| 2025/10/24 | 1.0 | 個別ドキュメントとして分離 |
