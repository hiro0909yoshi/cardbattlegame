# æ„Ÿå¿œã‚¹ã‚­ãƒ«

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ã‚«ãƒ«ãƒ‰ã‚»ãƒ—ãƒˆé¢¨ã‚«ãƒ¼ãƒ‰ãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ   
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.6  
**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ25æ—¥

---

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [ç™ºå‹•æ¡ä»¶](#ç™ºå‹•æ¡ä»¶)
3. [åŠ¹æœãƒ‘ã‚¿ãƒ¼ãƒ³](#åŠ¹æœãƒ‘ã‚¿ãƒ¼ãƒ³)
4. [å®Ÿè£…æ¸ˆã¿ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼](#å®Ÿè£…æ¸ˆã¿ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼)
5. [HPã®æ‰±ã„](#hpã®æ‰±ã„)
6. [å¼·æ‰“ã¨ã®ç›¸ä¹—åŠ¹æœ](#å¼·æ‰“ã¨ã®ç›¸ä¹—åŠ¹æœ)
7. [é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°](#é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°)
8. [å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹](#å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹)

---

## æ¦‚è¦

ç‰¹å®šå±æ€§ã®åœŸåœ°ã‚’1ã¤ã§ã‚‚æ‰€æœ‰ã—ã¦ã„ã‚Œã°ã€APã‚„HPãŒä¸Šæ˜‡ã™ã‚‹ãƒ‘ãƒƒã‚·ãƒ–ã‚¹ã‚­ãƒ«ã€‚

---

## ç™ºå‹•æ¡ä»¶

- æŒ‡å®šã•ã‚ŒãŸå±æ€§ã®åœŸåœ°ã‚’ **1ã¤ä»¥ä¸Šæ‰€æœ‰**
- åœŸåœ°ã®ãƒ¬ãƒ™ãƒ«ã‚„æ•°ã¯ä¸å•ï¼ˆç„¡æ¡ä»¶ç™ºå‹•ï¼‰
- ãƒãƒˆãƒ«ç™ºç”Ÿæ™‚ã«è‡ªå‹•åˆ¤å®š

---

## åŠ¹æœãƒ‘ã‚¿ãƒ¼ãƒ³

### ãƒ‘ã‚¿ãƒ¼ãƒ³1: AP+|AP&HP+X

APã¨HPãŒåŒæ™‚ä¸Šæ˜‡ã™ã‚‹

```json
{
  "æ„Ÿå¿œ": {
	"element": "fire",
	"stat_bonus": {
	  "ap": 20,
	  "hp": 20
	}
  }
}
```

### ãƒ‘ã‚¿ãƒ¼ãƒ³2: AP+|AP&HPXã€HP+Y

APã¨HPãŒå€‹åˆ¥ã«ä¸Šæ˜‡ã™ã‚‹

```json
{
  "æ„Ÿå¿œ": {
	"element": "water",
	"stat_bonus": {
	  "ap": 10,
	  "hp": 20
	}
  }
}
```

---

## å®Ÿè£…æ¸ˆã¿ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼

æ„Ÿå¿œã‚¹ã‚­ãƒ«ã‚’æŒã¤ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã¯å…¨éƒ¨ã§ **9ä½“** ã„ã¾ã™ã€‚

| ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼å | å±æ€§ | å¿…è¦åœŸåœ° | åŠ¹æœ |
|--------------|------|---------|------|
| ã‚¢ãƒ¢ãƒ³ | ç« | [åœ°] | AP+|AP&HP+20 |
| ãƒ ã‚·ãƒ¥ãƒ•ã‚·ãƒ¥ | ç« | [åœ°] | AP+|AP&HP20ã€HP+10 |
| ã‚ªãƒ‰ãƒ³ãƒˆãƒ†ã‚£ãƒ©ãƒŒã‚¹ | æ°´ | [é¢¨] | AP+|AP&HP20ã€HP+10 |
| ã‚´ãƒ¼ã‚¹ãƒˆã‚·ãƒƒãƒ— | æ°´ | [é¢¨] | HP+30 |
| ã‚­ãƒªãƒ³ | é¢¨ | [æ°´] | AP+|AP&HP+20 |
| ã‚¯ãƒ¼ãƒ»ã‚·ãƒ¼ | é¢¨ | [æ°´] | AP+|AP&HP10ã€HP+20 |
| ã‚¯ãƒ• | é¢¨ | [æ°´] | AP+|AP&HP30 |
| ã‚°ãƒ­ã‚¦ãƒ›ãƒ¼ãƒ³ | åœ° | [ç«] | AP+|AP&HP+20 |
| ãƒ¢ãƒ«ãƒ¢ | åœ° | [ç«] | AP+|AP&HP30 |

---

## HPã®æ‰±ã„

### æ ¼ç´å ´æ‰€

æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹HPã¯ `BattleParticipant.resonance_bonus_hp` ã«æ ¼ç´ã•ã‚Œã¾ã™ã€‚

```gdscript
# æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹é©ç”¨
participant.resonance_bonus_hp += 30
participant.update_current_hp()

# è¡¨ç¤ºHP = åŸºæœ¬HP + æ„Ÿå¿œHP + åœŸåœ°HP + ...
# ä¾‹: 30 + 30 + 20 = 80
```

### ãƒ€ãƒ¡ãƒ¼ã‚¸æ¶ˆè²»é †åº

æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹HPã¯ **æœ€å„ªå…ˆã§æ¶ˆè²»** ã•ã‚Œã¾ã™ã€‚

è©³ç´°ã¯[BattleParticipantã¨HPç®¡ç†](../skills_design.md#battleparticipantã¨hpç®¡ç†)ã‚’å‚ç…§ã—ã¦ãã ã•ã„ã€‚

---

## å¼·æ‰“ã¨ã®ç›¸ä¹—åŠ¹æœ

æ„Ÿå¿œã§APãŒä¸Šæ˜‡ã—ãŸå¾Œã€å¼·æ‰“ã‚¹ã‚­ãƒ«ãŒé©ç”¨ã•ã‚Œã‚‹ãŸã‚ã€ç›¸ä¹—åŠ¹æœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

```
åŸºæœ¬AP: 20
  â†“ æ„Ÿå¿œ[ç«]+30
AP: 50
  â†“ å¼·æ‰“Ã—1.5
AP: 75
```

ã“ã‚Œã«ã‚ˆã‚Šã€æ„Ÿå¿œã¨å¼·æ‰“ã®ä¸¡æ–¹ã‚’æŒã¤ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã¯å¤§å¹…ãªç«åŠ›å¼·åŒ–ãŒå¯èƒ½ã§ã™ã€‚

---

## é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **é–¢æ•°**: `BattleSystem._apply_resonance_skill()`
- **ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ãƒãƒˆãƒ«æº–å‚™æ®µéšï¼ˆ`_apply_pre_battle_skills()`å†…ï¼‰
- **åˆ¤å®š**: ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®åœŸåœ°æ‰€æœ‰çŠ¶æ³ã‚’`board_system.get_player_lands_by_element()`ã§å–å¾—

### é©ç”¨é †åº

æ„Ÿå¿œã‚¹ã‚­ãƒ«ã¯ä»¥ä¸‹ã®é †åºã§ãƒãƒˆãƒ«ãƒ•ãƒ­ãƒ¼ã«çµ„ã¿è¾¼ã¾ã‚Œã¾ã™ï¼š

```
1. æ„Ÿå¿œã‚¹ã‚­ãƒ«é©ç”¨ 
2. åœŸåœ°æ•°æ¯”ä¾‹åŠ¹æœ
3. å¼·æ‰“ã‚¹ã‚­ãƒ«ï¼ˆæ„Ÿå¿œé©ç”¨å¾Œã®APã‚’åŸºæº–ã«è¨ˆç®—ï¼‰
4. 2å›æ”»æ’ƒåˆ¤å®š
5. æ”»æ’ƒã‚·ãƒ¼ã‚±ãƒ³ã‚¹å®Ÿè¡Œ
```

**æ³¨**: å·»ç‰©æ”»æ’ƒï¼ˆå·»ç‰©å¼·æ‰“ã‚’é™¤ãï¼‰ã®å ´åˆã€æ„Ÿå¿œã‚¹ã‚­ãƒ«ã¯é©ç”¨ã•ã‚Œã¾ã›ã‚“ã€‚

---

## å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹

```gdscript
func _apply_resonance_skill(participant: BattleParticipant, context: Dictionary) -> void:
	var ability_parsed = participant.creature_data.get("ability_parsed", {})
	var keywords = ability_parsed.get("keywords", [])
	
	if not "æ„Ÿå¿œ" in keywords:
		return
	
	var keyword_conditions = ability_parsed.get("keyword_conditions", {})
	var resonance_condition = keyword_conditions.get("æ„Ÿå¿œ", {})
	
	var required_element = resonance_condition.get("element", "")
	var player_lands = context.get("player_lands", {})
	var owned_count = player_lands.get(required_element, 0)
	
	if owned_count > 0:
		var stat_bonus = resonance_condition.get("stat_bonus", {})
		var ap_bonus = stat_bonus.get("ap", 0)
		var hp_bonus = stat_bonus.get("hp", 0)
		
		if ap_bonus > 0:
			participant.current_ap += ap_bonus
		
		if hp_bonus > 0:
			participant.resonance_bonus_hp += hp_bonus
			participant.update_current_hp()
```

---

## å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ |
|-----------|------|---------|
| 1.5 | 2025/10/24 | å€‹åˆ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã—ã¦åˆ†é›¢ |
| 1.6 | 2025/10/25 | é©ç”¨é †åºã‚’ä¿®æ­£ï¼ˆå·»ç‰©æ”»æ’ƒã¨ã®é–¢ä¿‚ã‚’æ˜è¨˜ï¼‰ |
