# å¼·åŒ–ã‚¹ã‚­ãƒ«

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ã‚«ãƒ«ãƒ‰ã‚»ãƒ—ãƒˆé¢¨ã‚«ãƒ¼ãƒ‰ãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ   
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.6  
**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ31æ—¥

---

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [åŠ¹æœ](#åŠ¹æœ)
3. [ä¸»ãªæ¡ä»¶ã‚¿ã‚¤ãƒ—](#ä¸»ãªæ¡ä»¶ã‚¿ã‚¤ãƒ—)
4. [é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°](#é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°)
5. [å…±é³´ã¨ã®ç›¸ä¹—åŠ¹æœ](#å…±é³´ã¨ã®ç›¸ä¹—åŠ¹æœ)
6. [ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹å¼·åŒ–ä»˜ä¸](#ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹å¼·åŒ–ä»˜ä¸)
7. [å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹](#å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹)
8. [ä½¿ç”¨ä¾‹](#ä½¿ç”¨ä¾‹)

---

## æ¦‚è¦

ç‰¹å®šæ¡ä»¶ä¸‹ã§APã‚’å¢—å¹…ã™ã‚‹ãƒ‘ãƒƒã‚·ãƒ–ã‚¹ã‚­ãƒ«ã€‚

---

## åŠ¹æœ

APã«ä¹—æ•°ã‚’ã‹ã‘ã¦å¢—å¹…ã—ã¾ã™ã€‚

- **ä¸€èˆ¬çš„ãªä¹—æ•°**: Ã—1.5

---

## ä¸»ãªæ¡ä»¶ã‚¿ã‚¤ãƒ—

å¼·åŒ–ã‚¹ã‚­ãƒ«ã¯æ§˜ã€…ãªæ¡ä»¶ã§ç™ºå‹•ã—ã¾ã™ã€‚

### 1. éš£æ¥è‡ªãƒ‰ãƒŸãƒ‹ã‚ªæ¡ä»¶ (adjacent_ally_land)

ãƒãƒˆãƒ«ç™ºç”Ÿã‚¿ã‚¤ãƒ«ã®éš£æ¥ã«è‡ªåˆ†ã®åœŸåœ°ãŒã‚ã‚‹å ´åˆã«ç™ºå‹•ã€‚

```json
{
  "effects": [{
	"effect_type": "power_strike",
	"multiplier": 1.5,
	"conditions": [
	  {"condition_type": "adjacent_ally_land"}
	]
  }]
}
```

**å®Ÿè£…ä¾‹**:
- **ãƒ­ãƒ¼ãƒ³ãƒ“ãƒ¼ã‚¹ãƒˆ** (ID: 49) - éš£æ¥è‡ªãƒ‰ãƒŸãƒ‹ã‚ªã§å¼·åŒ–Ã—1.5

---

### 2. åœŸåœ°å±æ€§æ¡ä»¶ (on_element_land)

ç‰¹å®šå±æ€§ã®åœŸåœ°ã§ãƒãƒˆãƒ«ã™ã‚‹å ´åˆã«ç™ºå‹•ã€‚

```json
{
  "effects": [{
	"effect_type": "power_strike",
	"multiplier": 2.0,
	"conditions": [
	  {
		"condition_type": "on_element_land",
		"element": "fire"
	  }
	]
  }]
}
```
---

### 3. åœŸåœ°ãƒ¬ãƒ™ãƒ«æ¡ä»¶ (land_level_check)

åœŸåœ°ãƒ¬ãƒ™ãƒ«ãŒç‰¹å®šå€¤ä»¥ä¸Š/ä»¥ä¸‹ã§ç™ºå‹•ã€‚

```json
{
  "effects": [{
	"effect_type": "power_strike",
	"multiplier": 1.5,
	"conditions": [
	  {
		"condition_type": "land_level_check",
		"operator": ">=",
		"value": 3
	  }
	]
  }]
}
```

**å¯¾å¿œæ¼”ç®—å­**:
- `>=`: ä»¥ä¸Š
- `>`: ã‚ˆã‚Šå¤§ãã„
- `<=`: ä»¥ä¸‹
- `<`: ã‚ˆã‚Šå°ã•ã„
- `==`: ç­‰ã—ã„

---

## é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°

- **é–¢æ•°**: `EffectCombat.apply_power_strike()`
- **ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: å…±é³´ã‚¹ã‚­ãƒ«é©ç”¨å¾Œï¼ˆ`_apply_skills()`å†…ï¼‰
- **é‡è¦**: **å…±é³´ã§ä¸Šæ˜‡ã—ãŸAPã‚’åŸºæº–ã«è¨ˆç®—ã•ã‚Œã‚‹**

### é©ç”¨é †åº

```
1. é¼“èˆã‚¹ã‚­ãƒ«é©ç”¨
2. è¡“æ”»æ’ƒåˆ¤å®š
3. å…±é³´ã‚¹ã‚­ãƒ«é©ç”¨
4. åœŸåœ°æ•°æ¯”ä¾‹åŠ¹æœ
5. å¼·åŒ–ã‚¹ã‚­ãƒ«é©ç”¨ â† ã“ã“ï¼ˆå…±é³´å¾Œã®APã‚’åŸºæº–ï¼‰
6. 2å›æ”»æ’ƒåˆ¤å®š
7. æ”»æ’ƒã‚·ãƒ¼ã‚±ãƒ³ã‚¹å®Ÿè¡Œ
```

---

## å…±é³´ã¨ã®ç›¸ä¹—åŠ¹æœ

å¼·åŒ–ã‚¹ã‚­ãƒ«ã¯å…±é³´ã®**å¾Œ**ã«é©ç”¨ã•ã‚Œã‚‹ãŸã‚ã€ç›¸ä¹—åŠ¹æœãŒå¾—ã‚‰ã‚Œã¾ã™ã€‚

### è¨ˆç®—ä¾‹

```gdscript
# å…ƒã®AP
var base_ap = 20

# 1. å…±é³´é©ç”¨
base_ap += 30  # â†’ 50

# 2. å¼·åŒ–é©ç”¨ï¼ˆå…±é³´å¾Œã®APãŒåŸºæº–ï¼‰
base_ap *= 1.5  # â†’ 75
```

## ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹å¼·åŒ–ä»˜ä¸

ğŸ†• **Phase 1-Aå®Ÿè£…**: ã‚¢ã‚¤ãƒ†ãƒ ã§ä¸€æ™‚çš„ã«å¼·åŒ–ã‚¹ã‚­ãƒ«ã‚’ä»˜ä¸å¯èƒ½

### ä»˜ä¸æ¡ä»¶ã¨ç™ºå‹•æ¡ä»¶ã®é•ã„

```json
{
  "effect_type": "grant_skill",
  "skill": "å¼·åŒ–",
  "condition": {
	"condition_type": "user_element",
	"elements": ["fire"]
  }
}
```

- **ä»˜ä¸æ¡ä»¶** (`condition`): ç«å±æ€§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãŒä½¿ç”¨ã—ãŸå ´åˆã®ã¿ã‚¹ã‚­ãƒ«ä»˜ä¸
- **ç™ºå‹•æ¡ä»¶**: ä»˜ä¸ã•ã‚ŒãŸå¼·åŒ–ã¯**ç„¡æ¡ä»¶ã§ç™ºå‹•**ï¼ˆãƒãƒˆãƒ«æ™‚ã®æ¡ä»¶ãƒã‚§ãƒƒã‚¯ãªã—ï¼‰

### å®Ÿè£…ä¾‹: ãƒã‚°ãƒãƒãƒ³ãƒãƒ¼ (ID: 1062)

```json
{
  "id": 1062,
  "name": "ãƒã‚°ãƒãƒãƒ³ãƒãƒ¼",
  "type": "item",
  "cost": {"mp": 20},
  "effect": "AP+20ï¼›ğŸ’§ğŸŒ±ä½¿ç”¨æ™‚ã€å¼·åŒ–",
  "ability_parsed": {
	"effects": [
	  {"effect_type": "buff_ap", "value": 20},
	  {
		"effect_type": "grant_skill",
		"skill": "å¼·åŒ–",
		"condition": {
		  "condition_type": "user_element",
		  "elements": ["fire"]
		}
	  }
	]
  }
}
```

### å‡¦ç†ãƒ•ãƒ­ãƒ¼

```
1. ã‚¢ã‚¤ãƒ†ãƒ ãƒ•ã‚§ãƒ¼ã‚ºã§ãƒã‚°ãƒãƒãƒ³ãƒãƒ¼é¸æŠ
   â†“
2. æ¡ä»¶ãƒã‚§ãƒƒã‚¯ï¼ˆuser_element: fireï¼‰
   â”œâ”€ ç«å±æ€§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ â†’ ä»˜ä¸
   â””â”€ ãã®ä»–å±æ€§ â†’ ã‚¹ã‚­ãƒƒãƒ—
   â†“
3. ã‚¹ã‚­ãƒ«ä»˜ä¸
   â”œâ”€ keywordsé…åˆ—ã«ã€Œå¼·åŒ–ã€è¿½åŠ 
   â””â”€ effectsé…åˆ—ã«å¼·åŒ–åŠ¹æœè¿½åŠ 
	   {
		 "effect_type": "power_strike",
		 "multiplier": 1.5,
		 "conditions": []  // ç„¡æ¡ä»¶ã§ç™ºå‹•
	   }
   â†“
4. ãƒãƒˆãƒ«æ™‚ã«å¼·åŒ–ç™ºå‹•
   AP Ã— 1.5
```

### å®Ÿè£…ã‚¯ãƒ©ã‚¹

- `BattleSystem._apply_item_effects()` - ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœé©ç”¨
- `BattleSystem._grant_skill_to_participant()` - ã‚¹ã‚­ãƒ«ä»˜ä¸
- `BattleSystem._check_skill_grant_condition()` - ä»˜ä¸æ¡ä»¶ãƒã‚§ãƒƒã‚¯

---

## å®Ÿè£…ã‚³ãƒ¼ãƒ‰ä¾‹

```gdscript
func apply_power_strike(creature_data: Dictionary, context: Dictionary) -> Dictionary:
	var ability_parsed = creature_data.get("ability_parsed", {})
	var effects = ability_parsed.get("effects", [])
	
	var modified_data = creature_data.duplicate()
	var current_ap = modified_data.get("ap", 0)
	
	for effect in effects:
		if effect.get("effect_type") == "power_strike":
			var conditions = effect.get("conditions", [])
			
			# æ¡ä»¶ãƒã‚§ãƒƒã‚¯
			var all_conditions_met = true
			for condition in conditions:
				if not evaluate_condition(condition, context):
					all_conditions_met = false
					break
			
			# æ¡ä»¶ã‚’æº€ãŸã—ã¦ã„ã‚Œã°APå¢—å¹…
			if all_conditions_met:
				var multiplier = effect.get("multiplier", 1.0)
				current_ap = int(current_ap * multiplier)
	
	modified_data["ap"] = current_ap
	return modified_data
```

---

## ä½¿ç”¨ä¾‹

### ã‚·ãƒŠãƒªã‚ª1: éš£æ¥è‡ªãƒ‰ãƒŸãƒ‹ã‚ªæ¡ä»¶

```
æ”»æ’ƒå´: ãƒ­ãƒ¼ãƒ³ãƒ“ãƒ¼ã‚¹ãƒˆï¼ˆAP:30ã€å¼·åŒ–Ã—1.5[éš£æ¥è‡ªãƒ‰ãƒŸãƒ‹ã‚ª]ï¼‰
ãƒãƒˆãƒ«ã‚¿ã‚¤ãƒ«: 45ç•ª
éš£æ¥ã‚¿ã‚¤ãƒ«: [38, 44, 46, 52, 53, 54]

è‡ªãƒ‰ãƒŸãƒ‹ã‚ªçŠ¶æ³:
- 38ç•ª: æ”»æ’ƒå´ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ âœ“
- 44ç•ª: ç©ºãåœ°
- 46ç•ª: ç›¸æ‰‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼
- 52ç•ª: ç©ºãåœ°
- 53ç•ª: ç©ºãåœ°
- 54ç•ª: ç›¸æ‰‹ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼

çµæœ:
- éš£æ¥ã«è‡ªãƒ‰ãƒŸãƒ‹ã‚ªã‚ã‚Š â†’ å¼·åŒ–ç™ºå‹•
- AP: 30 Ã— 1.5 = 45
```

### ã‚·ãƒŠãƒªã‚ª2: ã‚¢ã‚¤ãƒ†ãƒ ã«ã‚ˆã‚‹å¼·åŒ–ä»˜ä¸

```
æ”»æ’ƒå´: ãƒ•ã‚§ã‚¤ï¼ˆç«å±æ€§ã€AP:20ï¼‰
ã‚¢ã‚¤ãƒ†ãƒ : ãƒã‚°ãƒãƒãƒ³ãƒãƒ¼ï¼ˆAP+20ã€ç«å±æ€§ä½¿ç”¨æ™‚å¼·åŒ–ï¼‰

1. ã‚¢ã‚¤ãƒ†ãƒ ãƒ•ã‚§ãƒ¼ã‚º
   - ãƒ•ã‚§ã‚¤ã¯ç«å±æ€§ â†’ æ¡ä»¶æº€ãŸã™
   - ãƒã‚°ãƒãƒãƒ³ãƒãƒ¼ä½¿ç”¨
   
2. åŠ¹æœé©ç”¨
   - AP+20: 20 â†’ 40
   - å¼·åŒ–ä»˜ä¸ï¼ˆÃ—1.5ã€ç„¡æ¡ä»¶ï¼‰
   
3. ãƒãƒˆãƒ«
   - å¼·åŒ–ç™ºå‹•: 40 Ã— 1.5 = 60
   
â†’ æœ€çµ‚AP: 60
```

---

## æˆ¦ç•¥çš„ä¾¡å€¤

### ãƒ¡ãƒªãƒƒãƒˆ
1. **é«˜ç«åŠ›**: æ¡ä»¶ã‚’æº€ãŸã›ã°å¤§å¹…ãªæ”»æ’ƒåŠ›å¢—å¼·
2. **ç›¸ä¹—åŠ¹æœ**: å…±é³´ã¨çµ„ã¿åˆã‚ã›ã‚‹ã“ã¨ã§ã•ã‚‰ã«å¼·åŠ›ã«
3. **æŸ”è»Ÿæ€§**: æ§˜ã€…ãªæ¡ä»¶ã§ç™ºå‹•å¯èƒ½

### ãƒ‡ãƒ¡ãƒªãƒƒãƒˆ
1. **æ¡ä»¶ä¾å­˜**: æ¡ä»¶ã‚’æº€ãŸã•ãªã„ã¨ç™ºå‹•ã—ãªã„
2. **é…ç½®æˆ¦ç•¥**: éš£æ¥è‡ªãƒ‰ãƒŸãƒ‹ã‚ªæ¡ä»¶ã®å ´åˆã€é…ç½®å ´æ‰€ãŒé‡è¦
3. **å¯¾ç­–ã•ã‚Œã‚„ã™ã„**: ç›¸æ‰‹ã«æ¡ä»¶ã‚’èª­ã¾ã‚Œã‚‹ã¨å›é¿ã•ã‚Œã‚‹

---

## å¤‰æ›´å±¥æ­´

| ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | æ—¥ä»˜ | å¤‰æ›´å†…å®¹ |
|-----------|------|---------|
| 1.5 | 2025/10/24 | å€‹åˆ¥ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã¨ã—ã¦åˆ†é›¢ |
