# HP ãƒªãƒ•ã‚¡ã‚¯ã‚¿ãƒªãƒ³ã‚° - æœ€çµ‚å®Œæˆç‰ˆ (2025-11-20)

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: cardbattlegame  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… **å®Œå…¨å®Œäº†**  
**æœ€çµ‚æ›´æ–°**: 2025-11-20

---

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

### ç›®çš„
HPç®¡ç†ã‚·ã‚¹ãƒ†ãƒ ã‚’ã€Œè¨ˆç®—å€¤ã€ã‹ã‚‰ã€ŒçŠ¶æ…‹å€¤ã€ã¸å¤‰æ›´ã—ã€ã‚ˆã‚Šæ­£ç¢ºã§ã‚·ãƒ³ãƒ—ãƒ«ãªHPç®¡ç†ã‚’å®Ÿç¾

### å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«æ•°
- ä¿®æ­£ãƒ•ã‚¡ã‚¤ãƒ«: 11å€‹
- ä¿®æ­£ç®‡æ‰€: ç´„50ç®‡æ‰€
- å‰Šé™¤è¡Œæ•°: ç´„100è¡Œï¼ˆupdate_current_hp() å‘¼ã³å‡ºã—ï¼‰
- æ–°è¦è¿½åŠ : 1é–¢æ•°ï¼ˆEffectManager.apply_max_hp_effect()ï¼‰

---

## âœ… å®Ÿè£…å®Œäº†å†…å®¹

### Phase 1-5: ãƒãƒˆãƒ«ã‚·ã‚¹ãƒ†ãƒ å´

#### Phase 1: BattleParticipant ã‚¯ãƒ©ã‚¹ï¼ˆæ—¢ã«æ–°æ–¹å¼ï¼‰
âœ… **çŠ¶æ…‹**: å®Œäº†  
- `current_hp` ã‚’çŠ¶æ…‹å€¤ã¨ã—ã¦å®Ÿè£…
- ãƒ€ãƒ¡ãƒ¼ã‚¸ã¯ `current_hp` ã‹ã‚‰ç›´æ¥å‰Šã‚‰ã‚Œã‚‹
- è¨ˆç®—ãƒ­ã‚¸ãƒƒã‚¯ã¯å‰Šé™¤æ¸ˆã¿

#### Phase 2: battle_preparation.gd - é˜²å¾¡å´HPåˆæœŸåŒ–
âœ… **çŠ¶æ…‹**: å®Œäº†  
**ä¿®æ­£å†…å®¹**:
- é˜²å¾¡å´ current_hp ã‚’æ­£ç¢ºã«åˆæœŸåŒ–
- land_bonus_hp ã‚’å«ã‚ãŸMHPè¨ˆç®—

#### Phase 3: ãƒãƒˆãƒ«é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«ä¿®æ­£
âœ… **çŠ¶æ…‹**: å®Œäº†  
**ä¿®æ­£å¯¾è±¡**:
- battle_special_effects.gd: HPä¿å­˜ä¿®æ­£
- battle_execution.gd: ãƒ€ãƒ¡ãƒ¼ã‚¸é›†è¨ˆä¿®æ­£

#### Phase 4: place_creature() åˆæœŸåŒ–
âœ… **çŠ¶æ…‹**: å®Œäº†  
**ä¿®æ­£å†…å®¹**:
- base_tiles.gd ã® place_creature() ã§ current_hp ã‚’åˆæœŸåŒ–
- å¬å–šæ™‚ã«é©åˆ‡ãªHPå€¤ãŒè¨­å®šã•ã‚Œã‚‹

#### Phase 5: update_current_hp() å‘¼ã³å‡ºã—å‰Šé™¤
âœ… **çŠ¶æ…‹**: å®Œäº†ï¼ˆ39ç®‡æ‰€å…¨å‰Šé™¤ï¼‰  
**å‰Šé™¤å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«**:
| ãƒ•ã‚¡ã‚¤ãƒ« | ç®‡æ‰€æ•° |
|---------|--------|
| battle_skill_processor.gd | 8 |
| battle_item_applier.gd | 4 |
| skill_support.gd | 1 |
| skill_special_creature.gd | 1 |
| ãã®ä»–ã‚¹ã‚­ãƒ«ãƒ•ã‚¡ã‚¤ãƒ« | 25 |
| **åˆè¨ˆ** | **39** |

### Phase 6: ãƒãƒƒãƒ—ã‚·ã‚¹ãƒ†ãƒ å´

#### ãƒãƒˆãƒ«ä¸­ã®ãƒœãƒ¼ãƒŠã‚¹åæ˜ ï¼ˆ10ç®‡æ‰€ï¼‰
âœ… **çŠ¶æ…‹**: å®Œäº†

**1. item_bonus_hp ã® current_hp åŒæœŸ**
- battle_item_applier.gd (4ç®‡æ‰€)
- ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœé©ç”¨æ™‚ã« current_hp ã‚‚å¢—æ¸›

**2. temporary_bonus_hp ã® current_hp åŒæœŸ**
- battle_skill_processor.gd (8ç®‡æ‰€)
- skill_support.gd (1ç®‡æ‰€)
- skill_special_creature.gd (1ç®‡æ‰€)
- åˆè¨ˆ10ç®‡æ‰€ã§ current_hp åŒæœŸ

#### base_up_hp å¢—åŠ æ™‚ã® current_hp åŒæœŸï¼ˆ4ç®‡æ‰€ï¼‰
âœ… **çŠ¶æ…‹**: å®Œäº†

**å®Ÿè£…**: effect_manager.gd ã® `apply_max_hp_effect()` é–¢æ•°

---

## ğŸ”‘ HPç®¡ç†ã®æ–°æ–¹å¼

### HP æ§‹æˆè¦ç´ 

```
base_hpï¼ˆåŸºæœ¬HPï¼‰
+ base_up_hpï¼ˆæ°¸ç¶šãƒœãƒ¼ãƒŠã‚¹: åˆæˆãƒ»ãƒã‚¹ã‚°ãƒ­ãƒ¼ã‚¹ç­‰ï¼‰
+ resonance_bonus_hpï¼ˆæ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹ï¼‰
+ land_bonus_hpï¼ˆåœ°å½¢ãƒœãƒ¼ãƒŠã‚¹ï¼‰
+ item_bonus_hpï¼ˆã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒ¼ãƒŠã‚¹ï¼‰
+ spell_bonus_hpï¼ˆã‚¹ãƒšãƒ«ãƒœãƒ¼ãƒŠã‚¹ï¼‰
+ temporary_bonus_hpï¼ˆä¸€æ™‚ãƒœãƒ¼ãƒŠã‚¹: ã‚¹ã‚­ãƒ«åŠ¹æœï¼‰
= MHPï¼ˆæœ€å¤§HPï¼‰

current_hp: çŠ¶æ…‹å€¤ï¼ˆå®Ÿéš›ã®ç¾åœ¨HPï¼‰
```

### ãƒ€ãƒ¡ãƒ¼ã‚¸æ¶ˆè²»é †åºï¼ˆé‡è¦ï¼‰

ãƒ€ãƒ¡ãƒ¼ã‚¸ã‚’å—ã‘ãŸæ™‚ã€ä»¥ä¸‹ã®é †åºã§ãƒœãƒ¼ãƒŠã‚¹ã‹ã‚‰æ¶ˆè²»ã•ã‚Œã‚‹ï¼š
1. resonance_bonus_hpï¼ˆæ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹ï¼‰
2. land_bonus_hpï¼ˆåœ°å½¢ãƒœãƒ¼ãƒŠã‚¹ï¼‰
3. temporary_bonus_hpï¼ˆä¸€æ™‚ãƒœãƒ¼ãƒŠã‚¹ï¼‰
4. item_bonus_hpï¼ˆã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒ¼ãƒŠã‚¹ï¼‰
5. spell_bonus_hpï¼ˆã‚¹ãƒšãƒ«ãƒœãƒ¼ãƒŠã‚¹ï¼‰
6. base_hpï¼ˆåŸºæœ¬HP: æœ€å¾Œã«å‰Šã‚‰ã‚Œã‚‹ï¼‰

**é‡è¦**: `base_up_hp` ã¯ **æ¶ˆè²»ã•ã‚Œãªã„** â† æ°¸ç¶šãƒœãƒ¼ãƒŠã‚¹ãªã®ã§

---

## ğŸ“ ä¿®æ­£å¯¾è±¡ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | ä¿®æ­£å†…å®¹ | çŠ¶æ…‹ |
|---------|---------|------|
| battle_participant.gd | ã‚¯ãƒ©ã‚¹æ§‹é€ ï¼ˆæ—¢ã«æ–°æ–¹å¼ï¼‰ | âœ… |
| battle_preparation.gd | é˜²å¾¡å´HPåˆæœŸåŒ–ã€ãƒœãƒ¼ãƒŠã‚¹é©ç”¨ | âœ… |
| battle_special_effects.gd | HPä¿å­˜ä¿®æ­£ | âœ… |
| battle_execution.gd | ãƒ€ãƒ¡ãƒ¼ã‚¸é›†è¨ˆä¿®æ­£ | âœ… |
| base_tiles.gd | place_creature() ã§ã®åˆæœŸåŒ– | âœ… |
| battle_skill_processor.gd | temporary_bonus_hp + current_hp (8ç®‡æ‰€) | âœ… |
| battle_item_applier.gd | item_bonus_hp + current_hp (4ç®‡æ‰€) | âœ… |
| skill_support.gd | å¿œæ´ã‚¹ã‚­ãƒ« (1ç®‡æ‰€) | âœ… |
| skill_special_creature.gd | ã‚ªãƒ¼ã‚¬ãƒ­ãƒ¼ãƒ‰ (1ç®‡æ‰€) | âœ… |
| effect_manager.gd | apply_max_hp_effect() é–¢æ•°è¿½åŠ  | âœ… |
| land_action_helper.gd | apply_max_hp_effect() å‘¼ã³å‡ºã— (2ç®‡æ‰€) | âœ… |

---

## âœ… å®Œäº†ãƒã‚§ãƒƒã‚¯ãƒªã‚¹ãƒˆ

### ãƒãƒˆãƒ«å´
- [x] BattleParticipant ã‚¯ãƒ©ã‚¹ã®æ–°æ–¹å¼ç¢ºèª
- [x] battle_preparation.gd ã®é˜²å¾¡å´åˆæœŸåŒ–
- [x] update_current_hp() å‘¼ã³å‡ºã—å‰Šé™¤ï¼ˆ39ç®‡æ‰€ï¼‰
- [x] update_current_hp() é–¢æ•°å®šç¾©å‰Šé™¤
- [x] place_creature() ã§ã® current_hp åˆæœŸåŒ–

### ãƒãƒƒãƒ—å´
- [x] EffectManager.apply_max_hp_effect() å®Ÿè£…
- [x] land_action_helper.gd ã§ã®å‘¼ã³å‡ºã—
- [x] board_system_3d.gd ã§ã®å‘¼ã³å‡ºã—
- [x] battle_system.gd ã§ã®å‘¼ã³å‡ºã—

### ãƒãƒˆãƒ«ä¸­ãƒœãƒ¼ãƒŠã‚¹
- [x] item_bonus_hp ã® current_hp åŒæœŸ
- [x] temporary_bonus_hp ã® current_hp åŒæœŸ

---

**ä½œæˆæ—¥**: 2025-11-20  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: âœ… **å®Œå…¨å®Œäº†**
