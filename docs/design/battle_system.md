# ğŸ® ãƒãƒˆãƒ«ã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ã‚«ãƒ«ãƒ‰ã‚»ãƒ—ãƒˆé¢¨ã‚«ãƒ¼ãƒ‰ãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ   
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ25æ—¥

---

## ğŸ“‹ ç›®æ¬¡

1. [ãƒãƒˆãƒ«ãƒ•ãƒ­ãƒ¼å…¨ä½“](#ãƒãƒˆãƒ«ãƒ•ãƒ­ãƒ¼å…¨ä½“)
2. [BattleParticipantã¨HPç®¡ç†](#battleparticipantã¨hpç®¡ç†)
3. [ã‚¹ã‚­ãƒ«é©ç”¨é †åº](#ã‚¹ã‚­ãƒ«é©ç”¨é †åº)
4. [åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‚·ã‚¹ãƒ†ãƒ ](#åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‚·ã‚¹ãƒ†ãƒ )
5. [å…ˆåˆ¶ãƒ»å¾Œæ‰‹åˆ¤å®š](#å…ˆåˆ¶å¾Œæ‰‹åˆ¤å®š)
6. [ãƒãƒˆãƒ«çµæœåˆ¤å®š](#ãƒãƒˆãƒ«çµæœåˆ¤å®š)
7. [é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«](#é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«)

---

## ãƒãƒˆãƒ«ãƒ•ãƒ­ãƒ¼å…¨ä½“

### æ¦‚è¦ãƒ•ãƒ­ãƒ¼

```
1. ã‚«ãƒ¼ãƒ‰é¸æŠï¼†ã‚³ã‚¹ãƒˆæ”¯æ‰•ã„
   â†“
2. æ”»æ’ƒå´ã‚¢ã‚¤ãƒ†ãƒ ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆä»»æ„ï¼‰
   â†“
3. é˜²å¾¡å´ã‚¢ã‚¤ãƒ†ãƒ ãƒ•ã‚§ãƒ¼ã‚ºï¼ˆä»»æ„ï¼‰
   â†“
4. ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœé©ç”¨
   â†“
5. æ”»æ’ƒå´åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ï¼ˆå±æ€§ä¸€è‡´æ™‚ï¼‰
   â†“
6. ã‚¹ã‚­ãƒ«æ¡ä»¶ãƒã‚§ãƒƒã‚¯ï¼ˆadjacent_ally_landç­‰ï¼‰
   â†“
7. å…ˆåˆ¶æ”»æ’ƒ: æ”»æ’ƒå´AP vs é˜²å¾¡å´HP
   â†“
8. åæ’ƒ: é˜²å¾¡å´ST vs æ”»æ’ƒå´HPï¼ˆç”Ÿå­˜æ™‚ï¼‰
   â†“
9. çµæœåˆ¤å®š
```

### è©³ç´°ãƒ•ãƒ­ãƒ¼ï¼ˆã‚¹ã‚­ãƒ«é©ç”¨å«ã‚€ï¼‰

```
0. å¤‰èº«ã‚¹ã‚­ãƒ«é©ç”¨ (apply_battle_start_transform) ã€Phase 0ã€‘
   â”œâ”€ æˆ¦é—˜é–‹å§‹æ™‚ã«ç™ºå‹•ã™ã‚‹å¤‰èº«ã‚¹ã‚­ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
   â”œâ”€ æ”»æ’ƒå´ãƒ»é˜²å¾¡å´ã®ä¸¡æ–¹ã«é©ç”¨
   â””â”€ è©³ç´°: skills/transform_skill.md å‚ç…§
   
1. å¿œæ´ã‚¹ã‚­ãƒ«é©ç”¨ (apply_support_skills_to_all) ã€Phase 1ã€‘
   â”œâ”€ ç›¤é¢ã®å¿œæ´æŒã¡ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã‚’å–å¾—
   â”œâ”€ æ¡ä»¶ã‚’æº€ãŸã™ãƒãƒˆãƒ«å‚åŠ è€…ã«ãƒãƒ•ä»˜ä¸
   â””â”€ å‹•çš„ãƒœãƒ¼ãƒŠã‚¹ï¼ˆéš£æ¥è‡ªé ˜åœ°æ•°ï¼‰ã‚’è¨ˆç®—
   
2. å·»ç‰©æ”»æ’ƒåˆ¤å®š (check_scroll_attack)
   â”œâ”€ å·»ç‰©æ”»æ’ƒ or å·»ç‰©å¼·æ‰“ã‚¹ã‚­ãƒ«ã‚’ãƒã‚§ãƒƒã‚¯
   â”œâ”€ å·»ç‰©å¼·æ‰“ã®å ´åˆã¯æ„Ÿå¿œã‚’é©ç”¨
   â””â”€ é€šå¸¸å·»ç‰©æ”»æ’ƒã®å ´åˆã¯æ„Ÿå¿œã‚’ã‚¹ã‚­ãƒƒãƒ—

3. æ„Ÿå¿œã‚¹ã‚­ãƒ« (apply_resonance_skill)
   â”œâ”€ ç‰¹å®šå±æ€§åœŸåœ°æ‰€æœ‰ã§AP/HPä¸Šæ˜‡
   â””â”€ å·»ç‰©å¼·æ‰“ã®å ´åˆã¯é©ç”¨ã€é€šå¸¸å·»ç‰©æ”»æ’ƒã®å ´åˆã¯ã‚¹ã‚­ãƒƒãƒ—

4. åœŸåœ°æ•°æ¯”ä¾‹åŠ¹æœ (apply_land_count_effects)
   â”œâ”€ ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ã®åœŸåœ°æ‰€æœ‰çŠ¶æ³ã‚’ç¢ºèª
   â”œâ”€ æ¡ä»¶ã‚’æº€ãŸã›ã°APã¨HPã‚’ä¸Šæ˜‡
   â””â”€ resonance_bonus_hpãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«åŠ ç®—
   
5. å¼·æ‰“ã‚¹ã‚­ãƒ« (apply_power_strike)
   â”œâ”€ æ„Ÿå¿œé©ç”¨å¾Œã®APã‚’åŸºæº–ã«è¨ˆç®—
   â”œâ”€ æ¡ä»¶ã‚’æº€ãŸã›ã°APã‚’å¢—å¹…
   â””â”€ ä¾‹: åŸºæœ¬20 â†’ æ„Ÿå¿œ+30=50 â†’ å¼·æ‰“Ã—1.5=75
   
6. 2å›æ”»æ’ƒåˆ¤å®š (_check_double_attack)
   â”œâ”€ 2å›æ”»æ’ƒã‚¹ã‚­ãƒ«ä¿æŒãƒã‚§ãƒƒã‚¯
   â””â”€ attack_count = 2 ã«è¨­å®š
   
7. æ”»æ’ƒã‚·ãƒ¼ã‚±ãƒ³ã‚¹ (_execute_attack_sequence)
   â”œâ”€ æ”»æ’ƒé †æ±ºå®šï¼ˆå…ˆåˆ¶ãƒ»å¾Œæ‰‹åˆ¤å®šï¼‰
   â”œâ”€ å„æ”»æ’ƒã”ã¨ã«ãƒ€ãƒ¡ãƒ¼ã‚¸é©ç”¨
   â””â”€ **æ”»æ’ƒå¾Œã«å³æ­»åˆ¤å®š** (_check_instant_death)
      â”œâ”€ å³æ­»ã‚¹ã‚­ãƒ«ä¿æŒãƒã‚§ãƒƒã‚¯
      â”œâ”€ æ¡ä»¶åˆ¤å®šï¼ˆå±æ€§ã€STã€ç«‹å ´ãªã©ï¼‰
      â”œâ”€ ç¢ºç‡åˆ¤å®š
      â””â”€ æˆåŠŸæ™‚: instant_death_flag = true, HP = 0
   
8. ãƒãƒˆãƒ«çµæœåˆ¤å®š (_resolve_battle_result)
   â”œâ”€ HPãƒã‚§ãƒƒã‚¯
   â””â”€ å‹æ•—æ±ºå®š
   
9. ãƒãƒˆãƒ«å¾Œå‡¦ç† (_apply_post_battle_effects)
   â”œâ”€ å†ç”Ÿã‚¹ã‚­ãƒ«é©ç”¨ï¼ˆç”Ÿå­˜è€…ã®ã¿ï¼‰
   â”‚  â””â”€ HP > 0 ã®å ´åˆã®ã¿ç™ºå‹•
   â”œâ”€ åœŸåœ°å¥ªå– or ã‚«ãƒ¼ãƒ‰ç ´å£Š or æ‰‹æœ­å¾©å¸°
   â””â”€ ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼HPæ›´æ–°
```

**æ³¨**: ä¸å±ˆã‚¹ã‚­ãƒ«ã¯ãƒãƒˆãƒ«å‡¦ç†ã¨ã¯ç‹¬ç«‹ã—ã¦å‹•ä½œã—ã€ã‚¢ã‚¯ã‚·ãƒ§ãƒ³å¾Œã®ãƒ€ã‚¦ãƒ³åˆ¤å®šæ™‚ã«é©ç”¨ã•ã‚Œã‚‹ã€‚ãƒãƒˆãƒ«ãƒ•ãƒ­ãƒ¼å†…ã§ã¯é–¢ä¸ã—ãªã„ã€‚

---

## BattleParticipantã¨HPç®¡ç†

### BattleParticipantã‚¯ãƒ©ã‚¹

**å½¹å‰²**: ãƒãƒˆãƒ«å‚åŠ è€…ã®ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã¨HPç®¡ç†ã‚’æ‹…å½“

**å®Ÿè£…å ´æ‰€**: `scripts/battle_participant.gd`

### HPã®éšå±¤æ§‹é€ 

```gdscript
{
  base_hp: int              # ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã®åŸºæœ¬HPï¼ˆæœ€å¾Œã«æ¶ˆè²»ï¼‰
  resonance_bonus_hp: int   # æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹ï¼ˆå„ªå…ˆæ¶ˆè²»ï¼‰
  land_bonus_hp: int        # åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ï¼ˆ2ç•ªç›®ã«æ¶ˆè²»ï¼‰
  item_bonus_hp: int        # ã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒ¼ãƒŠã‚¹ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
  spell_bonus_hp: int       # ã‚¹ãƒšãƒ«ãƒœãƒ¼ãƒŠã‚¹ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
  current_hp: int           # è¡¨ç¤ºHPï¼ˆå…¨ã¦ã®åˆè¨ˆï¼‰
}
```

### ãƒ€ãƒ¡ãƒ¼ã‚¸æ¶ˆè²»é †åº

1. **æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹** (`resonance_bonus_hp`) - æœ€å„ªå…ˆã§æ¶ˆè²»
2. **åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹** (`land_bonus_hp`) - æˆ¦é—˜ã”ã¨ã«å¾©æ´»
3. **ã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒ¼ãƒŠã‚¹** (`item_bonus_hp`) - å°†æ¥å®Ÿè£…
4. **ã‚¹ãƒšãƒ«ãƒœãƒ¼ãƒŠã‚¹** (`spell_bonus_hp`) - å°†æ¥å®Ÿè£…
5. **åŸºæœ¬HP** (`base_hp`) - æœ€å¾Œã«æ¶ˆè²»

### è¨­è¨ˆæ€æƒ³

- **ä¸€æ™‚çš„ãªãƒœãƒ¼ãƒŠã‚¹ã‚’å…ˆã«æ¶ˆè²»**ã—ã€ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã®æœ¬æ¥ã®HPã‚’å®ˆã‚‹
- **æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹**: æœ€ã‚‚ä¸€æ™‚çš„ï¼ˆãƒãƒˆãƒ«é™å®šï¼‰ãªãŸã‚ã€æœ€å„ªå…ˆæ¶ˆè²»
- **åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹**: æˆ¦é—˜ã”ã¨ã«å¾©æ´»ã™ã‚‹ãŸã‚ã€æ¬¡ã«æ¶ˆè²»
- **åŸºæœ¬HP**: æ¸›ã‚‹ã¨é…ç½®ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã®æ°¸ç¶šçš„ãªãƒ€ãƒ¡ãƒ¼ã‚¸ã¨ãªã‚‹

### ãƒ€ãƒ¡ãƒ¼ã‚¸å‡¦ç†ã®å®Ÿè£…

```gdscript
func take_damage(damage: int) -> Dictionary:
	var remaining_damage = damage
	var damage_breakdown = {
		"resonance_bonus_consumed": 0,
		"land_bonus_consumed": 0,
		"item_bonus_consumed": 0,
		"spell_bonus_consumed": 0,
		"base_hp_consumed": 0
	}
	
	# 1. æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹ã‹ã‚‰æ¶ˆè²»
	if resonance_bonus_hp > 0 and remaining_damage > 0:
		var consumed = min(resonance_bonus_hp, remaining_damage)
		resonance_bonus_hp -= consumed
		remaining_damage -= consumed
		damage_breakdown["resonance_bonus_consumed"] = consumed
	
	# 2. åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‹ã‚‰æ¶ˆè²»
	if land_bonus_hp > 0 and remaining_damage > 0:
		var consumed = min(land_bonus_hp, remaining_damage)
		land_bonus_hp -= consumed
		remaining_damage -= consumed
		damage_breakdown["land_bonus_consumed"] = consumed
	
	# 3. ã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒ¼ãƒŠã‚¹ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
	# 4. ã‚¹ãƒšãƒ«ãƒœãƒ¼ãƒŠã‚¹ï¼ˆå°†æ¥å®Ÿè£…ï¼‰
	
	# 5. åŸºæœ¬HPã‹ã‚‰æ¶ˆè²»
	if remaining_damage > 0:
		base_hp -= remaining_damage
		damage_breakdown["base_hp_consumed"] = remaining_damage
	
	# ç¾åœ¨HPã‚’æ›´æ–°
	update_current_hp()
	
	return damage_breakdown
```

### ä¸»è¦ãƒ¡ã‚½ãƒƒãƒ‰

```gdscript
# åˆè¨ˆHPã‚’å†è¨ˆç®—
func update_current_hp():
	current_hp = base_hp + resonance_bonus_hp + land_bonus_hp + 
				 item_bonus_hp + spell_bonus_hp

# ãƒ€ãƒ¡ãƒ¼ã‚¸å‡¦ç†ï¼ˆæ¶ˆè²»é †åºã«å¾“ã†ï¼‰
func take_damage(damage: int) -> Dictionary

# ç”Ÿå­˜åˆ¤å®š
func is_alive() -> bool:
	return current_hp > 0

# ãƒ‡ãƒãƒƒã‚°ç”¨ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹è¡¨ç¤º
func get_status_string() -> String:
	return "%s (HP:%d/%d, AP:%d)" % [
		creature_data.get("name", "ä¸æ˜"),
		current_hp,
		base_hp + land_bonus_hp + item_bonus_hp + spell_bonus_hp,
		current_ap
	]
```

### ä½¿ç”¨ä¾‹

```gdscript
# 1. å‚åŠ è€…ä½œæˆ
var attacker = BattleParticipant.new(
	card_data,      # ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãƒ‡ãƒ¼ã‚¿
	base_hp,        # åŸºæœ¬HP
	land_bonus,     # åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹HP
	ap,             # æ”»æ’ƒåŠ›
	true,           # is_attacker
	player_id       # ãƒ—ãƒ¬ã‚¤ãƒ¤ãƒ¼ID
)

# 2. ã‚¹ã‚­ãƒ«é©ç”¨
attacker.resonance_bonus_hp += 30  # æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹è¿½åŠ 
attacker.update_current_hp()       # åˆè¨ˆHPå†è¨ˆç®—

# 3. ãƒ€ãƒ¡ãƒ¼ã‚¸å‡¦ç†
var breakdown = attacker.take_damage(50)
# â†’ æ„Ÿå¿œ(30) â†’ åœŸåœ°(20) â†’ åŸºæœ¬HP(0) ã®é †ã§æ¶ˆè²»

# 4. çµæœè¡¨ç¤º
print("  - æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹: ", breakdown["resonance_bonus_consumed"], " æ¶ˆè²»")
print("  - åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹: ", breakdown["land_bonus_consumed"], " æ¶ˆè²»")
print("  - åŸºæœ¬HP: ", breakdown["base_hp_consumed"], " æ¶ˆè²»")
print("  â†’ æ®‹HP: ", attacker.current_hp)
```

---

## ã‚¹ã‚­ãƒ«é©ç”¨é †åº

### ç›¸ä¹—åŠ¹æœã®è¨­è¨ˆæ€æƒ³

ã“ã®é †åºã«ã‚ˆã‚Šã€è¤‡æ•°ã‚¹ã‚­ãƒ«ã‚’æŒã¤ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã¯ç›¸ä¹—åŠ¹æœã‚’å¾—ã‚‰ã‚Œã‚‹ã€‚

**ä¾‹: æ„Ÿå¿œ+å¼·æ‰“ã®çµ„ã¿åˆã‚ã›**
```
ãƒ¢ãƒ«ãƒ¢ï¼ˆæ„Ÿå¿œ[ç«]+30ã€å¼·æ‰“Ã—1.5ã‚’ä»®å®šï¼‰

åŸºæœ¬AP: 20
  â†“ æ„Ÿå¿œç™ºå‹•ï¼ˆç«åœŸåœ°1å€‹æ‰€æœ‰ï¼‰
AP: 50 (+30)
  â†“ å¼·æ‰“ç™ºå‹•ï¼ˆéš£æ¥è‡ªé ˜åœ°ã‚ã‚Šï¼‰
AP: 75 (Ã—1.5)

â†’ æœ€çµ‚çš„ã«AP: 75ã§æ”»æ’ƒï¼
```

ã“ã®è¨­è¨ˆã«ã‚ˆã‚Šã€æ„Ÿå¿œã§ä¸Šæ˜‡ã—ãŸAPãŒå¼·æ‰“ã®åŸºæº–å€¤ã¨ãªã‚Šã€å¤§ããªæˆ¦åŠ›å¢—å¼·ãŒå¯èƒ½ã€‚

è©³ç´°ãªå€‹åˆ¥ã‚¹ã‚­ãƒ«ä»•æ§˜ã¯ **[skills_design.md](skills_design.md)** ã‚’å‚ç…§ã€‚

---

## åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‚·ã‚¹ãƒ†ãƒ 

### è¨ˆç®—å¼

```
åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹HP = land_level Ã— 10
```

### é©ç”¨æ¡ä»¶

- **ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã®å±æ€§** = **ã‚¿ã‚¤ãƒ«ã®å±æ€§** ã®ã¨ãã®ã¿é©ç”¨
- ä¾‹: ç«å±æ€§ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ãŒç«å±æ€§ã‚¿ã‚¤ãƒ«ã«ã„ã‚‹

### ä¿å­˜å ´æ‰€

- `land_bonus_hp` ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã«ç‹¬ç«‹ã—ã¦ä¿å­˜
- åŸºæœ¬HPã¨ã¯åˆ†é›¢ç®¡ç†

### ç‰¹æ®Šãƒ«ãƒ¼ãƒ«

- **è²«é€šã‚¹ã‚­ãƒ«**: ç›¸æ‰‹ã®åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‚’ç„¡åŠ¹åŒ–å¯èƒ½
- **æˆ¦é—˜ã”ã¨ã«å¾©æ´»**: æ¬¡ã®ãƒãƒˆãƒ«ã§ã¯å†åº¦é©ç”¨ã•ã‚Œã‚‹

è©³ç´°ã¯ **[land_system.md](land_system.md)** ã‚’å‚ç…§ã€‚

---

## å…ˆåˆ¶ãƒ»å¾Œæ‰‹åˆ¤å®š

### åˆ¤å®šé †åº

1. **å…ˆåˆ¶ã‚¹ã‚­ãƒ«ä¿æŒè€…**ãŒå…ˆæ”»
2. **å¾Œæ‰‹ã‚¹ã‚­ãƒ«ä¿æŒè€…**ãŒå¾Œæ”»
3. ä¸¡æ–¹ãªã— â†’ **æ”»æ’ƒå´ãŒå…ˆæ”»**ï¼ˆãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼‰
4. ä¸¡æ–¹ã‚ã‚Š â†’ æ‰“ã¡æ¶ˆã—åˆã„ â†’ **æ”»æ’ƒå´ãŒå…ˆæ”»**

### å®Ÿè£…

```gdscript
func _determine_attack_order(attacker: BattleParticipant, defender: BattleParticipant) -> String:
	var attacker_has_first = attacker.has_first_strike
	var attacker_has_last = attacker.has_last_strike
	var defender_has_first = defender.has_first_strike
	var defender_has_last = defender.has_last_strike
	
	# æ”»æ’ƒå´ãŒå…ˆåˆ¶ && é˜²å¾¡å´ãŒå¾Œæ‰‹ã§ãªã„
	if attacker_has_first and not defender_has_first:
		return "attacker_first"
	
	# é˜²å¾¡å´ãŒå…ˆåˆ¶ && æ”»æ’ƒå´ãŒå¾Œæ‰‹ã§ãªã„
	if defender_has_first and not attacker_has_last:
		return "defender_first"
	
	# ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆ: æ”»æ’ƒå´å…ˆæ”»
	return "attacker_first"
```

---

## ãƒãƒˆãƒ«çµæœåˆ¤å®š

### å‹æ•—æ±ºå®šãƒ­ã‚¸ãƒƒã‚¯

```
1. å…ˆåˆ¶æ”»æ’ƒ: æ”»æ’ƒå´AP >= é˜²å¾¡å´HP?
   â†’ YES: æ”»æ’ƒå´å‹åˆ©
   â†’ NO: æ¬¡ã¸

2. åæ’ƒ: é˜²å¾¡å´ST >= æ”»æ’ƒå´HP?
   â†’ YES: é˜²å¾¡å´å‹åˆ©
   â†’ NO: ä¸¡è€…ç”Ÿå­˜ â†’ æ”»æ’ƒå´å‹åˆ©ï¼ˆåœŸåœ°å¥ªå–ï¼‰
```

### å®Ÿè£…

```gdscript
func _resolve_battle_result(attacker: BattleParticipant, defender: BattleParticipant) -> String:
	if not attacker.is_alive():
		return "defender_win"
	elif not defender.is_alive():
		return "attacker_win"
	else:
		# ä¸¡è€…ç”Ÿå­˜ â†’ æ”»æ’ƒå´å‹åˆ©
		return "attacker_win"
```

### ãƒãƒˆãƒ«å¾Œå‡¦ç†

1. **å†ç”Ÿã‚¹ã‚­ãƒ«é©ç”¨**ï¼ˆç”Ÿå­˜è€…ã®ã¿ï¼‰
2. **åœŸåœ°å¥ªå–** or **ã‚«ãƒ¼ãƒ‰ç ´å£Š** or **æ‰‹æœ­å¾©å¸°**
3. **ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼HPæ›´æ–°**

---

## é–¢é€£ãƒ•ã‚¡ã‚¤ãƒ«

### å®Ÿè£…ãƒ•ã‚¡ã‚¤ãƒ«

| ãƒ•ã‚¡ã‚¤ãƒ« | å½¹å‰² |
|---------|------|
| `scripts/battle_system.gd` | ãƒãƒˆãƒ«ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ã‚¤ãƒ³ãƒ­ã‚¸ãƒƒã‚¯ |
| `scripts/battle_participant.gd` | BattleParticipantã‚¯ãƒ©ã‚¹ |
| `scripts/skills/condition_checker.gd` | ã‚¹ã‚­ãƒ«æ¡ä»¶åˆ¤å®š |
| `scripts/skills/effect_combat.gd` | ã‚¹ã‚­ãƒ«åŠ¹æœé©ç”¨ |
| `scripts/battle/battle_preparation.gd` | ãƒãƒˆãƒ«å‰æº–å‚™ï¼ˆã‚¢ã‚¤ãƒ†ãƒ é©ç”¨ç­‰ï¼‰ |

### è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ

| ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ | å†…å®¹ |
|-------------|------|
| **[skills_design.md](skills_design.md)** | ã‚¹ã‚­ãƒ«ã‚·ã‚¹ãƒ†ãƒ å…¨ä½“è¨­è¨ˆ |
| **[land_system.md](land_system.md)** | åœŸåœ°ã‚·ã‚¹ãƒ†ãƒ ãƒ»åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ |
| **[item_system.md](item_system.md)** | ã‚¢ã‚¤ãƒ†ãƒ ã‚·ã‚¹ãƒ†ãƒ ãƒ»ã‚¢ã‚¤ãƒ†ãƒ ãƒ•ã‚§ãƒ¼ã‚º |

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ25æ—¥ï¼ˆv1.0ï¼‰
