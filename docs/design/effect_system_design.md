# åŠ¹æœã‚·ã‚¹ãƒ†ãƒ è¨­è¨ˆæ›¸

**ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆ**: ã‚«ãƒ«ãƒ‰ã‚»ãƒ—ãƒˆé¢¨ã‚«ãƒ¼ãƒ‰ãƒãƒˆãƒ«ã‚²ãƒ¼ãƒ   
**ãƒãƒ¼ã‚¸ãƒ§ãƒ³**: 1.0  
**ä½œæˆæ—¥**: 2025å¹´10æœˆ21æ—¥  
**ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹**: è¨­è¨ˆä¸­

---

## ğŸ“‹ ç›®æ¬¡

1. [æ¦‚è¦](#æ¦‚è¦)
2. [åŠ¹æœã®ç¨®é¡ã¨æŒç¶šæœŸé–“](#åŠ¹æœã®ç¨®é¡ã¨æŒç¶šæœŸé–“)
3. [ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ](#ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ)
4. [HP/APç®¡ç†æ§‹é€ ](#hpapç®¡ç†æ§‹é€ )
5. [åŠ¹æœã®é©ç”¨é †åº](#åŠ¹æœã®é©ç”¨é †åº)
6. [ä»Šå¾Œã®æ¤œè¨äº‹é …](#ä»Šå¾Œã®æ¤œè¨äº‹é …)

---

## æ¦‚è¦

### ç›®çš„
ã‚¢ã‚¤ãƒ†ãƒ ã€ã‚¹ãƒšãƒ«ã€ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã‚¹ã‚­ãƒ«ã«ã‚ˆã‚‹æ§˜ã€…ãªåŠ¹æœã‚’çµ±ä¸€çš„ã«ç®¡ç†ã™ã‚‹ã‚·ã‚¹ãƒ†ãƒ ã‚’è¨­è¨ˆã™ã‚‹ã€‚

### è¨­è¨ˆæ–¹é‡
- **åŠ¹æœã®åˆ†é›¢ç®¡ç†**: ãƒãƒˆãƒ«ä¸­ã®ä¸€æ™‚åŠ¹æœã¨æ°¸ç¶šåŠ¹æœã‚’åˆ†ã‘ã¦ç®¡ç†
- **ãƒ‡ãƒ¼ã‚¿ã®æ˜ç¢ºåŒ–**: åŠ¹æœã®ç¨®é¡ã€æŒç¶šæœŸé–“ã€å‰Šé™¤æ¡ä»¶ã‚’æ˜ç¤º
- **æ‹¡å¼µæ€§ã®ç¢ºä¿**: å°†æ¥çš„ãªæ–°åŠ¹æœã®è¿½åŠ ãŒå®¹æ˜“

---

## åŠ¹æœã®ç¨®é¡ã¨æŒç¶šæœŸé–“

### 1. 1å›ã®æˆ¦é—˜ã®ã¿ã®åŠ¹æœ
**ä¾‹**: ã‚¢ã‚¤ãƒ†ãƒ ã€Œãƒ­ãƒ³ã‚°ã‚½ãƒ¼ãƒ‰ã€ä½¿ç”¨ã§AP+30

- **æŒç¶šæœŸé–“**: ãƒãƒˆãƒ«é–‹å§‹ã€œãƒãƒˆãƒ«çµ‚äº†
- **ç®¡ç†å ´æ‰€**: `BattleParticipant` ã®ä¸€æ™‚ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰
- **å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ãƒãƒˆãƒ«çµ‚äº†æ™‚ã«è‡ªå‹•å‰Šé™¤

```gdscript
participant.item_bonus_ap = 30  # ãƒãƒˆãƒ«å¾Œã«æ¶ˆãˆã‚‹
```

---

### 2. ã‚¹ãƒšãƒ«ã«ã‚ˆã‚‹ä¸€æ™‚çš„ãªåŠ¹æœï¼ˆç§»å‹•ã§æ¶ˆãˆã‚‹ï¼‰
**ä¾‹**: ã‚¹ãƒšãƒ«ã€Œãƒ–ãƒ¬ãƒƒã‚·ãƒ³ã‚°ã€ã§HP+10

- **æŒç¶šæœŸé–“**: åŠ¹æœä»˜ä¸ã€œç§»å‹•ã¾ã§
- **ç®¡ç†å ´æ‰€**: `creature_data["temporary_effects"]`
- **å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ç§»å‹•æ™‚ã€äº¤æ›æ™‚

```gdscript
creature_data["temporary_effects"] = [
    {
        "id": "blessing_002",
        "type": "stat_bonus",
        "stat": "hp",
        "value": 10,
        "source": "spell_blessing",
        "removable": true,
        "lost_on_move": true
    }
]
```

---

### 3. æ¡ä»¶ä»˜ãã§ä¸Šæ˜‡ã™ã‚‹åŠ¹æœ

#### 3-1. æ¯ãƒãƒˆãƒ«æ™‚ã«æ¡ä»¶ãƒã‚§ãƒƒã‚¯
**ä¾‹**: ã€Œç«åœŸåœ°ã‚’3ã¤ä»¥ä¸Šä¿æœ‰ã—ã¦ã„ã‚‹å ´åˆã€AP+30ã€

- **ç®¡ç†å ´æ‰€**: `ability_parsed` ã® conditions
- **é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ãƒãƒˆãƒ«é–‹å§‹æ™‚ã«æ¯å›ãƒã‚§ãƒƒã‚¯
- **å®Ÿè£…**: æ—¢å­˜ã®ConditionCheckerã‚·ã‚¹ãƒ†ãƒ ã‚’ä½¿ç”¨

```gdscript
# ãƒãƒˆãƒ«æ™‚ã«å‹•çš„è¨ˆç®—
if player_lands["fire"] >= 3:
    participant.current_ap += 30
```

#### 3-2. æ¡ä»¶ã‚’æº€ãŸã—ãŸæ™‚ç‚¹ã§åŠ¹æœä»˜ä¸
**ä¾‹**: ï¼ˆä»Šå¾Œå®šç¾©ï¼‰

- **ç®¡ç†å ´æ‰€**: `creature_data["permanent_effects"]` ã¾ãŸã¯ `temporary_effects`
- **é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: æ¡ä»¶ã‚’æº€ãŸã—ãŸæ™‚ç‚¹ã§é…åˆ—ã«è¿½åŠ 
- **å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: æ¡ä»¶ã«ã‚ˆã‚Šç•°ãªã‚‹

---

### 4. åœŸåœ°ã®ä¿æœ‰æ•°ã§å¤‰åŒ–ã™ã‚‹åŠ¹æœ
**ä¾‹**: ã€Œç«åœŸåœ°1ã¤ã”ã¨ã«AP+10ã€

- **è¨ˆç®—æ–¹æ³•**: æ¯ãƒãƒˆãƒ«æ™‚ã«å‹•çš„è¨ˆç®—ï¼ˆOption Aæ¡ç”¨ï¼‰
- **å®Ÿè£…**: æ„Ÿå¿œã‚¹ã‚­ãƒ«ã¨åŒæ§˜ã®å‡¦ç†
- **ç®¡ç†å ´æ‰€**: `ability_parsed` ã® effects

```gdscript
# ãƒãƒˆãƒ«æ™‚
var fire_lands = player_lands.get("fire", 0)
participant.current_ap += fire_lands * 10
```

---

### 5. ãƒãƒƒãƒ—å‘¨å›ã§ä¸Šæ˜‡ã™ã‚‹åŠ¹æœ
**ä¾‹**: ã‚­ãƒ¡ãƒ©ã€Œãƒãƒƒãƒ—ã‚’1å‘¨ã—ãŸã‚‰AP+10ã€

- **ã‚«ã‚¦ãƒ³ãƒˆç®¡ç†**: `creature_data` ã«æŒãŸã›ã‚‹
- **é©ç”¨æ–¹æ³•**: 1å‘¨æ™‚ç‚¹ã§AP+10ã‚’åŠ ç®—
- **æ°¸ç¶šæ€§**: ç§»å‹•ã—ã¦ã‚‚ç¶­æŒã€äº¤æ›ã§æ¶ˆãˆã‚‹

```gdscript
creature_data["map_lap_count"] = 2
creature_data["lap_bonus_ap"] = 20  # 10 Ã— 2å‘¨

# ã¾ãŸã¯ permanent_effects ã«è¿½åŠ 
creature_data["permanent_effects"].append({
    "id": "lap_bonus_003",
    "type": "stat_bonus",
    "stat": "ap",
    "value": 10,
    "source": "map_lap",
    "removable": false,
    "lost_on_move": false
})
```

---

### 6. éš£æ¥æ¡ä»¶ã§ä¸Šæ˜‡ã™ã‚‹åŠ¹æœ
**ä¾‹**: ã€Œéš£æ¥ã«è‡ªé ˜åœ°ãŒã‚ã‚‹å ´åˆã€AP+20ã€HP+20ã€

- **å®Ÿè£…**: æ—¢å­˜ã®å¼·æ‰“ã‚¹ã‚­ãƒ«ã‚·ã‚¹ãƒ†ãƒ ã¨åŒæ§˜
- **é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ãƒãƒˆãƒ«é–‹å§‹æ™‚ã«æ¡ä»¶ãƒã‚§ãƒƒã‚¯
- **ç®¡ç†å ´æ‰€**: `ability_parsed` ã® conditions

```gdscript
# ãƒãƒˆãƒ«æ™‚ã«å‹•çš„è¨ˆç®—
if has_adjacent_ally_land:
    participant.current_ap += 20
    participant.temporary_bonus_hp += 20
```

---

### 7. ã‚¹ã‚­ãƒ«ã€Œåˆæˆã€ã«ã‚ˆã‚‹æ°¸ç¶šçš„ãªåŠ¹æœ
**ä¾‹**: åˆæˆ[åœ°]ã‚’æŒã¤ã‚«ãƒ¼ãƒ‰ã‚’ç”Ÿè´„ã«ã—ã¦å¬å–šã€æ¡ä»¶ã‚’æº€ãŸã›ã°èƒ½åŠ›ä¸Šæ˜‡

- **é©ç”¨ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: å¬å–šæ™‚
- **æ°¸ç¶šæ€§**: äº¤æ›ã§æ¶ˆãˆã‚‹
- **å®Ÿè£…æ–¹æ³•**: 
  - **Option A**: åŸºç¤ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆ`hp`, `ap`ï¼‰ã‚’ç›´æ¥å¤‰æ›´
  - **Option B**: `permanent_effects` ã«è¿½åŠ ï¼ˆremovable: falseï¼‰

```gdscript
# Option A
creature_data["hp"] += 10
creature_data["ap"] += 20

# Option B
creature_data["permanent_effects"].append({
    "id": "synthesis_earth_004",
    "type": "stat_bonus",
    "stat": "hp",
    "value": 10,
    "source": "synthesis",
    "removable": false,  # æ‰“ã¡æ¶ˆã—åŠ¹æœã§æ¶ˆãˆãªã„
    "lost_on_move": false
})
```

**æ¤œè¨ä¸­**: æ‰“ã¡æ¶ˆã—åŠ¹æœã«åå¿œã—ãªã„æ–°ã—ã„HPã®æ ã‚’ä½œã‚‹ã‹ï¼Ÿ

---

### 8. ã‚¹ãƒšãƒ«ã«ã‚ˆã‚‹æ°¸ç¶šçš„ãªåŠ¹æœ

#### 8-1. ç§»å‹•ã§å¤±ã‚ã‚Œã‚‹åŠ¹æœ
**ä¾‹**: ã‚¹ãƒšãƒ«ã€Œãƒ–ãƒ¬ãƒƒã‚·ãƒ³ã‚°ã€HP+10

- **ç®¡ç†å ´æ‰€**: `creature_data["temporary_effects"]`
- **å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: ç§»å‹•æ™‚ã€äº¤æ›æ™‚

#### 8-2. ç§»å‹•ã§å¤±ã‚ã‚Œãªã„åŠ¹æœ
**ä¾‹**: ã‚¹ãƒšãƒ«ã€Œãƒã‚¹ã‚°ãƒ­ãƒ¼ã‚¹ã€å…¨ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã®MHP+5

- **ç®¡ç†å ´æ‰€**: `creature_data["permanent_effects"]`
- **å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: æ‰“ã¡æ¶ˆã—åŠ¹æœã€äº¤æ›æ™‚
- **é©ç”¨å¯¾è±¡**: å…¨è‡ªã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼

```gdscript
# å…¨è‡ªã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã«ãƒ«ãƒ¼ãƒ—é©ç”¨
for tile in board_system.get_player_tiles(player_id):
    if tile.creature_data:
        tile.creature_data["permanent_effects"].append({
            "id": "mass_growth_" + str(effect_counter),
            "type": "stat_bonus",
            "stat": "hp",
            "value": 5,
            "source": "spell_mass_growth",
            "removable": true,
            "lost_on_move": false
        })
```

---

### 9. æ¡ä»¶ä»˜ãã§æ°¸ç¶šçš„ãªã‚¹ã‚­ãƒ«åŠ¹æœï¼ˆç§»å‹•ã§å¤±ã‚ã‚Œãªã„ï¼‰
**ä¾‹**: ã‚­ãƒ¡ãƒ©ï¼ˆãƒãƒƒãƒ—å‘¨å›ã§APä¸Šæ˜‡ï¼‰ã€åˆæˆåŠ¹æœ

- **ç®¡ç†å ´æ‰€**: `creature_data["permanent_effects"]`
- **å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: äº¤æ›æ™‚ã®ã¿
- **æ‰“ã¡æ¶ˆã—**: removableãƒ•ãƒ©ã‚°ã«ã‚ˆã‚Šåˆ¶å¾¡

---

### 10. ã‚¹ãƒšãƒ«ã«ã‚ˆã‚‹ä¸Šæ›¸ãã•ã‚Œã‚‹ã¾ã§æ°¸ç¶šçš„ãªåŠ¹æœ
**ä¾‹**: åœŸåœ°ã®å±æ€§å¤‰æ›´ï¼ˆåœŸåœ°ã«ã‹ã‹ã‚‹åŠ¹æœï¼‰

- **å¯¾è±¡**: åœŸåœ°ï¼ˆã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã§ã¯ãªã„ï¼‰
- **ç®¡ç†å ´æ‰€**: `tile_data["overwritable_effects"]`
- **å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°**: åŒç¨®ã®åŠ¹æœã§ä¸Šæ›¸ã

```gdscript
# åœŸåœ°ã®å±æ€§å¤‰æ›´
tile_data["element"] = "fire"  # ä¸Šæ›¸ã
tile_data["element_changed_by"] = "spell_element_change"
```

**ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼ã«å¯¾ã™ã‚‹ä¾‹**: ï¼ˆä»Šå¾Œå®šç¾©ï¼‰

---

### 11. å¼·æ‰“ã®åˆ¤å®šå‰ã«å…¥ã‚Œã‚‹
**é©ç”¨é †åº**: ãŠãã‚‰ãå…¨ã¦ã®ä¸Šæ˜‡ç³»åŠ¹æœã¯å¼·æ‰“ã®å‰ã«è¨ˆç®—ã•ã‚Œã‚‹

```
1. åŸºç¤å€¤è¨­å®šï¼ˆbase_hp, base_apï¼‰
2. permanent_effects é©ç”¨
3. temporary_effects é©ç”¨
4. åœŸåœ°ä¿æœ‰æ•°ã«ã‚ˆã‚‹åŠ¹æœ
5. éš£æ¥æ¡ä»¶ã«ã‚ˆã‚‹åŠ¹æœ
6. æ„Ÿå¿œã‚¹ã‚­ãƒ«
7. ãã®ä»–ã®æ¡ä»¶åŠ¹æœ
8. å¼·æ‰“ã‚¹ã‚­ãƒ«ï¼ˆæœ€å¾Œï¼‰
```

---

### 13. HPãŒå¢—ãˆã‚‹ã‚‚ã®ã®åˆ†é¡

#### åŸºç¤HPã«å½±éŸ¿ã™ã‚‹ã‚‚ã®
**ä¾‹**: ãƒã‚¹ã‚°ãƒ­ãƒ¼ã‚¹ã€ãƒ‰ãƒŸãƒŠãƒ³ãƒˆã‚°ãƒ­ãƒ¼ã‚¹

- **åŠ¹æœ**: `base_hp` ã¾ãŸã¯ `base_up_hp` ã«åŠ ç®—
- **æ°¸ç¶šæ€§**: ç§»å‹•ã—ã¦ã‚‚ç¶­æŒã€äº¤æ›ã§æ¶ˆãˆã‚‹
- **å‰Šé™¤**: æ‰“ã¡æ¶ˆã—åŠ¹æœã§å‰Šé™¤å¯èƒ½ï¼ˆremovable: trueï¼‰

#### åŸºç¤HPã«å½±éŸ¿ã—ãªã„ã‚‚ã®
**ä¾‹**: ã‚¹ãƒšãƒ«ã‚„ä¸€æ™‚åŠ¹æœ

- **åŠ¹æœ**: `temporary_bonus_hp` ã«åŠ ç®—
- **æ°¸ç¶šæ€§**: ç§»å‹•ã§æ¶ˆãˆã‚‹
- **å‰Šé™¤**: ç§»å‹•æ™‚ã€æ‰“ã¡æ¶ˆã—åŠ¹æœã§å‰Šé™¤

---

## ãƒ‡ãƒ¼ã‚¿æ§‹é€ è¨­è¨ˆ

### creature_dataã®æ§‹é€ 

```gdscript
{
    "id": 1,
    "name": "ã‚¢ãƒ¢ãƒ³",
    "hp": 30,           # å…ƒã®åŸºç¤HP
    "ap": 20,           # å…ƒã®åŸºç¤AP
    "element": "fire",
    "ability_parsed": {...},  # ã‚¹ã‚­ãƒ«å®šç¾©ï¼ˆæ—¢å­˜ï¼‰
    
    # æ°¸ç¶šçš„ãªåŠ¹æœï¼ˆç§»å‹•ã§æ¶ˆãˆãªã„ã€äº¤æ›ã§æ¶ˆãˆã‚‹ï¼‰
    "permanent_effects": [
        {
            "id": "mass_growth_001",
            "type": "stat_bonus",
            "stat": "hp",
            "value": 5,
            "source": "spell",
            "source_name": "ãƒã‚¹ã‚°ãƒ­ãƒ¼ã‚¹",
            "removable": true,        # æ‰“ã¡æ¶ˆã—åŠ¹æœã§æ¶ˆã›ã‚‹ã‹
            "lost_on_move": false     # ç§»å‹•ã§æ¶ˆãˆã‚‹ã‹
        },
        {
            "id": "synthesis_fire_002",
            "type": "stat_bonus",
            "stat": "ap",
            "value": 20,
            "source": "synthesis",
            "source_name": "åˆæˆ[ç«]",
            "removable": false,       # æ‰“ã¡æ¶ˆã—ã§ããªã„
            "lost_on_move": false
        }
    ],
    
    # ä¸€æ™‚çš„ãªåŠ¹æœï¼ˆç§»å‹•ã§æ¶ˆãˆã‚‹ï¼‰
    "temporary_effects": [
        {
            "id": "blessing_003",
            "type": "stat_bonus",
            "stat": "hp",
            "value": 10,
            "source": "spell",
            "source_name": "ãƒ–ãƒ¬ãƒƒã‚·ãƒ³ã‚°",
            "removable": true,
            "lost_on_move": true      # ç§»å‹•ã§æ¶ˆãˆã‚‹
        }
    ],
    
    # ãƒãƒƒãƒ—å‘¨å›ã‚«ã‚¦ãƒ³ãƒˆï¼ˆã‚­ãƒ¡ãƒ©ç­‰ï¼‰
    "map_lap_count": 0
}
```

---

### effectã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã®æ§‹é€ 

```gdscript
{
    "id": "unique_id_string",         # ä¸€æ„ã®ID
    "type": "stat_bonus",              # åŠ¹æœã‚¿ã‚¤ãƒ—
    "stat": "hp",                      # å¯¾è±¡ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ï¼ˆhp/apï¼‰
    "value": 10,                       # åŠ¹æœå€¤
    "source": "spell",                 # ç™ºç”Ÿæºï¼ˆspell/item/skill/synthesisï¼‰
    "source_name": "ãƒã‚¹ã‚°ãƒ­ãƒ¼ã‚¹",      # åŠ¹æœåï¼ˆUIè¡¨ç¤ºç”¨ï¼‰
    "removable": true,                 # æ‰“ã¡æ¶ˆã—åŠ¹æœã§æ¶ˆã›ã‚‹ã‹
    "lost_on_move": false              # ç§»å‹•ã§æ¶ˆãˆã‚‹ã‹
}
```

**åŠ¹æœã‚¿ã‚¤ãƒ—ï¼ˆtypeï¼‰**:
- `stat_bonus`: HP/APãƒœãƒ¼ãƒŠã‚¹
- ï¼ˆå°†æ¥è¿½åŠ ï¼‰`attribute_change`: å±æ€§å¤‰æ›´
- ï¼ˆå°†æ¥è¿½åŠ ï¼‰`skill_grant`: ã‚¹ã‚­ãƒ«ä»˜ä¸

---

## HP/APç®¡ç†æ§‹é€ 

### BattleParticipantã®æ§‹é€ ï¼ˆãƒãƒˆãƒ«ä¸­ï¼‰

```gdscript
class BattleParticipant:
    # åŸºç¤å€¤
    var base_hp: int              # å…ƒã®HPï¼ˆã‚«ãƒ¼ãƒ‰ãƒ‡ãƒ¼ã‚¿ã®å€¤ï¼‰
    var base_up_hp: int = 0       # æ°¸ç¶šçš„ãªåŸºç¤HPä¸Šæ˜‡ï¼ˆãƒã‚¹ã‚°ãƒ­ãƒ¼ã‚¹ã€åˆæˆç­‰ï¼‰
    var base_ap: int              # å…ƒã®AP
    var base_up_ap: int = 0       # æ°¸ç¶šçš„ãªåŸºç¤APä¸Šæ˜‡
    
    # ãƒãƒˆãƒ«ä¸­ã®ä¸€æ™‚ãƒœãƒ¼ãƒŠã‚¹
    var temporary_bonus_hp: int = 0   # ä¸€æ™‚çš„ãªHPãƒœãƒ¼ãƒŠã‚¹ï¼ˆç§»å‹•ã§æ¶ˆãˆã‚‹ï¼‰
    var temporary_bonus_ap: int = 0   # ä¸€æ™‚çš„ãªAPãƒœãƒ¼ãƒŠã‚¹
    var resonance_bonus_hp: int = 0   # æ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹
    var land_bonus_hp: int = 0        # åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹
    var item_bonus_hp: int = 0        # ã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒ¼ãƒŠã‚¹ï¼ˆãƒãƒˆãƒ«ã®ã¿ï¼‰
    var item_bonus_ap: int = 0        # ã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒ¼ãƒŠã‚¹ï¼ˆãƒãƒˆãƒ«ã®ã¿ï¼‰
    
    # è¨ˆç®—å¾Œã®å€¤
    var current_hp: int
    var current_ap: int
```

### HP/APã®è¨ˆç®—å¼

```gdscript
# HPè¨ˆç®—
current_hp = base_hp + 
             base_up_hp + 
             temporary_bonus_hp + 
             land_bonus_hp + 
             resonance_bonus_hp + 
             item_bonus_hp

# APè¨ˆç®—
current_ap = base_ap + 
             base_up_ap + 
             temporary_bonus_ap + 
             item_bonus_ap + 
             (æ„Ÿå¿œAP) + 
             (æ¡ä»¶åŠ¹æœAP)
# ãã®å¾Œã€å¼·æ‰“ã§ä¹—ç®—
```

### ãƒ€ãƒ¡ãƒ¼ã‚¸æ¶ˆè²»é †åº

```
1. resonance_bonus_hpï¼ˆæ„Ÿå¿œãƒœãƒ¼ãƒŠã‚¹ï¼‰
2. land_bonus_hpï¼ˆåœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ï¼‰
3. temporary_bonus_hpï¼ˆä¸€æ™‚ãƒœãƒ¼ãƒŠã‚¹ï¼‰
4. item_bonus_hpï¼ˆã‚¢ã‚¤ãƒ†ãƒ ãƒœãƒ¼ãƒŠã‚¹ï¼‰
5. base_up_hpï¼ˆæ°¸ç¶šçš„ãªåŸºç¤HPä¸Šæ˜‡ï¼‰
6. base_hpï¼ˆå…ƒã®HPï¼‰
```

---

## åŠ¹æœã®é©ç”¨é †åº

### ãƒãƒˆãƒ«æ™‚ã®è¨ˆç®—é †åº

```
1. åŸºç¤å€¤ã‚’è¨­å®š
   base_hp = creature_data["hp"]
   base_ap = creature_data["ap"]

2. permanent_effectsã‹ã‚‰ base_up_hp, base_up_ap ã‚’è¨ˆç®—
   for effect in permanent_effects:
       if effect["stat"] == "hp":
           base_up_hp += effect["value"]
       elif effect["stat"] == "ap":
           base_up_ap += effect["value"]

3. temporary_effectsã‹ã‚‰ temporary_bonus_hp, temporary_bonus_ap ã‚’è¨ˆç®—
   for effect in temporary_effects:
       if effect["stat"] == "hp":
           temporary_bonus_hp += effect["value"]
       elif effect["stat"] == "ap":
           temporary_bonus_ap += effect["value"]

4. åœŸåœ°ãƒœãƒ¼ãƒŠã‚¹ã‚’åŠ ç®—ï¼ˆHPã®ã¿ï¼‰
   land_bonus_hp = tile.level * 10

5. ã‚¢ã‚¤ãƒ†ãƒ åŠ¹æœã‚’åŠ ç®—
   item_bonus_ap = 30  # ä¾‹
   item_bonus_hp = 20

6. æ„Ÿå¿œåŠ¹æœã‚’åŠ ç®—
   if æ¡ä»¶ã‚’æº€ãŸã™:
       current_ap += 30
       resonance_bonus_hp += 30

7. ãã®ä»–ã®æ¡ä»¶åŠ¹æœã‚’åŠ ç®—
   if åœŸåœ°ä¿æœ‰æ•°æ¡ä»¶:
       current_ap += è¨ˆç®—å€¤
   if éš£æ¥æ¡ä»¶:
       current_ap += 20

8. å¼·æ‰“ã‚’é©ç”¨ï¼ˆæœ€å¾Œï¼‰
   current_ap = current_ap * å¼·æ‰“å€ç‡
```

---

## ä»Šå¾Œã®æ¤œè¨äº‹é …

### æœªæ±ºå®šäº‹é …

1. **permanent_effectsã®é©ç”¨æ–¹æ³•**
   - base_hpã«äº‹å‰è¨ˆç®—ã—ã¦å«ã‚ã‚‹ã‹
   - ãƒãƒˆãƒ«æ™‚ã«æ¯å›è¨ˆç®—ã™ã‚‹ã‹
   - â†’ æ¬¡å›ãƒãƒ£ãƒƒãƒˆã§æ±ºå®š

2. **åˆæˆåŠ¹æœã®å®Ÿè£…æ–¹æ³•**
   - åŸºç¤ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚’ç›´æ¥å¤‰æ›´ã™ã‚‹ã‹
   - permanent_effectsã«è¿½åŠ ã™ã‚‹ã‹
   - æ‰“ã¡æ¶ˆã—åŠ¹æœã«åå¿œã—ãªã„æ–°ã—ã„HPã®æ ã‚’ä½œã‚‹ã‹
   - â†’ æ¬¡å›ãƒãƒ£ãƒƒãƒˆã§æ±ºå®š

3. **åŠ¹æœç®¡ç†ã®è²¬ä»»æ‰€åœ¨**
   - EffectManagerã‚¯ãƒ©ã‚¹ã‚’æ–°è¦ä½œæˆã™ã‚‹ã‹
   - æ—¢å­˜ã®ã‚¯ãƒ©ã‚¹ã«æ©Ÿèƒ½ã‚’è¿½åŠ ã™ã‚‹ã‹
   - â†’ å®Ÿè£…æ™‚ã«æ±ºå®š

4. **UIè¡¨ç¤º**
   - ã‚¯ãƒªãƒ¼ãƒãƒ£ãƒ¼è©³ç´°ç”»é¢ã§ã®åŠ¹æœè¡¨ç¤º
   - ãƒãƒˆãƒ«ãƒ†ã‚¹ãƒˆãƒ„ãƒ¼ãƒ«ã§ã®åŠ¹æœè¡¨ç¤º
   - â†’ UIå®Ÿè£…æ™‚ã«æ±ºå®š

5. **ã‚»ãƒ¼ãƒ–/ãƒ­ãƒ¼ãƒ‰ã‚·ã‚¹ãƒ†ãƒ **
   - permanent_effects, temporary_effectsã®æ°¸ç¶šåŒ–
   - â†’ ã‚»ãƒ¼ãƒ–ã‚·ã‚¹ãƒ†ãƒ å®Ÿè£…æ™‚ã«æ¤œè¨

6. **åŠ¹æœã®å‰Šé™¤å‡¦ç†**
   - ç§»å‹•æ™‚ã®å‰Šé™¤ã‚¿ã‚¤ãƒŸãƒ³ã‚°
   - æ‰“ã¡æ¶ˆã—åŠ¹æœã®å®Ÿè£…
   - â†’ å®Ÿè£…æ™‚ã«è©³ç´°è¨­è¨ˆ

---

## å¤‰æ›´å±¥æ­´

| æ—¥ä»˜ | ãƒãƒ¼ã‚¸ãƒ§ãƒ³ | å¤‰æ›´å†…å®¹ |
|------|-----------|---------|
| 2025/10/21 | 1.0 | åˆç‰ˆä½œæˆ - åŠ¹æœã‚·ã‚¹ãƒ†ãƒ ã®åŸºæœ¬è¨­è¨ˆã‚’ç¢ºå®š |

---

**æœ€çµ‚æ›´æ–°**: 2025å¹´10æœˆ21æ—¥ï¼ˆv1.0ï¼‰
